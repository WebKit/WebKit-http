2012-06-29  Ojan Vafai  <ojan@chromium.org>

        garden-o-matic broken: TypeError: 'undefined' is not an object (evaluating 'buildLocations[currentIndex].url')
        https://bugs.webkit.org/show_bug.cgi?id=90243

        Reviewed by Dirk Pranke.

        jQuery was trying to be too smart and parsing the jsonp as json because of it's content-type.
        Excise jQuery and just use XHR directly since it's easier to maintain something where we control it
        all.

        Not really sure how to unittest this. I tested it all manually of course.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/net.js:
        Made net.ajax a drop-in replacement for the features of $.ajax that we were using.
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui_unittests.js:
        Not related to this patch, but figured I'd update the failing test while I was at it.

2012-06-29  Yaron Friedman  <yfriedman@chromium.org>

        Fix layout test runner for Android after https://bugs.webkit.org/show_bug.cgi?id=88134
        https://bugs.webkit.org/show_bug.cgi?id=90309

        Reviewed by Adam Barth.

        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort.start_http_server):

2012-06-29  James Weatherall  <wez@chromium.org>

        NPObjectWrapper may not address all window script object lifetime issues
        https://bugs.webkit.org/show_bug.cgi?id=85679

        TestNetscapePlugin now has a leak-window-scriptable-object test which takes a reference to the window script object, and a second reference to it via the "self" property, and does not release those references. This is used to simulate a leaky plugin in layout tests of the NPAPI scripting interface glue code.

        Reviewed by Nate Chapin.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/TestNetscapePlugIn/PluginTest.cpp:
        (PluginTest::NPN_GetProperty):
        * DumpRenderTree/TestNetscapePlugIn/PluginTest.h:
        (PluginTest):
        * DumpRenderTree/TestNetscapePlugIn/Tests/LeakWindowScriptableObject.cpp: Added.
        (LeakWindowScriptableObject):
        (LeakWindowScriptableObject::LeakWindowScriptableObject):
        (LeakWindowScriptableObject::NPP_New):

2012-06-29  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: add comment about how determine_full_port_name() works for apple ports, fix -wk2 bug
        https://bugs.webkit.org/show_bug.cgi?id=90314

        Reviewed by Ojan Vafai.

        Add comments and fix a bug in how we would handle the mac-wk2
        and win-wk2 port names after confusion around in bug 90312 :).

        * Scripts/webkitpy/layout_tests/port/apple.py:
        (ApplePort.determine_full_port_name):

2012-06-29  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: remove support for mac leopard from chromium configurations
        https://bugs.webkit.org/show_bug.cgi?id=90313

        Reviewed by Tony Chang.

        Google has shipped the last version of Chrome that will support
        Mac OS 10.5 (Leopard), and we no longer have bots that run this
        configuration, so we're removing support for it.

        A subsequent change will remove the baselines in platform/chromium-mac-leopard.

        * Scripts/webkitpy/common/checkout/baselineoptimizer_unittest.py:
        (BaselineOptimizerTest.test_complex_shadowing):
        * Scripts/webkitpy/layout_tests/port/builders.py:
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort):
        * Scripts/webkitpy/layout_tests/port/chromium_mac_unittest.py:
        (ChromiumMacPortTest.test_versions):
        * Scripts/webkitpy/layout_tests/port/factory_unittest.py:
        (FactoryTest.test_mac):
        (FactoryTest.test_chromium_mac):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_rebaseline_and_copy_test_with_lion_result):

2012-06-29  Ojan Vafai  <ojan@chromium.org>

        Fix optimize-baselines to not move baselines from win to win-7sp0
        https://bugs.webkit.org/show_bug.cgi?id=90312

        Reviewed by Dirk Pranke.

        It used to consider win-7sp0 as the common directory for all the Apple
        windows ports and incorrectly move results out of win.

        * Scripts/webkitpy/common/checkout/baselineoptimizer.py:
        * Scripts/webkitpy/common/checkout/baselineoptimizer_unittest.py:
        (BaselineOptimizerTest.test_win_does_not_drop_to_win_7sp0):
        (BaselineOptimizerTest.test_common_directory_includes_root):

2012-06-28  Ojan Vafai  <ojan@chromium.org>

        Fix rebaselining for Qt and Apple ports
        https://bugs.webkit.org/show_bug.cgi?id=90204

        Reviewed by Dirk Pranke.

        -Apporpriately put wk2 results in the -wk2 directories.
        -Since Qt and Apple-Win don't have bots that correspond to the
        platform/qt and platform/win directories, we need to fudge it
        and always put the results in those directories for those ports.

        * Scripts/webkitpy/layout_tests/port/builders.py:
        (rebaseline_override_dir):
        * Scripts/webkitpy/layout_tests/port/factory.py:
        (_builder_options):
        Identify webkit2 builders by the WK2 in the builder name.
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest._baseline_directory):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaseline.test_baseline_directory):

2012-06-29  Zoltan Horvath  <zoltan@webkit.org>

        Add support for --force parameter to run-performance-tests
        https://bugs.webkit.org/show_bug.cgi?id=90279

        Reviewed by Dirk Pranke.

        It's helpful to be able to run tests from the Skipped list of the performance tests.

        * Scripts/webkitpy/performance_tests/perftestsrunner.py:
        (PerfTestsRunner._parse_args):
        (PerfTestsRunner._collect_tests):
        * Scripts/webkitpy/performance_tests/perftestsrunner_unittest.py: Add test.
        (test_collect_tests_with_skipped_list):

2012-06-29  Tony Chang  <tony@chromium.org>

        [GTK] Enable CSS grid layout LayoutTests on GTK+
        https://bugs.webkit.org/show_bug.cgi?id=90226

        Reviewed by Martin Robinson.

        This feature is disabled via Settings by default, but for testing,
        we enable it using layoutTestController.overridePreferences. Add the
        necessary plumbing for DRT.

        WTR already works because support was added for Apple Mac earlier.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues): Feature is off by default.
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::overridePreference): Add handling of WebKitCSSGridLayoutEnabled.

2012-06-29  Ádám Kallai  <kadam@inf.u-szeged.hu>

        [Qt] Added Qt port for garden-o-matic.
        https://bugs.webkit.org/show_bug.cgi?id=82719

        Reviewed by Adam Barth.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        (.):

2012-06-29  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt][WTR] Get rid of using DumpRenderTreeSupportQt
        https://bugs.webkit.org/show_bug.cgi?id=90262

        Reviewed by Alexey Proskuryakov.

        Now that we decided to not support v8 in WebKit2
        we can get rid of using DumpRenderTreeSupportQt
        in WebKitTestRunner.

        * Tools.pro:
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::resetAfterTest):
        (WTR::InjectedBundlePage::didClearWindowForFrame):
        * WebKitTestRunner/InjectedBundle/qt/ActivateFontsQt.cpp:

2012-06-29  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Revert r121540, it broke most Qt builds

        * qmake/mkspecs/features/default_post.prf:
        * qmake/mkspecs/features/functions.prf:

2012-06-29  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Make build-webkit reject uknown configurations, eg. --profile

        The qmake-based buildsystem doesn't support it.

        Reviewed by Tor Arne Vestbø.

        * Scripts/webkitdirs.pm:
        (buildQMakeProjects):

2012-06-29  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Don't add Qt module dependencies in features.prf

        The required dependencies are already added in WebCore.pri.

        Reviewed by Tor Arne Vestbø.

        * qmake/mkspecs/features/features.prf:

2012-06-27  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Use LIBS_PRIVATE instead of putting dependencies into LIBS

        Reviewed by Tor Arne Vestbø..

        * qmake/mkspecs/features/default_post.prf:
        * qmake/mkspecs/features/functions.prf:

2012-06-28  Ryosuke Niwa  <rniwa@webkit.org>

        DOMHTMLCollection::item may return a wrong element after namedItem is called
        https://bugs.webkit.org/show_bug.cgi?id=90240

        Reviewed by Antti Koivisto.

        Add a WebKit API test since namedItem is not used in the JS/V8 binding code.

        * TestWebKitAPI/TestWebKitAPI.xcodeproj/project.pbxproj:
        * TestWebKitAPI/Tests/mac/HTMLCollectionNamedItem.html: Copied from Tools/TestWebKitAPI/Tests/mac/HTMLFormCollectionNamedItem.html.
        * TestWebKitAPI/Tests/mac/HTMLCollectionNamedItem.mm: Copied from Tools/TestWebKitAPI/Tests/mac/HTMLFormCollectionNamedItem.mm.
        (TestWebKitAPI::TEST):

2012-06-28  Dirk Pranke  <dpranke@chromium.org>

        nrwt: remove the 'google-chrome' port code
        https://bugs.webkit.org/show_bug.cgi?id=88824

        Reviewed by Ojan Vafai.

        NRWT now supports passing additional baseline directories
        and expectations files on the command line, so there's no need
        to support the concept of a 'google-chrome' port directly.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.path_to_test_expectations_file):
        * Scripts/webkitpy/layout_tests/port/builders.py:
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort.__init__):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort.__init__):
        * Scripts/webkitpy/layout_tests/port/factory.py:
        (PortFactory):
        * Scripts/webkitpy/layout_tests/port/factory_unittest.py:
        (FactoryTest.test_win):
        * Scripts/webkitpy/layout_tests/port/google_chrome.py: Removed.
        * Scripts/webkitpy/layout_tests/port/google_chrome_unittest.py: Removed.

2012-06-28  Dirk Pranke  <dpranke@chromium.org>

        nrwt: clean up how arguments are passed to workers
        https://bugs.webkit.org/show_bug.cgi?id=90126

        Reviewed by Ojan Vafai.

        The way arguments are passed to workers has been crufty. It
        turns out it can be a lot cleaner via two things:
        1) using a factory method instead of instantiating objects
        directly in manager_worker_broker removes the need for passing
        'worker arguments' to the broker.
        2) it turns out that since mock hosts and test ports are purely
        in-memory constructions, they can be pickled and passed to child
        workers, meaning that the worker no longer needs hacky code to
        pass the port in a special case or to guess what to do if we
        don't have a host - all of the test-specific logic can move to
        the test file, where we can stub out the mock host's
        port_factory to return the same already-created port when it
        needs to be shared.

        This change also moves WorkerException to manager_worker_broker.py
        where it belongs, and removes several useless tests that were
        just a maintenance burden (and would've needed rewriting when we
        change the rest of the broker implementation).

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager._run_tests.worker_factory):
        (Manager._run_tests):
        * Scripts/webkitpy/layout_tests/controllers/manager_worker_broker.py:
        (get):
        (WorkerException):
        (AbstractWorker.__init__):
        (_ManagerConnection.__init__):
        (_ManagerConnection.start_worker):
        (_InlineManager.__init__):
        (_InlineManager.start_worker):
        (_MultiProcessManager._can_pickle_host):
        (_MultiProcessManager):
        (_MultiProcessManager.start_worker):
        (_WorkerConnection.__init__):
        (_InlineWorkerConnection.__init__):
        (_InlineWorkerConnection.join):
        (_InlineWorkerConnection.run):
        (_Process.run):
        (_MultiProcessWorkerConnection.__init__):
        (_MultiProcessWorkerConnection.start):
        (_MultiProcessWorkerConnection):
        (_MultiProcessWorkerConnection.run):
        * Scripts/webkitpy/layout_tests/controllers/manager_worker_broker_unittest.py:
        (_TestWorker.__init__):
        (_TestWorker.run):
        (_TestsMixin.test_name):
        (_TestsMixin.test_cancel):
        (_TestsMixin.test_done):
        (_TestsMixin.test_unknown_message):
        (InlineBrokerTests.setUp):
        (MultiProcessBrokerTests.setUp):
        * Scripts/webkitpy/layout_tests/controllers/worker.py:
        (Worker.__init__):
        (Worker.run):
        * Scripts/webkitpy/layout_tests/controllers/worker_unittest.py: Removed.
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (passing_run):
        (logging_run):
        (run_and_capture):
        (MainTest.test_child_processes_2):
        (MainTest.test_child_processes_min):
        (MainTest.test_exception_raised):
        (MainTest.test_keyboard_interrupt):
        (MainTest.test_retrying_and_flaky_tests):
        (MainTest.test_run_order__inline):

2012-06-28  Dirk Pranke  <dpranke@chromium.org>

        nrwt: don't try to catch worker exceptions in run_webkit_tests.__main__
        https://bugs.webkit.org/show_bug.cgi?id=90125

        Reviewed by Ojan Vafai.

        It turns out run_webkit_tests.py wasn't really using
        WorkerException and the catch we had for it was pointless. I've
        removed the symbol import and moved it to the integration tests
        where it is needed. Eventually the definition of the exception
        moves to the broker module, and so minimizing the number of
        users of it is a good thing.

        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_exception_raised):

2012-06-28  Dirk Pranke  <dpranke@chromium.org>

        nrwt: clean up passing of log messages between processes
        https://bugs.webkit.org/show_bug.cgi?id=90123

        Reviewed by Ojan Vafai.

        It turns out log messages are perfectly picklable by themselves
        and contain the process id of the process that generated the
        message, so if we just pass the record from the worker to the
        manager and call logger.handle() in the manager, everything just
        works :).

        The change is covered by existing tests.

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager._log_messages):
        * Scripts/webkitpy/layout_tests/controllers/worker.py:
        (_WorkerLogHandler.emit):
        * Scripts/webkitpy/layout_tests/views/metered_stream.py:
        (MeteredStream.__init__):
        (_LogHandler.emit):

2012-06-28  Dirk Pranke  <dpranke@chromium.org>

        add a pylint wrapper for linting python code
        https://bugs.webkit.org/show_bug.cgi?id=90232

        Reviewed by Adam Barth.

        Currently we use 'pep8' to check python code in
        check-webkit-style. pep8 is fast but simple; pylint is slower
        but has much more robust linting capabilities and will catch
        variable typos and all sorts of other things. Eventually we
        should switch check-webkit-style to use this, but our code is
        far from linting now so it needs to be cleaned up first.

        This change adds the infrastructure and a wrapper so we can
        start doing that.

        * Scripts/lint-webkitpy: Added.
        * Scripts/webkitpy/pylintrc: Added.
        * Scripts/webkitpy/thirdparty/__init__.py:
        (AutoinstallImportHook.find_module):
        (AutoinstallImportHook._install_pylint):

2012-06-28  Tony Chang  <tony@chromium.org>

        [GTK] Use WEBKITOUTPUTDIR to find fonts in DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=90215

        Reviewed by Martin Robinson.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (initializeFonts): Check for WEBKITOUTPUTDIR first.
        * Scripts/webkitpy/layout_tests/port/gtk.py:
        (GtkPort.setup_environ_for_server): Copy the environment variable to the child process.
        * WebKitTestRunner/InjectedBundle/gtk/ActivateFontsGtk.cpp:
        (WTR::inititializeFontConfigSetting): Check for WEBKITOUTPUTDIR first.

2012-06-28  Dirk Pranke  <dpranke@chromium.org>

        derive ChromiumPort from WebKitPort in NRWT in order to support skipping tests if symbols are missing
        https://bugs.webkit.org/show_bug.cgi?id=89706

        Reviewed by Ojan Vafai.

        Try again to land the change first landed in r121363. This patch
        adds a bunch more tests and reworks the handling of
        port-specific default values for --pixel-tests and --time-out-ms
        to be more consistent (adding a default_pixel_tests() method,
        pushing the webkit default_timeout_ms() value up into base.py,
        and overriding it properly in the chromium and apple mac ports.

        Also change the logic in
        run_webkit_tests._setup_derived_options() to not second-guess
        what the port wants the timeout value to be for debug builds;
        computing this in two different places led to several bugs.

        This change also changes the Chromium unittest ports to derive
        from ChromiumPortTestCase instead of PortTestCase, so that we
        ensure that we're running the same tests on all port variants
        more easily. There's more cleanup that can be done here, but
        this is good enough for now

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.default_pixel_tests):
        (Port):
        (Port.default_timeout_ms):
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort):
        (ChromiumPort.__init__):
        (ChromiumPort.default_pixel_tests):
        (ChromiumPort.default_timeout_ms):
        (ChromiumPort.driver_name):
        (ChromiumPort._driver_class):
        (ChromiumPort._missing_symbol_to_skipped_tests):
        (ChromiumPort.skipped_layout_tests):
        (ChromiumPort.setup_test_run):
        (ChromiumPort._path_to_image_diff):
        (ChromiumPort._convert_path):
        * Scripts/webkitpy/layout_tests/port/chromium_android_unittest.py:
        (ChromiumAndroidPortTest):
        (ChromiumAndroidPortTest.test_expectations_files):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort._modules_to_search_for_symbols):
        * Scripts/webkitpy/layout_tests/port/chromium_linux_unittest.py:
        (ChromiumLinuxPortTest):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort._modules_to_search_for_symbols):
        * Scripts/webkitpy/layout_tests/port/chromium_mac_unittest.py:
        (ChromiumMacPortTest):
        * Scripts/webkitpy/layout_tests/port/chromium_port_testcase.py:
        split off from chromium_unittest.
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort._modules_to_search_for_symbols):
        * Scripts/webkitpy/layout_tests/port/chromium_win_unittest.py:
        (ChromiumWinTest):
        * Scripts/webkitpy/layout_tests/port/mac.py:
        (MacPort.default_timeout_ms):
        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:
        (MacTest.test_default_timeout_ms):
        * Scripts/webkitpy/layout_tests/port/mock_drt.py:
        (MockDRTPort.start_http_server):
        * Scripts/webkitpy/layout_tests/port/port_testcase.py:
        (PortTestCase.test_default_timeout_ms):
        (PortTestCase):
        (PortTestCase.test_default_pixel_tests):
        * Scripts/webkitpy/layout_tests/port/test.py:
        (TestPort.default_pixel_tests):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort._modules_to_search_for_symbols):
        (WebKitPort):
        (WebKitPort._symbols_string):
        (WebKitPort._skipped_tests_for_unsupported_features):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (TestWebKitPort._symbols_string):
        (TestWebKitPort._tests_for_disabled_features):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (_set_up_derived_options):

2012-06-28  Joshua Bell  <jsbell@chromium.org>

        run-bindings-tests should return non-zero exit code on test failure
        https://bugs.webkit.org/show_bug.cgi?id=90205

        Reviewed by Adam Barth.

        * Scripts/run-bindings-tests:
        (main):

2012-06-28  Terry Anderson  <tdanderson@chromium.org>

        [chromium] Reset the device scale factor to 1 before each test is run
        https://bugs.webkit.org/show_bug.cgi?id=90212

        Reviewed by Adam Barth.

        Some tests change the device scale factor, so this needs to be reset to
        1.0 at the start of each test to avoid test flakiness.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::reset):

2012-06-28  Ryosuke Niwa  <rniwa@webkit.org>

        Cleanup HTMLFormCollection
        https://bugs.webkit.org/show_bug.cgi?id=90111

        Reviewed by Andreas Kling.

        Add a WebKit API test using copy-paste design pattern per kling's request.

        * TestWebKitAPI/TestWebKitAPI.xcodeproj/project.pbxproj:
        * TestWebKitAPI/Tests/mac/HTMLFormCollectionNamedItem.html: Added.
        * TestWebKitAPI/Tests/mac/HTMLFormCollectionNamedItem.mm: Added.
        (-[HTMLFormCollectionNamedItemTest webView:didFinishLoadForFrame:]):
        (TestWebKitAPI):
        (TestWebKitAPI::TEST):

2012-06-28  Tim Horton  <timothy_horton@apple.com>

        [mac] WKTR windows still don't stay off screen sometimes
        https://bugs.webkit.org/show_bug.cgi?id=90214
        <rdar://problem/11760263>

        Reviewed by Simon Fraser.

        In some cases, the system itself will consult [WebKitTestRunnerWindow frame], so we should refrain from
        overriding it and instead provide a different method to use when we want the web-facing "fake" window origin
        (for PlatformWebView::windowFrame()).

        * WebKitTestRunner/mac/PlatformWebViewMac.mm:
        (-[WebKitTestRunnerWindow frameRespectingFakeOrigin]):
        (WTR::PlatformWebView::windowFrame):

2012-06-28  Martin Robinson  <mrobinson@igalia.com>

        [GTK] Add unit tests for GtkInputMethodFilter
        https://bugs.webkit.org/show_bug.cgi?id=88698

        Reviewed by Carlos Garcia Campos.

        Add unit tests for GtkInputMethodFilter in the WebCore platform layer.
        This change adds the TestGtk test suite which will be used for all non-API
        layer GTK unit tests.

        * TestWebKitAPI/GNUmakefile.am: Update the build to include the new tests.
        * TestWebKitAPI/Tests/gtk/InputMethodFilter.cpp: Added.
        (TestWebKitAPI::PlatformWebView::PlatformWebView): Remove the call to gtk_init here
        as it's now in main.cpp.
        * TestWebKitAPI/gtk/main.cpp: Change the g_type_init call to gtk_init, because now
        a majority of all unit tests depend on GTK+ being initialized.

2012-06-28  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Enable support for HTML5 datalist
        https://bugs.webkit.org/show_bug.cgi?id=90157

        Reviewed by Martin Robinson.

        Turn on DATALIST flag by default on EFL port to
        support HTML5 datalist tag.

        * Scripts/webkitperl/FeatureList.pm:

2012-06-28  Tony Chang  <tony@chromium.org>

        Enable CSS grid layout LayoutTests on platform Mac
        https://bugs.webkit.org/show_bug.cgi?id=90113

        Reviewed by Ojan Vafai.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues): Reset the value to NO between tests.

2012-06-28  Mike Fenton  <mifenton@rim.com>

        [BlackBerry] Add watchlist options for Blackberry and editing.
        https://bugs.webkit.org/show_bug.cgi?id=90193

        Unreviewed.

        Add BlackBerry and Editing watchlist and monitor them.

        * Scripts/webkitpy/common/config/watchlist:

2012-06-28  Tim Horton  <timothy_horton@apple.com>

        Unreviewed, upgrade myself to a reviewer!

        http://www.webkit.org/blog/2082/tim-horton-is-now-a-webkit-reviewer/

        * Scripts/webkitpy/common/config/committers.py:

2012-06-28  Terry Anderson  <tdanderson@chromium.org>

        [Chromium] Chromium's LayoutTestController is missing setBackingScaleFactor
        https://bugs.webkit.org/show_bug.cgi?id=83635

        Reviewed by Adam Barth.

        Added InvokeCallbackTask, a new derived class of MethodTask. When
        setBackingScaleFactor is called, a call to setDeviceScaleFactor in
        WebView is made and then postTask is used to invoke the callback
        function specified in testRunner.setBackingScaleFactor. 

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (InvokeCallbackTask):
        (InvokeCallbackTask::InvokeCallbackTask):
        (InvokeCallbackTask::runIfValid):
        (LayoutTestController::setBackingScaleFactor):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController):

2012-06-28  Ojan Vafai  <ojan@chromium.org>

        Make rebaseline-test and rebaseline-expectations work for non-Chromium ports
        https://bugs.webkit.org/show_bug.cgi?id=90186

        Reviewed by Adam Barth.

        This makes rebaselining work for all ports that have a TestExpectations file
        in the tree. I didn't test other ports.

        This doesn't address 100% of the problem. The rebaseline code puts the expectations
        in the most specific directory and relies on optimize-baselines to merge baselines
        appropriately. This only works if every platform directory has an equivalent bot
        that runs the tests, which is not true for most ports.

        * Scripts/webkitpy/common/net/buildbot/buildbot.py:
        (Builder._revision_and_build_for_filename):
        Some bots have filenames that aren't revision/build number pairs
        e.g. they are random junk like aQhxvx. Handle this gracefully.
        (Builder._fetch_revision_to_build_map):
        (Builder._file_info_list_to_revision_to_build_list):
        * Scripts/webkitpy/common/net/buildbot/buildbot_unittest.py:
        (BuilderTest.test_build_and_revision_for_filename):
        (BuilderTest.test_file_info_list_to_revision_to_build_list):
        * Scripts/webkitpy/layout_tests/port/builders.py:
        Update the list of builders. This list needs to be kept up
        to date for the rebaseline tool to work.
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest._results_url):
        (RebaselineExpectations._run_webkit_patch):
        (RebaselineExpectations._rebaseline_port):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        Qt port uses qmake to determine the right version. Systems without qmake correctly fallback
        to a specific version.

2012-06-28  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][NRWT] Fix baseline and skipped file search path.
        https://bugs.webkit.org/show_bug.cgi?id=89882

        Unreviewed trivial typo fix after r121430.

        * Scripts/webkitpy/layout_tests/port/qt_unittest.py:
        (QtPortTest._assert_search_path):
        (QtPortTest._assert_skipped_path):

2012-06-28  János Badics  <jbadics@inf.u-szeged.hu>

        [Qt][NRWT] Fix baseline and skipped file search path.
        https://bugs.webkit.org/show_bug.cgi?id=89882

        Reviewed by Csaba Osztrogonác.

        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort._search_paths):
        (QtPort):
        (QtPort.baseline_search_path):
        (QtPort._skipped_file_search_paths):
        * Scripts/webkitpy/layout_tests/port/qt_unittest.py:
        (QtPortTest):
        (QtPortTest._assert_skipped_path):
        (QtPortTest.test_baseline_search_path):
        (QtPortTest.test_skipped_file_search_path):

2012-06-28  Alexander Pavlov  <apavlov@chromium.org>

        [Qt] inspector/styles/inject-stylesheet.html makes 4 tests flakey (TEXT PASS)
        https://bugs.webkit.org/show_bug.cgi?id=90167

        Reviewed by Csaba Osztrogonác.

        DRT should remove user stylesheets from the page group when resetting before running another test.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2012-06-28  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt][DRT] Reset AcceleratedCompositingEnabled between tests
        https://bugs.webkit.org/show_bug.cgi?id=90164

        Reviewed by Simon Hausmann.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::resetSettings):

2012-06-28  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Restore original value of mock scrollbars between tests
        https://bugs.webkit.org/show_bug.cgi?id=90155

        Reviewed by Simon Hausmann.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::resetSettings):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setMockScrollbarsEnabled):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController):

2012-06-27  Mark Rowe  <mrowe@apple.com>

        <http://webkit.org/b/90096> Building within Xcode sometimes does a full rebuild after building via build-webkit

        We need to ensure that build-webkit uses the same setting for SHARED_PRECOMPS_DIR
        as what Xcode itself will use when building, otherwise switching between the two
        can result in the precompiled headers being rebuilt and thus the entire world
        rebuilding.

        Reviewed by Dan Bernstein.

        * Scripts/webkitdirs.pm:
        (determineBaseProductDir):

2012-06-27  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r121363, r121367, r121384, and
        r121390.
        http://trac.webkit.org/changeset/121363
        http://trac.webkit.org/changeset/121367
        http://trac.webkit.org/changeset/121384
        http://trac.webkit.org/changeset/121390
        https://bugs.webkit.org/show_bug.cgi?id=90134

        It broke debug NRWT on GTK and on Qt (Requested by Ossy_NIGHT
        on #webkit).

        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort):
        (ChromiumPort.__init__):
        (ChromiumPort._check_file_exists):
        (ChromiumPort.default_results_directory):
        (ChromiumPort._driver_class):
        (ChromiumPort._build_path):
        (ChromiumPort._path_to_image_diff):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort.baseline_search_path):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort.baseline_search_path):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort.baseline_search_path):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort.__init__):
        (WebKitPort._webcore_symbols_string):
        (WebKitPort._skipped_tests_for_unsupported_features):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (TestWebKitPort._webcore_symbols_string):
        (WebKitPortUnitTests.test_default_options):

2012-06-27  Dirk Pranke  <dpranke@chromium.org>

        Fix typo in r121384 :(

        Unreviewed, build fix.

        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort.default_test_timeout_ms):

2012-06-27  Dirk Pranke  <dpranke@chromium.org>

        nrwt: default timeout for debug bots broke in r121363
        https://bugs.webkit.org/show_bug.cgi?id=90112

        Unreviewed, build fix.

        I forgot to account for release and debug having different
        default values :(.

        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort.default_test_timeout_ms):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort):
        (WebKitPort.default_test_timeout_ms):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (WebKitPortUnitTests.test_default_options):

2012-06-27  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: fix a couple of issues running under cygwin
        https://bugs.webkit.org/show_bug.cgi?id=90035

        Reviewed by Eric Seidel.

        These were causing unit tests to fail on cygwin (apple win bot).

        * Scripts/webkitpy/layout_tests/port/chromium.py:
        * Scripts/webkitpy/performance_tests/perftest.py:

2012-06-27  Adam Barth  <abarth@webkit.org>

        [Chromium] DumpRenderTree on Android should call SkUseTestFontConfigFile once available
        https://bugs.webkit.org/show_bug.cgi?id=89801

        Reviewed by Nate Chapin.

        Let's call SkUseTestFontConfigFile now that it exists.

        * DumpRenderTree/chromium/TestShellAndroid.cpp:
        (platformInit):

2012-06-27  Dirk Pranke  <dpranke@chromium.org>

        Fix typo introduced in r121363.

        Unreviewed, build fix.

        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort._symbols_string):

2012-06-27  Mark Hahnenberg  <mhahnenberg@apple.com>

        Moving from committers to reviewers :-)

        Rubber stamped by Filip Pizlo.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-27  Dirk Pranke  <dpranke@chromium.org>

        Derive ChromiumPort from WebKitPort to add support for missing symbols to skip tests
        https://bugs.webkit.org/show_bug.cgi?id=89706

        Reviewed by Adam Barth.

        Based on the original patch by Raymond Toy.

        This patch changes ChromiumPort to derive from webkit.WebKitPort
        instead of base.Port. This is a long-awaited change and a
        precursor to merging base.Port and webkit.WebKitPort, but is
        driven by the desire to dynamically detect whether the MP3 and
        AAC codecs are compiled into DRT on Chromium, for which we
        wanted to re-use the existing logic in WebKit port for determine
        what to skip at compile time.

        Most of the changes are shuffling things around so that we don't
        change any other logic and so we override the necessary methods
        in WebKitPort (and try to follow the same method definition
        order where possible).

        Also, on the Chromium port the mp3 and aac codecs are actually
        defined in a separate library, so scanning webcore isn't
        sufficient. This patch generalizes the symbol lookup to handle
        multiple libraries, and uses different libraries as appropriate
        for Chromium.

        The only functional/visible changes should be in the value
        returned for skipped_layout_tests().

        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort):
        (ChromiumPort.__init__):
        (ChromiumPort.driver_name):
        (ChromiumPort._driver_class):
        (ChromiumPort._missing_symbol_to_skipped_tests):
        (ChromiumPort.skipped_layout_tests):
        (ChromiumPort.setup_test_run):
        (ChromiumPort._path_to_image_diff):
        (ChromiumPort._convert_path):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest.test_missing_symbol_to_skipped_tests):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort._modules_to_search_for_symbols):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumLinuxPort._modules_to_search_for_symbols):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumLinuxPort._modules_to_search_for_symbols):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort):
        (WebKitPort.__init__):
        (WebKitPort._symbols_string):
        (WebKitPort._modules_to_search_for_symbols):

2012-06-27  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] REGRESSION(r121339): It broke the build on the Qt Windows bots
        https://bugs.webkit.org/show_bug.cgi?id=90081

        Buildfix for Qt 4.8 Windows. Use the former path for Qt 4.8, and the newer one for Qt 5.

        Reviewed by Noam Rosenthal.

        * qmake/mkspecs/features/features.prf:

2012-06-27  Sergio Villar Senin  <svillar@igalia.com>

        [WK2] [GTK] WebKit2 testing bot fails to run tests due to missing files
        https://bugs.webkit.org/show_bug.cgi?id=90061

        Reviewed by Gustavo Noronha Silva.

        Add "-no-install -no-fast-install" to the LDFLAGS in bots. With
        this flag libtool tells the linker to set the rpath for the output
        file to the full path of the .libs directory, instead of using a
        wrapper script to set up the LD_LIBRARY_PATH. This will allow us
        to directly reuse builds in the pure testing bots.

        * BuildSlaveSupport/gtk/daemontools-buildbot.conf:

2012-06-27  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] No need to save and restore TEMPLATE in a function

        This was a leftover from when the logic was not in its own function scope.

        QMAKE_FRAMEWORK_BUNDLE_NAME on the other hand is exported in qtLibraryTarget, which
        will surprisingly affect the global scope as well, so we have to save and restore it.

        Original patch by Oswald Buddenhagen <oswald.buddenhagen@nokia.com> on 2012-06-27

        Reviewed by Tor Arne Vestbø.

        * qmake/mkspecs/features/functions.prf:

2012-06-27  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Fix lookup location for sqlite sources

        Don't look in the install dir - we are unlikely to find anything there
        unless we are doing a developer build.

        Reviewed by Tor Arne Vestbø.

        * qmake/mkspecs/features/features.prf:

2012-06-27  Zan Dobersek  <zandobersek@gmail.com>

        [Gtk] Add support for the Gamepad API
        https://bugs.webkit.org/show_bug.cgi?id=87503

        Reviewed by Carlos Garcia Campos.

        Enable the gamepad support for the GTK port.

        * Scripts/webkitperl/FeatureList.pm:

2012-06-27  Ryosuke Niwa  <rniwa@webkit.org>

        Fix gcc build after r121302
        https://bugs.webkit.org/show_bug.cgi?id=90055

        Reviewed by Mark Rowe.

        Assume RTTI is always disabled so that gtest builds on XCode 3.2.6.

        It appears that gcc doesn't like window.get().* inside a template so replace that by [window.get() *] instead.

        * TestWebKitAPI/Configurations/Base.xcconfig:
        * TestWebKitAPI/Tests/mac/AcceptsFirstMouse.mm:
        (TestWebKitAPI::AcceptsFirstMouse::runTest):

2012-06-27  Csaba Osztrogonác  <ossy@webkit.org>

        Add master.cfg unittest to help migration - pass BuildStep instances instead of BuildStep subclasses
        https://bugs.webkit.org/show_bug.cgi?id=89564

        Reviewed by Tony Chang.

        * BuildSlaveSupport/build.webkit.org-config/mastercfg_unittest.py:
        (BuildStepsConstructorTest):
        (BuildStepsConstructorTest.generateTests):
        (BuildStepsConstructorTest.createTest):
        (BuildStepsConstructorTest.createTest.doTest):

2012-06-26  Mark Hahnenberg  <mhahnenberg@apple.com>

        Add support for preciseTime() to WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=90027

        Reviewed by Darin Adler.

        It would be nice to be able to use preciseTime() in WebKitTestRunner like we can in DumpRenderTree.

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp: 
        (WTR::LayoutTestController::preciseTime): 
        (WTR):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (LayoutTestController):

2012-06-26  Lucas Forschler  <lforschler@apple.com>

      Teach the Apple port how to build the test tools in build-webkit
      https://bugs.webkit.org/show_bug.cgi?id=89540

      Reviewed by Jon Lee & Simon Fraser.

      * BuildSlaveSupport/build.webkit.org-config/master.cfg:
      (RunWebKitTests.start): pass --no-build since tools should now be in the downloaded archive
      (RunUnitTests.start): ditto
      * Scripts/build-webkit: add tools to the projects build list

2012-06-26  Ojan Vafai  <ojan@chromium.org>

        Only show the platform-appropriate builders for non-layout test failures in garden-o-matic
        https://bugs.webkit.org/show_bug.cgi?id=90025

        Reviewed by Simon Fraser.

        Move the chromium-specific filtering code into config.js and replace it with a method on each platform
        config. Also, let the webkit test step name be webkit_tests (build.chromium.org) or layout-test (build.webkit.org).

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:

2012-06-26  Ojan Vafai  <ojan@chromium.org>

        Fix failing garden-o-matic unittests
        https://bugs.webkit.org/show_bug.cgi?id=90021

        Reviewed by Adam Barth.

        These had all just fallen out of date.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/checkout_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/notifications_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui_unittests.js:

2012-06-26  Ojan Vafai  <ojan@chromium.org>

        Fix platform picker change handler in garden-o-matic
        https://bugs.webkit.org/show_bug.cgi?id=90010

        Reviewed by Simon Fraser.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui.js:
        The old code never worked. This is hard to test because change handlers require
        a user-initiated action and the code is changing the window's location, which would
        navigate the test page.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/styles/onebar.css:
        Fix the CSS so it doesn't cause the tabstrip to be disconnected from the tabs on Linux
        due to the large margin-bottom.

2012-06-26  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        webkitpy: Make webkit-patch patches-to-review useful
        https://bugs.webkit.org/show_bug.cgi?id=89470

        Reviewed by Eric Seidel.

        webkit-patch patches-to-review will now output the list of
        bugs with patches pending for review that has the user on CC,
        excluding patches with cq-, sorted by the age of the patch.

        * Scripts/webkitpy/common/net/bugzilla/bugzilla.py:
        (BugzillaQueries.fetch_bugs_from_review_queue):
        * Scripts/webkitpy/common/net/bugzilla/bugzilla_mock.py:
        (MockBugzillaQueries.fetch_bugs_from_review_queue):
        (MockBugzilla.__init__):
        (MockBugzilla.authenticate):
        * Scripts/webkitpy/tool/commands/queries.py:
        (PatchesToReview):
        (PatchesToReview.__init__):
        (PatchesToReview._print_report):
        (PatchesToReview._generate_report):
        (PatchesToReview.execute):
        * Scripts/webkitpy/tool/commands/queries_unittest.py:
        (QueryCommandsTest.test_patches_to_review):

2012-06-26  Dirk Pranke  <dpranke@chromium.org>

        nrwt: broken for chromium on vista
        https://bugs.webkit.org/show_bug.cgi?id=89988

        Reviewed by Tony Chang.

        r121194 removed support for 'chromium-win-vista' as a separate
        port, but this actually prevented the code from running on vista
        at all, which is unduly harsh and broke the websocket tests on
        the (non-webkit) chromium bots that are still running on vista.

        It's probably good enough to pretend that vista is win7 instead;
        some layout tests will still fail but at least things'll run.

        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort.determine_full_port_name):
        * Scripts/webkitpy/layout_tests/port/chromium_win_unittest.py:
        (ChromiumWinTest.test_versions):

2012-06-26  Csaba Osztrogonác  <ossy@webkit.org>

        master.cfg cleanup: Pass CheckOutSource instance instead of class to BuildStep.addStep
        https://bugs.webkit.org/show_bug.cgi?id=89215

        We need it because it is deprecated and will be dropped in buildbot 0.8.7

        Reviewed by Tony Chang.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (CheckOutSource.__init__):
        (Factory.__init__):

2012-06-26  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt][Win] Symbols are not exported in QtWebKit5.dll
        https://bugs.webkit.org/show_bug.cgi?id=88873

        Reviewed by Tor Arne Vestbø.

        When linking the target dll make sure to re-export the symbols from
        the static libraries marked as export, with the help of a little python
        script and a qmake extra compiler.

        * Scripts/generate-win32-export-forwards: Added.
        * qmake/mkspecs/features/win32/default_post.prf:

2012-06-25  Jocelyn Turcotte  <turcotte.j@gmail.com>

        Add a note about hostname completion not working well with --cc completion

        Reviewed by Simon Hausmann.

        Hostname completion tries to resolve anything after an @ sign which is present
        in the completed list of contributor emails to CC.

        * Scripts/webkit-tools-completion.sh:

2012-06-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r121244.
        http://trac.webkit.org/changeset/121244
        https://bugs.webkit.org/show_bug.cgi?id=89966

        skip list path is incorrect now. (Requested by Ossy on
        #webkit).

        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort.baseline_search_path):
        (QtPort._skipped_file_search_paths):
        * Scripts/webkitpy/layout_tests/port/qt_unittest.py:
        (QtPortTest.test_baseline_search_path):

2012-06-26  János Badics  <jbadics@inf.u-szeged.hu>

        [Qt][NRWT] Fix baseline and skipped file search path.
        https://bugs.webkit.org/show_bug.cgi?id=89882

        Reviewed by Csaba Osztrogonác.

        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort.baseline_search_path):
        * Scripts/webkitpy/layout_tests/port/qt_unittest.py:
        (QtPortTest.test_baseline_search_path):

2012-06-26  Tony Chang  <tony@chromium.org>

        [Qt] Enable grid layout LayoutTests
        https://bugs.webkit.org/show_bug.cgi?id=89909

        Reviewed by Csaba Osztrogonác.

        These tests pass, we just need to hook up the overridePreference.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::resetSettings): Reset grid layout and regions between tests.
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::overridePreference): Add WebKitCSSGridLayoutEnabled.

2012-06-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r121236.
        http://trac.webkit.org/changeset/121236
        https://bugs.webkit.org/show_bug.cgi?id=89956

        It's broke the nrwt on qt and gtk platform (Requested by
        kkristof on #webkit).

        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort._build_driver):
        * Scripts/webkitpy/layout_tests/port/xvfbdriver.py:
        (XvfbDriver._start):
        (XvfbDriver._start.x_filter):
        (XvfbDriver.stop):

2012-06-26  Kristóf Kosztyó  <kkristof@inf.u-szeged.hu>

        [NRWT] XvfbDriver should choose the next free display
        https://bugs.webkit.org/show_bug.cgi?id=88414

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort._driver_class):
        * Scripts/webkitpy/layout_tests/port/xvfbdriver.py:
        (XvfbDriver.__init__):
        (XvfbDriver._start):
        (XvfbDriver._start.next_free_id):
        (XvfbDriver.stop):

2012-06-25  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Make it possible to build WebKit without QtWidgets
        https://bugs.webkit.org/show_bug.cgi?id=78109

        Reviewed by Tor Arne Vestbø.

        * Tools.pro: Disable various tools that depend on WK1.
        * qmake/mkspecs/features/default_post.prf: Add WK1 as supported static lib in WEBKIT
        * qmake/mkspecs/features/default_pre.prf: Disable WK1 if QtWidgets is not built.
        * qmake/mkspecs/modules/webkit1.prf: Added.

2012-06-25  Dirk Pranke  <dpranke@chromium.org>

        put vista back for chromium (non-webkit) bots ...
        https://bugs.webkit.org/show_bug.cgi?id=89929

        Unreviewed, build fix.

        Turns out we've only gotten rid of vista on the webkit tests so
        far. Put vista back for the other chromium bots ...

        * TestResultServer/static-dashboards/flakiness_dashboard.js:
        (chromiumPlatform):
        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js:
        (test):

2012-06-25  Dirk Pranke  <dpranke@chromium.org>

        update flakiness dashboard after removing chromium-vista bots
        https://bugs.webkit.org/show_bug.cgi?id=89925

        Unreviewed, build fix.

        More changes missed in r121194 :(.

        * TestResultServer/static-dashboards/flakiness_dashboard.js:
        (chromiumPlatform):
        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js:
        (test):

2012-06-25  Dirk Pranke  <dpranke@chromium.org>

        remove support for chromium vista from tools
        https://bugs.webkit.org/show_bug.cgi?id=89915

        Reviewed by Tony Chang.

        This change is all deleting code and updating tests to handle
        the configuration being gone. All tests now pass except for a
        few unittests for the flakiness dashboard which were failing
        before this patch.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/checkout_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/notifications_unittests.js:
        * Scripts/webkitpy/common/checkout/baselineoptimizer_unittest.py:
        (BaselineOptimizerTest.test_complex_shadowing):
        * Scripts/webkitpy/layout_tests/port/builders.py:
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort):
        * Scripts/webkitpy/layout_tests/port/chromium_win_unittest.py:
        (ChromiumWinTest.test_versions):
        (ChromiumWinTest.test_baseline_path):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:
        (BuildCoverageExtrapolatorTest.test_extrapolate):

2012-06-25  Scott Graham  <scottmg@chromium.org>

        [Chromium] add empty impl of WebThemeEngine::getSize() for DRT
        https://bugs.webkit.org/show_bug.cgi?id=89907

        Not reviewed. Fix build in Chromium.

        * DumpRenderTree/chromium/WebThemeEngineDRTWin.cpp:
        (WebThemeEngineDRTWin::getSize):
        * DumpRenderTree/chromium/WebThemeEngineDRTWin.h:
        (WebThemeEngineDRTWin):

2012-06-25  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        [EFL] Implement Network Information API
        https://bugs.webkit.org/show_bug.cgi?id=87067

        Reviewed by Kenneth Rohde Christiansen.

        * efl/jhbuild.modules: Add eeze library dependency.

2012-06-25  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Fix Win32 debug build

        Reviewed by Tor Arne Vestbø.

        Consolidate use_all_in_one_files into mac/unix/win32 default_pre.prf.

        * qmake/mkspecs/features/unix/default_pre.prf:
        * qmake/mkspecs/features/win32/default_pre.prf: Added.

2012-06-24  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [Qt] Enable <input type="color"> support by default
        https://bugs.webkit.org/show_bug.cgi?id=89653

        Reviewed by Kenneth Rohde Christiansen.

        This feature is complete for Qt WebKit2. Enabling by default
        will help to mature the implementation.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-06-24  Dan Bernstein  <mitz@apple.com>

        Made debug-{minibrowser,safari,test-runner} work with LLDB.

        Reviewed by Sam Weinig.

        * Scripts/debug-minibrowser: Pass INCLUDE_OPTIONS_FOR_DEBUGGING to
        printHelpAndExitForRunAndDebugWebKitAppIfNeeded().
        * Scripts/debug-safari: Ditto.
        * Scripts/debug-test-runner: Ditto.
        * Scripts/webkitdirs.pm:
        (debugger): Added. Calls determineDebugger() if needed and returns the chosen debugger.
        (determineDebugger): Added. Sets the debugger to "lldb" if the --use-lldb switch is present,
        and to "gdb" otherwise.
        (printHelpAndExitForRunAndDebugWebKitAppIfNeeded): Changed to print help for the
        --target-web-process and --use-lldb switches if passed INCLUDE_OPTIONS_FOR_DEBUGGING.
        (execMacWebKitAppForDebugging): Changed to use the chosen debugger.

2012-06-24  Adam Barth  <abarth@webkit.org>

        [Chromium] Release media resources after each LayoutTest on Android
        https://bugs.webkit.org/show_bug.cgi?id=89720

        Reviewed by Eric Carlson.

        The LayoutTests can hang when run on Android because we sometimes run
        out of media resources. This patch causes us to release our media
        resources after each test in order to avoid running out of this
        resource. In production, there are other mechanisms that manage this
        resource.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::resetTestController):

2012-06-23  Zan Dobersek  <zandobersek@gmail.com>

        [Gtk] REGRESSION(r120918): Causes flaky DND tests
        https://bugs.webkit.org/show_bug.cgi?id=89770

        Reviewed by Martin Robinson.

        Connect to the run-file-chooser signal of the WebKitWebView and
        return TRUE so no file chooser dialog is run. This prevents certain
        test failures.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (webViewRunFileChooser):
        (createWebView):

2012-06-23  Dan Bernstein  <mitz@apple.com>

        debug-{minibrowser,safari,test-runner} fail when gdb is not installed in /usr/bin.

        Reviewed by Sam Weinig.

        * Scripts/webkitdirs.pm:
        (execMacWebKitAppForDebugging): Use xcrun to locate gdb.

2012-06-23  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Skip GTK+ unit test /webkit2/WebKitFindController/hide.

        It fails always when running it in Xvfb.

        * gtk/run-api-tests:
        (TestRunner):

2012-06-23  Wajahat Siddiqui  <mdwajahatali.siddiqui@motorola.com>

        [GTK][WK2]Mis-spelt defaultWindowTitle
        https://bugs.webkit.org/show_bug.cgi?id=89808

        Reviewed by Carlos Garcia Campos.

        * MiniBrowser/gtk/BrowserWindow.c:

2012-06-23  Sergio Villar Senin  <svillar@igalia.com>

        [GTK] Add a new webkit2 tests slave bot
        https://bugs.webkit.org/show_bug.cgi?id=89336

        Reviewed by Csaba Osztrogonác.

        Slave configuration for a new GTK 64 bit release bot that will run
        WebKit2 tests.

        Also BuildAndTest now accepts the "triggers" parametter,
        this means that apart from building and testing it can trigger
        some other build/test sequences in other slaves.

        * BuildSlaveSupport/build.webkit.org-config/config.json:
        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (BuildAndTestFactory.__init__):

2012-06-23  Kwang Yul Seo  <skyul@company100.net>

        Unreviewed. Update my email.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-22  Adam Barth  <abarth@webkit.org>

        [Chromium] DumpRenderTree on Android needs to configure fonts for testing
        https://bugs.webkit.org/show_bug.cgi?id=89721

        Reviewed by Nate Chapin.

        This patch teaches DumpRenderTree to configure Skia to use the fallback
        fonts that the LayoutTests assume. This patch reduces the number result
        differences between chromium-android and chromium-linux.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/chromium/TestShellAndroid.cpp:
        (platformInit):
        * DumpRenderTree/chromium/android_fallback_fonts.xml: Added.
        * DumpRenderTree/chromium/android_main_fonts.xml: Added.
        * Scripts/webkitpy/layout_tests/port/chromium_android.py:

2012-06-22  Alexandru Chiculita  <achicu@adobe.com>

        [CSS Shaders] Re-enable the CSS Shaders compile time flag on Safari Mac
        https://bugs.webkit.org/show_bug.cgi?id=89781

        Reviewed by Dean Jackson.

        Added CSS Shaders as enabled by default on Safari for Mac.

        * Scripts/webkitperl/FeatureList.pm:

2012-06-22  Adam Barth  <abarth@webkit.org>

        Add support for test_expectations_android.txt for overriding test expecations on the chromium-android branch
        https://bugs.webkit.org/show_bug.cgi?id=89791

        Reviewed by Dirk Pranke.

        Downstream, the chromium-android port maintains a test expectations
        file to keep track of which tests pass or fail. That causes them to
        keep a patch in chromium_android.py in their branch.

        This patch teaches chromium_android.py to use test_expectations_android.txt.
        We don't intend to use this file upstream, but having this code patch
        upstream lets us unfork webkitpy.

        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort.expectations_files):

2012-06-22  Dirk Pranke  <dpranke@chromium.org>

        run_webkit_tests.py failed with AttributeError(''NoneType' object has no attribute 'pid'')
        https://bugs.webkit.org/show_bug.cgi?id=89734

        Reviewed by Ryosuke Niwa.

        Fix a crash in ServerProcess if you called .pid() after it
        crashed during a write(). We had a test for this case but the
        test wasn't calling pid(), just has_crashed(). Fixed the problem
        and the test.

        * Scripts/webkitpy/layout_tests/port/server_process.py:
        (ServerProcess.__init__):
        (ServerProcess.pid):
        (ServerProcess._start):
        (ServerProcess.stop):
        * Scripts/webkitpy/layout_tests/port/server_process_unittest.py:
        (FakeServerProcess._start):
        (TestServerProcess.test_broken_pipe):

2012-06-22  Peter Beverloo  <peter@chromium.org>

        [Chromium] Disable c++0x compatibility warnings in JavaScriptCore.gyp when building for Android
        https://bugs.webkit.org/show_bug.cgi?id=88853

        Reviewed by Steve Block.

        The Android exclusions were necessary to fix a gyp generation error, as
        the gcc_version variable wasn't being defined for Android. Remove these
        exceptions when Chromium is able to define the gcc_version variable.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-06-22  Mario Sanchez Prada  <msanchez@igalia.com>

        Unreviewed gardening. Unskipping test passing after fixing bug 88419.

        * gtk/run-api-tests:
        (TestRunner): Unskip WTF.HashMap.

2012-06-22  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Allow DumpRenderTree to dump about:blank
        https://bugs.webkit.org/show_bug.cgi?id=89685

        Reviewed by Ryosuke Niwa.

        We need to allow DumpRenderTree to dump about:blank page, then it will be consistent with other ports,
        additionaly this behavior is required for running WTR performance tests.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::processLine):

2012-06-21  Adam Barth  <abarth@webkit.org>

        [Chromium] Reset mediaPlaybackRequiresUserGesture WebSettings after each test
        https://bugs.webkit.org/show_bug.cgi?id=89718

        Reviewed by Kent Tamura.

        We should reset this WebSetting to its default value so that it behaves
        consistently across tests.

        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset):
        (WebPreferences::applyTo):
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):

2012-06-21  Zoltan Horvath  <zoltan@webkit.org>

        DRT/WTR python interface handles about:blank incorrectly
        https://bugs.webkit.org/show_bug.cgi?id=89563

        Reviewed by Dirk Pranke.

        Currently DRT/WTR python interface's _command_from_driver_input function
        puts the test directory path before about:blank. Remove this incorrect behavior.

        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitDriver._command_from_driver_input):

2012-06-21  Dirk Pranke  <dpranke@chromium.org>

        reenable perf tests on win
        https://bugs.webkit.org/show_bug.cgi?id=89690

        Reviewed by Ryosuke Niwa.

        Only the replay tests don't work, and those are disabled by
        default. This change also fixes the undefined _log reference
        that was causing a crash.

        * Scripts/run-perf-tests:

2012-06-21  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120937.
        http://trac.webkit.org/changeset/120937
        https://bugs.webkit.org/show_bug.cgi?id=89679

        This patch brought buildbot master down (Requested by svillar
        on #webkit).

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-06-21  Martin Robinson  <mrobinson@igalia.com>

        [GTK] Combine WebKit API tests into fewer binaries
        https://bugs.webkit.org/show_bug.cgi?id=88458

        Reviewed by Carlos Garcia Campos.

        Instead of creating one binary per-test file, create binaries for each
        category of tests. Right now this includes WTF and the WebKit2 C API,
        but later tests can be added for the GTK+ platform layer and the WebKit1
        and WebKit2 API layers.

        * TestWebKitAPI/GNUmakefile.am: Compile only two test binaries, one for the WebKit2
          C API and one for WTF. Refresh the source list to ensure that new test are active.
        * gtk/run-api-tests: Change the way that tests are skipped by splitting out the
        concept of skipping a test and skipping a suite (program) of tests. Test cases are
        skipped because of legitimate failures, but entire programs are skipped because of
        problems in the harness. As of right now a test program is only skipped if the
        accessibility bus cannot be started.
        (SkippedTest.__init__): Make the test case a required argument and have one skipped
        test case per SkippedTest instance.
        (SkippedTest.__str__): Ditto.
        (TestRunner): Update the directory list. We only have two gtest binaries now and they are
        in one directory. Reformat the test list to make it slightly easier to read.
        (TestRunner.__init__): Add the _skipped_test_program member, which handles entire
        test programs that are skipped.
        (TestRunner._setup_testing_environment): Use the new member.
        (TestRunner._test_cases_to_skip): Collect all skipped test cases now instead of just
        the first SkippedTest that matches.
        (TestRunner._should_run_test_program): Take a look at the new member to make this
        decision.
        (TestRunner._run_test_command): Use the name test_program instead of test
        to disambiguate between test cases and test suites.
        (TestRunner._run_test_glib): ditto.
        (TestRunner._run_test_google): Ditto.
        (TestRunner._run_test): Ditto.
        (TestRunner.run_tests): Ditto.

2012-06-21  Yong Li  <yoli@rim.com>

        Unreviewed. Moving myself from committer to reviewer.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-21  Sergio Villar Senin  <svillar@igalia.com>

        [GTK] Add a new webkit2 tests slave bot
        https://bugs.webkit.org/show_bug.cgi?id=89336

        Reviewed by Philippe Normand.

        Slave configuration for a new GTK bot that will run WebKit2 tests.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-06-21  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [Qt] Add a custom Color Chooser widget to MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=87988

        Reviewed by Alexis Menard.

        Added custom color chooser example for the MiniBrowser.

        * MiniBrowser/qt/MiniBrowser.qrc:
        * MiniBrowser/qt/qml/BrowserWindow.qml:
        * MiniBrowser/qt/qml/ColorChooser.qml: Added.

2012-06-21  Vivek Galatage  <vivekgalatage@gmail.com>

        Remove the warning "File not found" in MiniBrowser post-build event
        https://bugs.webkit.org/show_bug.cgi?id=89601

        Reviewed by Adam Roben.

        * MiniBrowser/MiniBrowserPostBuild.cmd:

2012-06-21  Balazs Kelemen  <kbalazs@webkit.org>

        [Qt] DRT in standalone mode hangs after the first test
        https://bugs.webkit.org/show_bug.cgi?id=89613

        Reviewed by Csaba Osztrogonác.

        Break an inline signal slot chain that ends up in setting
        LayoutTestController::m_hasDumped too early. In LayoutTestController::maybeDump()
        we emit done() which starts the chain that finishes in DumpRenderTree::open().
        The next line in maybeDump sets m_hasDumped to true. We could simply reorder
        these two lines but it seems to be wrong in general to start the next load
        from this call chain. The server mode (when DRT is runned by the test harness)
        also uses a queued connection to read the next test from stdin.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::processArgsLine):

2012-06-20  Hans Wennborg  <hans@chromium.org>

        Speech JavaScript API: SpeechRecognition should hook up with ActiveDOMObject more
        https://bugs.webkit.org/show_bug.cgi?id=89217

        Reviewed by Adam Barth.

        Add a method for checking whether the mock speech
        recognition was aborted.

        Also redo the way the mock posts tasks. Instead of posting them all at once,
        maintain an internal queue of task objects, and call postTask() for them
        once at the time. This means that for example when the page is navigated
        away and abort() is called, that call doesn't end up after a bunch
        of previously posted events on the event loop.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::wasMockSpeechRecognitionAborted):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.cpp:
        (WebKit::ClientCallTask::ClientCallTask):
        (WebKit::ResultTask::ResultTask):
        (WebKit::NoMatchTask::NoMatchTask):
        (WebKit::ErrorTask::ErrorTask):
        (MockWebSpeechRecognizer::start):
        (MockWebSpeechRecognizer::abort):
        (MockWebSpeechRecognizer::setError):
        (MockWebSpeechRecognizer::MockWebSpeechRecognizer):
        (MockWebSpeechRecognizer::startTaskQueue):
        (MockWebSpeechRecognizer::StepTask::runIfValid):
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.h:
        (MockWebSpeechRecognizer::hasBeenAborted):
        (MockWebSpeechRecognizer):
        (MockWebSpeechRecognizer::taskList):
        (Task):
        (MockWebSpeechRecognizer::Task::Task):
        (MockWebSpeechRecognizer::Task::~Task):
        (StepTask):
        (MockWebSpeechRecognizer::StepTask::StepTask):

2012-06-21  Mario Sanchez Prada  <msanchez@igalia.com>

        [GTK] Add support for window.showModalDialog in WebKit2GTK+
        https://bugs.webkit.org/show_bug.cgi?id=79500

        Reviewed by Carlos Garcia Campos.

        Add support for modal dialogs in GTK's MiniBrowser.

        * MiniBrowser/gtk/BrowserWindow.c:
        (webViewRunAsModal):
        (webViewCreate):
        (webViewDecidePolicy):
        (browser_window_new):
        * MiniBrowser/gtk/BrowserWindow.h:
        * MiniBrowser/gtk/main.c:
        (createBrowserWindow):

2012-06-20  Brent Fulgham  <bfulgham@webkit.org>

        [WinCairo] Unreviewed build fix.
        The wrapper script that launched new- and old-run-webkit-tests
        was discarding the --wincairo argument needed to get the proper
        test infrastructure to build under WinCairo.

        * Scripts/run-webkit-tests: Emulate the Qt, Wx, Chromium, etc.,
        behavior to chain the --wincairo flag through to the new build
        and test scripts.

2012-06-20  Mark Rowe  <mrowe@apple.com>

        <http://webkit.org/b/89606> Teach run-safari and debug-safari to work with a Safari.app that has entitlements

        Reviewed by Dan Bernstein.

        * Scripts/webkitdirs.pm:
        (executableHasEntitlements):
        (safariPathFromSafariBundle):

2012-06-20  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120821.
        http://trac.webkit.org/changeset/120821
        https://bugs.webkit.org/show_bug.cgi?id=89605

        It made duplicated reviewer entries (Requested by Ossy on
        #webkit).

        * Scripts/webkitpy/common/checkout/changelog.py:
        (ChangeLog.set_reviewer):
        * Scripts/webkitpy/common/checkout/changelog_unittest.py:
        (test_set_reviewer):
        (test_set_short_description_and_bug_url):

2012-06-20  Dirk Pranke  <dpranke@chromium.org>

        nrwt outputs empty files for wdiff output if wdiff is not installed
        https://bugs.webkit.org/show_bug.cgi?id=88709

        Reviewed by Tony Chang.

        Reviewed by Tony Chang.

        Don't write -wdiff or -pretty.html files if wdiff or prettypatch
        aren't available, and clean up the handling for them in the port
        code.

        * Scripts/webkitpy/run_webkit_tests_integrationtest.py:
        (MainTest.test_output_diffs):
        * Scripts/webkitpy/layout_tests/controllers/test_result_writer.py:
        (TestResultWriter.create_text_diff_and_write_result):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.check_pretty_patch):
        (Port.check_wdiff):
        (Port._wdiff_missing_message):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort.check_build):
        (ChromiumLinuxPort._wdiff_missing_message):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort.check_build):
        (ChromiumMacPort):
        (ChromiumMacPort._wdiff_missing_message):
        * Scripts/webkitpy/layout_tests/port/chromium_mac_unittest.py:
        (ChromiumMacPortTest):

2012-06-20  Dirk Pranke  <dpranke@chromium.org>

        nrwt: fix unit tests for ensuring svn revision is correct
        https://bugs.webkit.org/show_bug.cgi?id=89498

        Reviewed by Eric Seidel.

        Reviewed by Eric Seidel.

        Fix the unit tests for testing that we are embedding the SVN
        revision in the results json for NRWT properly; this was broken
        in r120646 but because the MockHost worked differently than the
        real one (by always initializing the MockSCM object) we didn't
        notice. Unfortunately, just changing the default breaks all
        sorts of unit tests ...

        * Scripts/webkitpy/common/host_mock.py:
        (MockHost.__init__):
        (MockHost._initialize_scm):
        * Scripts/webkitpy/layout_tests/controllers/manager_unittest.py:
        (ResultSummaryTest.test_no_svn_revision):
        (ResultSummaryTest.test_svn_revision):

2012-06-20  Dirk Pranke  <dpranke@chromium.org>

        new-run-webkit-tests appends "/Debug" or "/Release" to $WEBKITOUTPUTDIR
        https://bugs.webkit.org/show_bug.cgi?id=69360

        Reviewed by Eric Seidel.

        Reviewed by Eric Seidel.

        Propagate the 'port_implementation' part of the platform (i.e.,
        gtk,qt,chromium) to webkit-build-directory so that we can pick
        up the gtk-specific handling of WEBKITOUTPUTDIR ...

        I didn't write any additional tests for this; testing it
        properly is an integration test between the python code and the
        perl code, which I verified by hand.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.__init__):
        * Scripts/webkitpy/layout_tests/port/config.py:
        (Config.__init__):
        (Config.build_directory):
        * Scripts/webkitpy/layout_tests/port/config_mock.py:
        (MockConfig.__init__):
        * Scripts/webkitpy/layout_tests/port/config_unittest.py:
        (ConfigTest.test_build_directory_passes_port_implementation):

2012-06-20  Dirk Pranke  <dpranke@chromium.org>

        Fix import sorting missed in r120846

        Reviewed by Tony Chang.

        * Scripts/webkitpy/layout_tests/servers/apache_http_server_unittest.py:

2012-06-20  Dirk Pranke  <dpranke@chromium.org>

        Fix chromium win http servers after breakage introduced in r120846.

        Unreviewed, build fix.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.to.start_http_server):
        * Scripts/webkitpy/layout_tests/servers/http_server.py:
        (Lighttpd.__init__):

2012-06-20  Dirk Pranke  <dpranke@chromium.org>

        tweak output of webkit-patch print-{baselines,expectations}
        https://bugs.webkit.org/show_bug.cgi?id=89588

        Reviewed by Tony Chang.

        Minor tweaks to the output to make it more readable, including
        turning off csv by default for print-baselines with multiple ports.

        * Scripts/webkitpy/layout_tests/port/test.py:
        (TestPort):
        * Scripts/webkitpy/tool/commands/queries.py:
        (PrintExpectations.execute):
        (PrintBaselines.execute):
        * Scripts/webkitpy/tool/commands/queries_unittest.py:
        (PrintExpectationsTest.run_test):
        (PrintExpectationsTest.test_multiple):
        (PrintBaselinesTest.setUp):
        (PrintBaselinesTest.test_multiple):

2012-06-18  Dirk Pranke  <dpranke@chromium.org>

        new-run-webkit-tests should spin-up enough httpd processes to avoid timeouts
        https://bugs.webkit.org/show_bug.cgi?id=88134

        Reviewed by Tony Chang.

        Change NRWT to spin up 2*min(child_processes, locked_shards)
        http servers by default so that we are less likely to get a
        bunch of http timeouts at the beginning of a test run.

        Note that I had to tweak executive_mock to support mocked stderr
        because the apache_http_server code reads stderr when starting a
        process to ensure it started okay.

        * Scripts/webkitpy/common/system/executive_mock.py:
        (MockProcess.__init__):
        * Scripts/webkitpy/common/system/outputcapture.py:
        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager._run_tests):
        (Manager.start_servers_with_lock):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.to.start_http_server):
        * Scripts/webkitpy/layout_tests/port/test.py:
        (TestPort.start_http_server):
        (TestPort._path_to_apache):
        (TestPort):
        (TestPort._path_to_apache_config_file):
        * Scripts/webkitpy/layout_tests/servers/apache_http_server.py:
        (LayoutTestApacheHttpd.__init__):
        * Scripts/webkitpy/layout_tests/servers/apache_http_server_unittest.py: Added
        (LayoutTestApacheHttpd.__init__):
        * Scripts/webkitpy/layout_tests/servers/http_server.py:
        (Lighttpd.__init__):
        * Scripts/webkitpy/layout_tests/servers/http_server_base.py:
        (HttpServerBase.__init__):

2012-06-20  Tom Zakrajsek  <tomz@codeaurora.org>

        Unreviewed: Back out accidentally checked in debug print which broke a test

        * Scripts/webkitpy/performance_tests/perftest.py:
        (PerfTest.parse_output):

2012-06-20  Tom Zakrajsek  <tomz@codeaurora.org>

        Import themaninblue.com/experiment/AnimationBenchmark/ as performance tests
        https://bugs.webkit.org/show_bug.cgi?id=78789

        Reviewed by Ryosuke Niwa.

        Updated parser to include fps as a valid unit.

        * Scripts/webkitpy/performance_tests/perftest.py:
        (PerfTest):
        (PerfTest.parse_output):

2012-06-20  Balazs Ankes  <bank@inf.u-szeged.hu>

        webkit-patch should add reviewer if "Reviewed by NOBODY ..." is missing
        https://bugs.webkit.org/show_bug.cgi?id=67935

        Reviewed by Ryosuke Niwa.

        * Scripts/webkitpy/common/checkout/changelog.py:
        (ChangeLog.set_reviewer):
        * Scripts/webkitpy/common/checkout/changelog_unittest.py:
        (test_set_reviewer):
        (test_set_short_description_and_bug_url):

2012-06-20  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed trivial permissions fix.

        * qmake/mkspecs/features/features.prf: Don't mark this file as executable.

2012-06-19  Ryuan Choi  <ryuan.choi@samsung.com>

        [EFL][Regression] Build break after r120786
        https://bugs.webkit.org/show_bug.cgi?id=89549

        Unreviewed build fix for Efl port.

        * DumpRenderTree/efl/CMakeLists.txt: Added disassembler in includes.

2012-06-19  Dirk Pranke  <dpranke@chromium.org>

        NRWT spins up and down the WebSocket server when running a single HTTP test from the command line
        https://bugs.webkit.org/show_bug.cgi?id=64489

        Reviewed by Tony Chang.

        This change changes NRWT so that we don't start the websocket
        server if we aren't running websocket tests and don't start the
        HTTP server if we aren't running http tests.
        
        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager._websocket_tests):
        (Manager.start_servers_with_lock):
        (Manager.stop_servers_with_lock):
        * Scripts/webkitpy/layout_tests/controllers/manager_unittest.py:
        (ManagerTest.test_servers_started):

2012-06-19  Dirk Pranke  <dpranke@chromium.org>

        test-webkitpy: add a -p flag to pass through captured output to enable debugging
        https://bugs.webkit.org/show_bug.cgi?id=89158

        Reviewed by Eric Seidel.

        Normally when outputcapture runs it intercepts stdout/stderr,
        which makes running under the debugger difficult and mostly
        pointless (since you can't see any output). This change adds a
        flag to test-webkitpy (-p) that will cause outputcapture to pass
        through the output as well as capture it.

        * Scripts/webkitpy/common/system/outputcapture.py:
        (OutputCapture.stream_wrapper):
        (OutputCapture._capture_output_with_name):
        * Scripts/webkitpy/common/system/outputcapture_unittest.py:
        (OutputCaptureTest.setUp):
        * Scripts/webkitpy/test/main.py:
        (Tester._parse_args):
        (Tester._run_tests):
        (Tester._log_exception):
        (_CaptureAndPassThroughStream):
        (_CaptureAndPassThroughStream.__init__):
        (_CaptureAndPassThroughStream.write):
        (_CaptureAndPassThroughStream._message_is_from_pdb):
        (_CaptureAndPassThroughStream.flush):
        (_CaptureAndPassThroughStream.getvalue):

2012-06-19  Adam Barth  <abarth@webkit.org>

        garden-o-matic fails to rebaseline tests with MISSING results
        https://bugs.webkit.org/show_bug.cgi?id=89521

        Reviewed by Kenneth Russell.

        If the bots report "MISSING", we should try to find PNG and TXT results on the server.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:

2012-06-19  Adam Barth  <abarth@webkit.org>

        svn.delete_list fails to delete empty parent directories
        https://bugs.webkit.org/show_bug.cgi?id=89520

        Reviewed by Dirk Pranke.

        These functions were calling scm.delete and scm.add, which already
        delete the parent directory. We'd get an exception when we tried to
        delete the parent directory again.

        * Scripts/webkitpy/common/checkout/scm/svn.py:
        (SVN._add_parent_directories):
        (SVN._delete_parent_directories):

2012-06-19  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        webkitpy: Simplify fetch_bugs_matching_search()
        https://bugs.webkit.org/show_bug.cgi?id=89497

        Reviewed by Adam Barth.

        Removed parameter with default value. It's not being used
        and the handling of the parameter was wrong. Saves a check.

        * Scripts/webkitpy/common/net/bugzilla/bugzilla.py:
        (BugzillaQueries.fetch_bugs_matching_search):
        * Scripts/webkitpy/common/net/bugzilla/bugzilla_mock.py:
        (MockBugzillaQueries.fetch_bugs_matching_search):

2012-06-19  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: remove unneeded imports in layout_tests/port/chromium.py
        https://bugs.webkit.org/show_bug.cgi?id=89522

        Reviewed by Eric Seidel.

        They were no longer being used. No tests necessary.

        * Scripts/webkitpy/layout_tests/port/chromium.py:

2012-06-19  Adam Barth  <abarth@webkit.org>

        Missing results aren't shown in garden-o-matic

        Reviewed by Kenneth Russell.

        Previously we didn't know to look for text and image results when the
        bot told us that results were missing.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:

2012-06-19  Dirk Pranke  <dpranke@chromium.org>

        Fix regression introduced in r120646 where the svn revision isn't saved in results.json

        Unreviewed, build fix.

        It turns out that we store the svn revision two different ways
        in the JSON, and I only caught one of them :(. This should fix
        the other.

        Also, this part of the code is poorly tested. I will investigate
        adding at least a basic test for this in a separate fix.

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (summarize_results):

2012-06-19  Dirk Pranke  <dpranke@chromium.org>

        REGRESSION (NRWT): Results for new non-text-only tests are always put in the most-specific platform directory
        https://bugs.webkit.org/show_bug.cgi?id=78127

        Reviewed by Ryosuke Niwa.

        Add the --add-platform-exceptions flag from ORWT, and ensure
        that --new-baseline is equivalent to --reset-results
        --add-platform-exceptions. Also fix the default logic for where to
        put PNGs and render tree dumps if --new-test-results is true:
        if --add-platform-exceptions is False, baselines should go in
        the least-specific platform directory (e.g., platform/mac)
        rather than the most-specific (platform/mac-snowleopard).

        * Scripts/webkitpy/layout_tests/controllers/single_test_runner.py:
        (SingleTestRunner):
        (SingleTestRunner.run):
        (SingleTestRunner._run_rebaseline):
        (SingleTestRunner._add_missing_baselines):
        (SingleTestRunner._location_for_new_baseline):
        (SingleTestRunner._overwrite_baselines):
        (SingleTestRunner._save_baseline_data):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.baseline_path):
        (Port):
        (Port.baseline_platform_dir):
        (Port.baseline_version_dir):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (_set_up_derived_options):
        (parse_args):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (RebaselineTest.assertBaselines):
        (RebaselineTest.test_reset_results):
        (RebaselineTest.test_missing_results):
        (RebaselineTest.test_new_baseline):

2012-06-19  Dirk Pranke  <dpranke@chromium.org>

        NRWT should not take memory used as disk cache into account when deciding how many processes to launch
        https://bugs.webkit.org/show_bug.cgi?id=81379

        Reviewed by Eric Seidel.

        The 'free memory' calculation we were running on the mac seemed
        to underestimate how many children we can run in parallel, and
        it was complex. This patch replaces that calculation with a
        simpler one that reserves 2GB for overhead and assumes 256MB per
        DRT/WTR, so if we had 4GB of RAM we can run up to 8 DRTs.

        Also, there was a bug where we were truncating the memory
        installed on the machine to 4GB by casting to an int instead of
        a long; this was probably the source of some of the earlier
        problems when using total memory.

        This patch also removes the no-longer-needed restrictions on the
        number of workers on beefy Lion boxes for both Apple Mac and Chromium
        Mac; we should now use all of the cores by default.

        The memory calculations have only been implemented on the mac;
        having the calculation in base.default_child_processes() was IMO
        misleading, and so this patch also moves the computation into
        the MacPort. I have not heard of the # of workers being an issue
        on any other ports, so this should be fine.

        * Scripts/webkitpy/common/system/platforminfo.py:
        (PlatformInfo.total_bytes_memory):
        * Scripts/webkitpy/common/system/platforminfo_mock.py:
        (PlatformInfo.total_bytes_memory):
        (PlatformInfo.total_bytes_memory):
        (PlatformInfo._win_version_tuple_from_cmd):
        * Scripts/webkitpy/common/system/platforminfo_unittest.py:
        (TestPlatformInfo.test_total_bytes_memory):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.default_child_processes):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_default_child_processes):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort.operating_system):
        * Scripts/webkitpy/layout_tests/port/mac.py:
        (MacPort.default_child_processes):
        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:
        (TestMacPort.test_default_child_processes):

2012-06-19  Dirk Pranke  <dpranke@chromium.org>

        new-run-webkit-tests reports unexpected pass of pixel tests when pixel testing is disabled
        https://bugs.webkit.org/show_bug.cgi?id=85446

        Reviewed by Simon Fraser.

        Embed whether pixel testing was enabled into the results.json.

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (summarize_results):

2012-06-19  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Modify HTTPS port to 8443 for performance tests
        https://bugs.webkit.org/show_bug.cgi?id=89442

        Reviewed by Ryosuke Niwa.

        We should be consistent with the default HTTPS port and with the changelog of r119188.

        * Scripts/webkitpy/performance_tests/perftest.py:
        (ReplayServer.__init__):

2012-06-19  Mike West  <mkwst@chromium.org>

        Introduce ENABLE_CSP_NEXT configuration flag.
        https://bugs.webkit.org/show_bug.cgi?id=89300

        Reviewed by Adam Barth.

        The 1.0 draft of the Content Security Policy spec is just about to
        move to Last Call. We'll hide work on the upcoming 1.1 spec behind
        this ENABLE flag, disabled by default.

        Spec: https://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-06-19  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL's LayoutTestController does not support setTextDirection
        https://bugs.webkit.org/show_bug.cgi?id=87481

        Reviewed by Hajime Morita.

        Implement setTextDirection in EFL's LayoutTestController and
        properly reset its value between test cases to avoid flakiness.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::setTextDirection):

2012-06-19  Kristóf Kosztyó  <kkristof@inf.u-szeged.hu>

        [Qt] Temporarily disable xvfb driver in nrwt
        https://bugs.webkit.org/show_bug.cgi?id=88414

        Reviewed by Csaba Osztrogonác.

        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort._build_driver):

2012-06-18  Joone Hur  <joone.hur@intel.com>

        [EFL] Fontconfig can't be linked properly
        https://bugs.webkit.org/show_bug.cgi?id=89418

        Unreviewed build fix.

        Make Fontconfig be linked correctly.

        * MiniBrowser/efl/CMakeLists.txt: add FONTCONFIG_LIBRARIES to MiniBrowser_LIBRARIES.

2012-06-18  Joone Hur  <joone.hur@intel.com>

        Unreviewed. Updating email for committers.py script.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-18  Simon Fraser  <simon.fraser@apple.com>

        Fix a typo that caused TestFailures to have a syntax error.
        
        Sadly TestFailures is broken for another reason now too:
        https://bugs.webkit.org/show_bug.cgi?id=89419

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ViewController.js:
        (ViewController.prototype._domForBuildName):

2012-06-18  Simon Fraser  <simon.fraser@apple.com>

        Provide bug links for suspicious commits
        https://bugs.webkit.org/show_bug.cgi?id=89408
        
        Reviewed by Adam Barth.

        Add links to bugs for the suspicious commits if we have bug data.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/Bugzilla.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/notifications.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/styles/notifications.css:
        (ol.notifications>li ul.causes>li>div.description>span>span.bugID::before):
        (ol.notifications>li ul.causes>li>div.description>span>span.bugID>a):

2012-06-18  Amy Ousterhout  <aousterh@chromium.org>

        [Chromium] DeviceOrientation Cleanup
        https://bugs.webkit.org/show_bug.cgi?id=89354

        Reviewed by Kent Tamura.

        * DumpRenderTree/chromium/WebViewHost.h: added OVERRIDE specifier for virtual function
        (WebViewHost):

2012-06-18  James Robinson  <jamesr@chromium.org>

        [chromium] Stop passing deprecated 'direct' parameter to webkit_support::CreateGraphicsContext3D
        https://bugs.webkit.org/show_bug.cgi?id=89254

        Reviewed by Adrienne Walker.

        This parameter doesn't mean anything since this codepath is only used for onscreen contexts and is deprecated
        upstream.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::createGraphicsContext3D):

2012-06-18  Simon Fraser  <simon.fraser@apple.com>

        Minor fix suggested by Adam Barth.

        Use $(this._what).empty(); rather than removing children one at a time.
        For some reason removeAllChildren() is undefined on this node.
        
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/notifications.js:

2012-06-18  Simon Fraser  <simon.fraser@apple.com>

        Show TOT revision in garden-o-matic, and make the revisions into links
        https://bugs.webkit.org/show_bug.cgi?id=89396

        Reviewed by Adam Barth.

        The "latest revision" notification now reads "Latest revision processed by every bot: NN (trunk is at NN)"
        where the revisions are links to trac.
        
        To avoid setting innerHTML, I made base.createLinkNode() and used it in a bunch of places, which had
        the knock-on effect of flipping the target and href attributes for anchors in some test output.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ViewController.js:
        (ViewController.prototype._displayTesters.updateList.list):
        (ViewController.prototype._displayTesters.updateList):
        (ViewController.prototype._domForRegressionRange.trac.commitDataForRevisionRange):
        (ViewController.prototype._domForRegressionRange):
        (ViewController.prototype._domForAuxiliaryUIElements):
        (ViewController.prototype._domForBuildName):
        (ViewController.prototype):
        (ViewController.prototype.):
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/base.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/garden-o-matic.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/model.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/notifications.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/notifications_unittests.js:

2012-06-18  Csaba Osztrogonác  <ossy@webkit.org>

        REGRESSION(r100558): NRWT should work without SVN or GIT
        https://bugs.webkit.org/show_bug.cgi?id=76630

        Reviewed by Dirk Pranke.

        NRWT is not supposed to have a requirement that we have an
        actual SVN or Git checkout, and we were unnecessarily
        initializing the checkout. This patch removes that line :).

        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (main):

2012-06-18  Zan Dobersek  <zandobersek@gmail.com>

        [garden-o-matic] Add support for the GTK builders
        https://bugs.webkit.org/show_bug.cgi?id=89360

        Reviewed by Adam Barth.

        Add the 'gtk' platform, essentially a copy of the 'apple' platform since
        both get their data from build.webkit.org.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        (.):

2012-06-18  Nico Weber  <thakis@chromium.org>

        [chromium/mac] Unbreak smooth scrolling.
        https://bugs.webkit.org/show_bug.cgi?id=89327

        Reviewed by Dimitri Glazkov.

        Broken by Sam in r115589 / r115591.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * TestWebKitAPI/mac/InjectedBundleControllerMac.mm:
        (TestWebKitAPI::InjectedBundleController::platformInitialize):
        * WebKitTestRunner/InjectedBundle/mac/InjectedBundleMac.mm:
        (WTR::InjectedBundle::platformInitialize):

2012-06-18  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120541, r120547, and r120548.
        http://trac.webkit.org/changeset/120541
        http://trac.webkit.org/changeset/120547
        http://trac.webkit.org/changeset/120548
        https://bugs.webkit.org/show_bug.cgi?id=89383

        This approach doesn't work for WebKit2 (Requested by abarth on
        #webkit).

        * DumpRenderTree/LayoutTestController.cpp:
        (setBackingScaleFactorCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/blackberry/LayoutTestControllerBlackBerry.cpp:
        (LayoutTestController::setBackingScaleFactor):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::setBackingScaleFactor):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setBackingScaleFactor):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setBackingScaleFactor):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setBackingScaleFactor):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setBackingScaleFactor):
        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::didReceiveMessage):
        (WTR::InjectedBundle::postSetBackingScaleFactor):
        (WTR):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::setBackingScaleFactor):
        (WTR):
        (WTR::LayoutTestController::callSetBackingScaleFactorCallback):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (LayoutTestController):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):

2012-06-18  Zan Dobersek  <zandobersek@gmail.com>

        REGRESSION(r120546): It made 3 webkitpy tests fail
        https://bugs.webkit.org/show_bug.cgi?id=89332

        Reviewed by Adam Barth.

        Update the BaselineOptimizer unittest after r120546.

        * Scripts/webkitpy/common/checkout/baselineoptimizer_unittest.py:
        (BaselineOptimizerTest.test_no_add_mac_future):
        (BaselineOptimizerTest.test_mac_future):
        (BaselineOptimizerTest.test_complex_shadowing):

2012-06-18  Dirk Pranke  <dpranke@chromium.org>

        new-run-webkit-tests output gets confused when logging
        https://bugs.webkit.org/show_bug.cgi?id=63793

        Reviewed by Adam Barth.

        Ship all of the log messages generated in the worker back
        to the manager; this allows the messages to be properly
        serialized to stderr and for the meter to flush its output correctly.

        Note however that this will likely result in messages to be
        logged out of order between workers; I'm not sure that there's
        an easy way to fix this short of buffering a potentially
        unbounded amount of data. It might be better to just log through
        stderr unless we're in 'metering' mode, but it's also worth
        noting that we already get messages out of order through stderr
        on Windows.

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager.handle_done):
        (Manager.handle_finished_test):
        (Manager._log_messages):
        * Scripts/webkitpy/layout_tests/controllers/worker.py:
        (Worker.__init__):
        (Worker._set_up_logging):
        (Worker.run):
        (Worker._run_test):
        (Worker.cleanup):
        (Worker.run_single_test):
        (_WorkerLogHandler):
        (_WorkerLogHandler.__init__):
        (_WorkerLogHandler.emit):
        * Scripts/webkitpy/layout_tests/views/metered_stream.py:
        (MeteredStream.write):
        (MeteredStream.writeln):
        * Scripts/webkitpy/layout_tests/views/printing.py:
        (Printer.writeln):

2012-06-18  Zan Dobersek  <zandobersek@gmail.com>

        [garden-o-matic] Builder names without underscores cause incorrect BuildSelector behavior
        https://bugs.webkit.org/show_bug.cgi?id=89362

        Reviewed by Simon Fraser.

        Replace white spaces, braces and dots in the builder name with underscores. This
        way the JQuery tabs will be properly matched with the according container.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/results.js:

2012-06-18  Dirk Pranke  <dpranke@chromium.org>

        nrwt: metered output doesn't handle ^C cleanly
        https://bugs.webkit.org/show_bug.cgi?id=89249

        Reviewed by Tony Chang.

        If you ctrl-c a running nrwt (w/o --verbose), then all but
        two characters of the last update are erased, and then we print
        "interrupted, exiting" as an update, which itself then gets
        erased. Fix this so that we flush the meter (making the last
        update persistent, so that we print the ^C for a visual clue),
        print the interrupt message, and move on ...

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager._run_tests):
        * Scripts/webkitpy/layout_tests/views/metered_stream.py:
        (MeteredStream.flush):
        * Scripts/webkitpy/layout_tests/views/printing.py:
        (Printer._write):
        (Printer):
        (Printer.flush):

2012-06-18  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Change back "linuxish" to "linux" and include WebFontRendering.cpp on Android
        https://bugs.webkit.org/show_bug.cgi?id=89228

        Reviewed by Tony Chang.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        * DumpRenderTree/chromium/TestShellAndroid.cpp:

2012-06-18  Mario Sanchez Prada  <msanchez@igalia.com>

        [GTK] Get rid of DumpRenderTreeSupportGtk::{in|de}crementAccessibilityValue
        https://bugs.webkit.org/show_bug.cgi?id=89226

        Reviewed by Martin Robinson.

        Implement increment() and decrement() functions in term of the AtkValue interface,
        instead of using DumpRenderTreeSupportGtk helper class.

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::intValue):
        (AccessibilityUIElement::minValue):
        (AccessibilityUIElement::maxValue):
        (alterCurrentValue):
        (AccessibilityUIElement::increment):
        (AccessibilityUIElement::decrement):

2012-06-17  Simon Fraser  <simon.fraser@apple.com>

        garden-o-matic 'Results' panel is broken for the Apple platform
        https://bugs.webkit.org/show_bug.cgi?id=89310

        Reviewed by Adam Barth.
        
        For platforms that don't use accumulated build directories on the server,
        carry along buildLocation data with buildInfo, so that we know where to
        look for the test results files for a given test.
        
        Renamed historicalResultsSummaryURLs to historicalResultsLocations because
        it now returns an array of objects with buildNumber, revision and url info.
        
        Fixed results.fetchResultsURLs() to use this data to find results.
        
        Fixed the results display to not scroll when you click on a test to see the results.
        Made the h3s look less ugly
        
        Don't try to show the flakiness dashboard for the Apple platform.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/checkout.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/results.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/styles/results.css:
        (.results-view .top-panel):
        (.results-view h3):

2012-06-16  Simon Fraser  <simon.fraser@apple.com>

        Make garden-o-matic work for the Apple Mac port
        https://bugs.webkit.org/show_bug.cgi?id=84642

        Reviewed by Adam Barth.
        
        Make garden-o-matic work for the Apple, webkit.org-hosted builders and testers. This involved
        educating the scripts in various ways:
        * Wrap up platform-related differences in config.kPlatforms[]
        * Add a <select> to switch between platforms, and support a url parameter, ?platform=chromium/apple
        * The webkit.org bots don't accumulate test results into a single directory like the chromium.org ones do,
          so add config.haveBuilderAccumulatedResults and logic in fetchResultsByBuilder() to find the most
          recent build with valid results.
        * The webkit.org bots often generate results directories with no layout test data (e.g. when testers
          try to test a build that has already been deleted). Make walkHistory() more robust here.
        * webkit.org uses differently named test result directories, that include the SVN revision as
          well as the build number. That forces us to fetch more build info before we can get the
          result directory URL.
        * chromium.org serves raw directory listings for a builder's results directories. webkit.org serves
          those with Twisted, so rather than scrape directory listings, we use buildbot JSON to find results
          dirs.
        * Various URLs differ between webkit.org and chromium.org
        * Better UI for the failures info, so that some info is visible even when not hovered.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/garden-o-matic.html:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/LayoutTestResultsLoader.js:
        (LayoutTestResultsLoader.prototype.set _fetchAndParseNRWTResults):
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/config.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/model.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/net.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/summary-mock.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/failures.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/notifications_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui/perf.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/ui_unittests.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/styles/notifications.css:
        (ol.notifications>li table.failures):
        (ol.notifications>li:hover table.failures):
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/styles/onebar.css:
        (#onebar #platform-picker):
        * Scripts/webkitpy/layout_tests/port/builders.py:

2012-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120536.
        http://trac.webkit.org/changeset/120536
        https://bugs.webkit.org/show_bug.cgi?id=89296

        Does not compile on chromium-linux (Requested by abarth on
        #webkit).

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setTextSubpixelPositioning):
        * DumpRenderTree/chromium/TestShellAndroid.cpp:

2012-06-16  Adam Barth  <abarth@webkit.org>

        layoutTestController.setBackingScaleFactor is redundant with (and less awesome than) internals.settings.setDeviceScaleFactor
        https://bugs.webkit.org/show_bug.cgi?id=89274

        Reviewed by Levi Weintraub.

        Delete (mostly stub) implementations of layoutTestController.setBackingScaleFactor.
        Note: The WebKit2 API that setBackingScaleFactor exercises is still
        tested by API-level tests.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/blackberry/LayoutTestControllerBlackBerry.cpp:
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::didReceiveMessage):
        (WTR):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (InjectedBundle):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (LayoutTestController):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):

2012-06-16  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Move chromium/public/linuxish/WebFontRendering.h out of linuxish directory
        https://bugs.webkit.org/show_bug.cgi?id=89228

        Reviewed by Tony Chang.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setTextSubpixelPositioning):
        * DumpRenderTree/chromium/TestShellAndroid.cpp:

2012-06-15  Adam Barth  <abarth@webkit.org>

        garden-o-matic's results.js should use RequestTracker
        https://bugs.webkit.org/show_bug.cgi?id=89257

        Reviewed by Dimitri Glazkov.

        We wrote results.js before we recognized the RequestTracker pattern.
        This patch replaces the manual implementations of RequestTracker with
        the real deal.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/results.js:

2012-06-15  Darin Adler  <darin@apple.com>

        * Scripts/webkitpy/bindings: Added property svn:ignore.

2012-06-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120511.
        http://trac.webkit.org/changeset/120511
        https://bugs.webkit.org/show_bug.cgi?id=89255

        Breaks at least Android builder (Requested by wangxianzhu on
        #webkit).

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setTextSubpixelPositioning):

2012-06-15  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Move chromium/public/linuxish/WebFontRendering.h out of linuxish directory
        https://bugs.webkit.org/show_bug.cgi?id=89228

        Reviewed by Tony Chang.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setTextSubpixelPositioning):

2012-06-15  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: remove DummyOptions and clean up the code in Port.get_option() and Port.set_option_default()
        https://bugs.webkit.org/show_bug.cgi?id=89135

        Re-land change in r120370 with fix in
        PortFactory.get_from_builder_name() that changes BuilderOptions
        to an actual optparse.Values object.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.__init__):
        (Port.get_option):
        (Port.set_option_default):
        * Scripts/webkitpy/layout_tests/port/chromium_win_unittest.py:
        (ChromiumWinTest.test_setup_environ_for_server_register_cygwin):
        * Scripts/webkitpy/layout_tests/port/factory.py:
        (_builder_options):
        (PortFactory.get_from_builder_name):
        * Scripts/webkitpy/layout_tests/port/factory_unittest.py:
        (FactoryTest.test_get_from_builder_name):
        * Scripts/webkitpy/style/checkers/test_expectations.py:
        (TestExpectationsChecker._determine_port_from_expectations_path):
        * Scripts/webkitpy/tool/mocktool.py:
        (MockOptions.ensure_value):

2012-06-15  Bill Budge  <bbudge@chromium.org>

        Add bbudge@chromium.org to committers.py

        Unreviewed.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-15  Csaba Osztrogonác  <ossy@webkit.org>

        Unreviewed style fix after r120351.

        * BuildSlaveSupport/build.webkit.org-config/public_html/default.css:
        (body.interface):

2012-06-15  Csaba Osztrogonác  <ossy@webkit.org>

        master.cfg cleanup, remove unnecessary workaround
        https://bugs.webkit.org/show_bug.cgi?id=88994

        Reviewed by Lucas Forschler.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (loadBuilderConfig):

2012-06-15  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline-expectations should only rebaseline the appropriate suffixes for the failure in question
        https://bugs.webkit.org/show_bug.cgi?id=88581

        Reviewed by Adam Barth.

        Make sure we only optimize the suffixes we rebaselined during
        rebaseline-expectations, and not all suffixes for a test.
        While optimizing is somewhere between harmless and good, it's also confusing :)

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineExpectations._rebaseline_port):
        (RebaselineExpectations.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:

2012-06-15  Csaba Osztrogonác  <ossy@webkit.org>

        Update builder.html template for newer buildmaster
        https://bugs.webkit.org/show_bug.cgi?id=89207

        Rebasing builder.html template from v0.8.3 to v0.8.6p1.

        Reviewed by Zoltan Herczeg.

        * BuildSlaveSupport/build.webkit.org-config/templates/builder.html:

2012-06-15  Csaba Osztrogonác  <ossy@webkit.org>

        Add ForceScheduler to build.webkit.org
        https://bugs.webkit.org/show_bug.cgi?id=88982

        Reviewed by Ryosuke Niwa.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (loadBuilderConfig):

2012-06-15  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Add title support to Ewk_View
        https://bugs.webkit.org/show_bug.cgi?id=89095

        Reviewed by Kenneth Rohde Christiansen.

        Update the MiniBrowser so it listens for the "title,change"
        signal on the view and keeps the browser window title
        up-to-date.

        * MiniBrowser/efl/main.c:
        (on_title_changed):
        (browserCreate):

2012-06-15  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2][EFL] Implement navigation back/forward in Ewk_View
        https://bugs.webkit.org/show_bug.cgi?id=89173

        Reviewed by Kenneth Rohde Christiansen.

        Implement navigation back / forward in MiniBrowser. Use
        'F1' to navigate back and 'F2' to navigate forward.

        * MiniBrowser/efl/main.c:
        (on_key_down):

2012-06-15  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL's LayoutTestController does not support titleTextDirection
        https://bugs.webkit.org/show_bug.cgi?id=86475

        Reviewed by Hajime Morita.

        Add titleTextDirection getter and setter to LayoutTestController and
        expose its value to JavaScript.
        Update the titleTextDirection value from EFL's "title,changed"
        callback in DumpRenderTree.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (getTitleTextDirectionCallback):
        (LayoutTestController::staticValues):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::titleTextDirection):
        (LayoutTestController::setTitleTextDirection):
        (LayoutTestController):
        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::onFrameTitleChanged):

2012-06-15  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL][WK2] Implement reload / stop in Ewk_View
        https://bugs.webkit.org/show_bug.cgi?id=89168

        Reviewed by Kenneth Rohde Christiansen.

        Implement view reload / stop loading in MiniBrowser.
        Use 'F5' for reload and 'F6' for stopping the load.

        * MiniBrowser/efl/main.c:
        (on_key_down):
        (browserCreate):

2012-06-15  Hironori Bono  <hbono@chromium.org>

        Allow platforms to choose whether to remove markers on editing
        https://bugs.webkit.org/show_bug.cgi?id=88838

        Reviewed by Hajime Morita.

        This change implements WebViewHost::checkTextOfParagraph so DumpRenderTree can
        run grammar tests.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::checkTextOfParagraph): Implement this function with our mock spell checker and grammar checker.
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost): Override WebSpellCheckClient::checkTextOfParagraph.

2012-06-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120370.
        http://trac.webkit.org/changeset/120370
        https://bugs.webkit.org/show_bug.cgi?id=89183

        Broke webkit-patch rebaseline (Requested by zdobersek on
        #webkit).

        * Scripts/webkitpy/layout_tests/port/base.py:
        (DummyOptions):
        (DummyOptions.__init__):
        (DummyOptions.__init__.this):
        (Port.__init__):
        (Port.get_option):
        (Port.set_option_default):
        * Scripts/webkitpy/layout_tests/port/chromium_win_unittest.py:
        (ChromiumWinTest.RegisterCygwinOption):
        (ChromiumWinTest.RegisterCygwinOption.__init__):
        (ChromiumWinTest.test_setup_environ_for_server_register_cygwin):
        * Scripts/webkitpy/style/checkers/test_expectations.py:
        (TestExpectationsChecker._determine_port_from_expectations_path):
        * Scripts/webkitpy/tool/mocktool.py:
        (MockOptions.update):

2012-06-14  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Initialize font rendering in DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=89133

        Reviewed by Adam Barth.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setTextSubpixelPositioning):
        * DumpRenderTree/chromium/TestShellAndroid.cpp:
        (platformInit):

2012-06-14  Dongwoo Im  <dw.im@samsung.com>

        [EFL] [DRT] Reset the WebAudio setting on DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=88622

        Reviewed by Philippe Normand.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp: Reset the setting of the Web Audio feature as default.
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):

2012-06-14  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Should retry a few times when failed to start DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=89124

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidDriver._start):
        (ChromiumAndroidDriver):
        (ChromiumAndroidDriver._start_once):

2012-06-14  Tony Gentilcore  <tonyg@chromium.org>

        Update webpagereplay to 1.1.2
        https://bugs.webkit.org/show_bug.cgi?id=89118

        This includes the following patch which avoids pkg_resources import errors:
        http://code.google.com/p/web-page-replay/source/detail?r=476

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/thirdparty/__init__.py:
        (AutoinstallImportHook._install_webpagereplay):

2012-06-14  Ryosuke Niwa  <rniwa@webkit.org>

        Get rid of FAIL test expectation
        https://bugs.webkit.org/show_bug.cgi?id=89137

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/controllers/manager_unittest.py:
        (ResultSummaryTest.test_summarized_results_wontfix):
        * Scripts/webkitpy/layout_tests/controllers/test_expectations_editor_unittest.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_layout_results_generator.py:
        (JSONLayoutResultsGenerator):
        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (result_was_expected):
        (suffixes_for_expectations):
        (TestExpectationsModel._add_test):
        (TestExpectations):
        (TestExpectations.get_rebaselining_failures):
        (TestExpectations.remove_configuration_from_test):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (FunctionsTest.test_result_was_expected):
        (FunctionsTest.test_suffixes_for_expectations):
        (TestExpectationSerializerTests.test_parsed_expectations_string):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (test_test_expectations):
        * Scripts/webkitpy/style/checkers/test_expectations_unittest.py:
        (TestExpectationsTestCase.test_valid_expectations):

2012-06-14  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: remove DummyOptions and clean up the code in Port.get_option() and Port.set_option_default()
        https://bugs.webkit.org/show_bug.cgi?id=89135

        Reviewed by Ryosuke Niwa.

        This patch is just some minor cleanup and simplification. There
        should be no functional changes here.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.__init__):
        (Port.get_option):
        (Port.set_option_default):
        * Scripts/webkitpy/layout_tests/port/chromium_win_unittest.py:
        (ChromiumWinTest.test_setup_environ_for_server_register_cygwin):
        * Scripts/webkitpy/style/checkers/test_expectations.py:
        (TestExpectationsChecker._determine_port_from_expectations_path):
        * Scripts/webkitpy/tool/mocktool.py:
        (MockOptions.ensure_value):

2012-06-14  Ian Vollick  <vollick@chromium.org>

        [chromium] Certain settings in CCSettings could be global
        https://bugs.webkit.org/show_bug.cgi?id=88384

        Reviewed by James Robinson.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):
        (TestShell::resetWebSettings):
        (TestShell::setPerTilePaintingEnabled):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell):
        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::reset):
        (WebPreferences::applyTo):
        * DumpRenderTree/chromium/WebPreferences.h:
        (WebPreferences):

2012-06-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120352.
        http://trac.webkit.org/changeset/120352
        https://bugs.webkit.org/show_bug.cgi?id=89120

        It seems something is still wrong with it :/ (Requested by
        Ossy on #webkit).

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (Factory.__init__):
        (BuildFactory.__init__):
        (TestFactory.__init__):
        (BuildAndTestFactory.__init__):
        (BuildAndPerfTestFactory.__init__):
        (BuildAndPerfTestWebKit2Factory.__init__):
        (DownloadAndPerfTestFactory.__init__):
        (DownloadAndPerfTestWebKit2Factory.__init__):

2012-06-14  Jia Pu  <jpu@apple.com>

        Mark text with text alternative with blue underline.
        https://bugs.webkit.org/show_bug.cgi?id=83047

        Reviewed by NOBODY Enrica Casucci.

        * DumpRenderTree/mac/TextInputController.m:
        (+[TextInputController isSelectorExcludedFromWebScript:]):
        (+[TextInputController webScriptNameForSelector:]):
        (-[TextInputController dictatedStringWithPrimaryString:alternative:alternativeOffset:alternativeLength:]):

2012-06-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120353.
        http://trac.webkit.org/changeset/120353
        https://bugs.webkit.org/show_bug.cgi?id=89119

        It seems we still need this workaround (Requested by Ossy on
        #webkit).

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (loadBuilderConfig):

2012-06-14  Csaba Osztrogonác  <ossy@webkit.org>

        master.cfg cleanup, remove unnecessary workaround
        https://bugs.webkit.org/show_bug.cgi?id=88994

        Reviewed by Lucas Forschler.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (loadBuilderConfig):

2012-06-14  Csaba Osztrogonác  <ossy@webkit.org>

        master.cfg cleanup, pass BuildStep instances instead of BuildStep subclasses
        https://bugs.webkit.org/show_bug.cgi?id=89001

        Reviewed by Lucas Forschler.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (Factory.__init__):
        (BuildFactory.__init__):
        (TestFactory.__init__):
        (BuildAndTestFactory.__init__):
        (BuildAndPerfTestFactory.__init__):
        (BuildAndPerfTestWebKit2Factory.__init__):
        (DownloadAndPerfTestFactory.__init__):
        (DownloadAndPerfTestWebKit2Factory.__init__):

2012-06-14  Csaba Osztrogonác  <ossy@webkit.org>

        Unhide login form on the build.webkit.org
        https://bugs.webkit.org/show_bug.cgi?id=88981

        Reviewed by Lucas Forschler.

        * BuildSlaveSupport/build.webkit.org-config/public_html/default.css:

2012-06-14  Zan Dobersek  <zandobersek@gmail.com>

        [Gtk] Add support in DumpRenderTree for tracking repaints
        https://bugs.webkit.org/show_bug.cgi?id=87658

        Reviewed by Martin Robinson.

        Reimplement the displayWebView method in DumpRenderTree - force a
        repaint before starting tracking repaints and resetting them.

        When gathering pixel output from a web view, if tracking repaints,
        paint an overlay over the output with the overlay being clear in the
        areas where the repaints occurred.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (displayWebView):
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/gtk/PixelDumpSupportGtk.cpp:
        (paintOverlay):
        (fillRepaintOverlayIntoContext):
        (createBitmapContextFromWebView):

2012-06-14  Dirk Pranke  <dpranke@chromium.org>

        new-run-webkit-tests doesn't find similar platform tests for a keyword
        https://bugs.webkit.org/show_bug.cgi?id=37956

        Reviewed by Ryosuke Niwa.

        This patches adds support for NRWT so that if you type
        "new-run-webkit-tests foo" it will run all the tests in foo as
        well as platform/foo for all of the platforms that are normally
        searched (this only applies to directories, not to individual tests).

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager.collect_tests):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.tests):
        (Port):
        (Port._expanded_paths):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_no_http_tests):
        (MainTest):
        (MainTest.test_platform_tests_are_found):

2012-06-14  Dirk Pranke  <dpranke@chromium.org>

        NRWT should honor --skipped=[default|ignore|only], like ORWT does
        https://bugs.webkit.org/show_bug.cgi?id=66308

        Reviewed by Ryosuke Niwa.

        This patch adds support for ORWT's --skipped=(default|ignore|only)
        flag and cleans up the interaction between that and --ignore.

        Individual tests (but not directories) explicitly listed on the
        command line will always be run regardless of what is passed
        for --skipped and --ignore.

        This patch also changes the "found" and "running" log messages
        since it wasn't clear how the skipped tests were included in those numbers.

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager.__init__):
        (Manager.collect_tests):
        (Manager.prepare_lists_and_print_output):
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (_set_up_derived_options):
        (parse_args):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_ignore_flag):
        (MainTest):
        (MainTest.test_skipped_flag):

2012-06-14  Takashi Toyoshima  <toyoshim@chromium.org>

        new-run-webkit-websocketserver must handle TLS related arguments
        https://bugs.webkit.org/show_bug.cgi?id=89079

        Reviewed by Dirk Pranke.

        PyWebSocket class must accept private_key, certificate, and
        ca_certificate arguments and pass them to launching pywebsocket.
        Also add ca_certificate handling to new-run-webkit-websocketserver.

        * Scripts/new-run-webkit-websocketserver:
        (main):
        * Scripts/webkitpy/layout_tests/servers/websocket_server.py:
        (PyWebSocket.__init__):
        (PyWebSocket._prepare_config):

2012-06-14  Qi Zhang  <qi.2.zhang@nokia.com>

        Unreviewed. Update my email.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-14  Takashi Toyoshima  <toyoshim@chromium.org>

        Update pywebsocket to 0.7.6 from 0.7.4
        https://bugs.webkit.org/show_bug.cgi?id=88975

        Reviewed by Kent Tamura.

        This new version of pywebsocket introduce following features.
         - Allow handlers to send a close frame with empty body in response of
             a client initiated closing handshake
         - Implement perframe compression extension
         - Support client certificate authentication

        * Scripts/webkitpy/thirdparty/mod_pywebsocket/COPYING:
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/_stream_hybi.py:
        (_create_control_frame):
        (Stream._receive_frame):
        (Stream.send_message):
        (Stream.receive_message):
        (Stream._send_closing_handshake):
        (Stream.close_connection):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/common.py:
        (ExtensionParsingException):
        (ExtensionParsingException.__init__):
        (_parse_extension_param):
        (_parse_extension):
        (parse_extensions):
        (format_extension):
        (format_extensions):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/extensions.py:
        (_parse_compression_method):
        (_create_accepted_method_desc):
        (PerFrameCompressionExtensionProcessor):
        (PerFrameCompressionExtensionProcessor.__init__):
        (PerFrameCompressionExtensionProcessor._lookup_compression_processor):
        (PerFrameCompressionExtensionProcessor._get_compression_processor_response):
        (PerFrameCompressionExtensionProcessor.get_extension_response):
        (PerFrameCompressionExtensionProcessor.setup_stream_options):
        (PerFrameCompressionExtensionProcessor.get_compression_processor):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/handshake/_base.py:
        (parse_token_list):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/handshake/hybi.py:
        (Handshaker._parse_extensions):
        (Handshaker._send_handshake):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/standalone.py:
        (WebSocketServer._create_sockets):
        (_get_logger_from_class):
        (_configure_logging):
        (_build_option_parser):
        (_main.if):
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/util.py:
        (RepeatedXorMasker.mask):

2012-06-14  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Remove USE(QT_IMAGE_DECODER) macro, since we don't use it anymore

        Reviewed by Noam Rosenthal.

        * qmake/mkspecs/features/features.prf:

2012-06-14  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2] Add implementation for registerIntentService in WebFrameLoaderClient
        https://bugs.webkit.org/show_bug.cgi?id=88399

        Reviewed by Kenneth Rohde Christiansen.

        Update initialization of WKPageLoaderClient.

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):

2012-06-14  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [EFL] [DRT] Implement setDomainRelaxationForbiddenForURLScheme in EFL DRT
        https://bugs.webkit.org/show_bug.cgi?id=84577

        Reviewed by Ryosuke Niwa.

        Add missing implementation setDomainRelaxationForbiddenForURLScheme to EFL's
        LayoutTestController.

        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::setDomainRelaxationForbiddenForURLScheme):

2012-06-13  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2] Add implementation for dispatchIntent in WebFrameLoaderClient
        https://bugs.webkit.org/show_bug.cgi?id=88340

        Reviewed by Kenneth Rohde Christiansen.

        Update initialization of WKPageLoaderClient.

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):

2012-06-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120268.
        http://trac.webkit.org/changeset/120268
        https://bugs.webkit.org/show_bug.cgi?id=89060

        WebCompositor::setPerTilePaintingEnabled hits an assertion in
        DEBUG (Requested by dominicc|work on #webkit).

        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::applyTo):

2012-06-13  Tim Horton  <timothy_horton@apple.com>

        REGRESSION (r120252): run-webkit-tests on Mac fails
        https://bugs.webkit.org/show_bug.cgi?id=89057

        Reviewed by Dan Bernstein.

        get_option will happily return None (the default only kicks in if
        the option is actually *not set*). We should instead check get_option's
        return value and default to "x86_64" architecture ourselves.

        * Scripts/webkitpy/layout_tests/port/mac.py:
        (MacPort.__init__):

2012-06-13  Ian Vollick  <vollick@chromium.org>

        [chromium] Certain settings in CCSettings could be global
        https://bugs.webkit.org/show_bug.cgi?id=88384

        Reviewed by James Robinson.

        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::applyTo):

2012-06-13  Dirk Pranke  <dpranke@chromium.org>

        new-run-webkit-tests does not support --32-bit like ORWT did
        https://bugs.webkit.org/show_bug.cgi?id=71634

        Reviewed by Ojan Vafai.

        This patch adds support for 32-bit apple mac builds, adding the
        --32-bit flag for compatibility with ORWT and fixing the port
        architecture() definition to actually return the correct values.

        * Scripts/webkitpy/layout_tests/port/apple.py:
        (ApplePort._generate_all_test_configurations):
        * Scripts/webkitpy/layout_tests/port/factory.py:
        (port_options):
        * Scripts/webkitpy/layout_tests/port/mac.py:
        (MacPort):
        (MacPort.__init__):
        (MacPort._build_driver_flags):
        (MacPort.setup_environ_for_server):
        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:
        (test_sample_process_throws_exception):
        (test_32bit):
        (test_32bit.run_script):
        (test_64bit):
        (test_64bit.run_script):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort._build_driver):
        (WebKitPort._build_driver_flags):
        * Scripts/webkitpy/layout_tests/port/win.py:
        (WinPort):

2012-06-13  Ryosuke Niwa  <rniwa@webkit.org>

        Remove webkitpy code to support legacy test_expectations.txt files
        https://bugs.webkit.org/show_bug.cgi?id=89038

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.path_to_test_expectations_file):
        (Port.expectations_dict):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_uses_test_expectations_file):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (WebKitPortTest.test_path_to_test_expectations_file):
        (test_test_expectations):
        * Scripts/webkitpy/style/checker.py:
        (CheckerDispatcher.should_skip_without_warning):
        (CheckerDispatcher._create_checker):
        * Scripts/webkitpy/style/checkers/test_expectations_unittest.py:
        (TestExpectationsTestCase._expect_port_for_expectations_path):
        * Scripts/webkitpy/tool/steps/commit.py:
        (Commit._check_test_expectations):
        * Scripts/webkitpy/tool/steps/commit_unittest.py:
        (CommitTest.test_check_test_expectations):

2012-06-13  Dirk Pranke  <dpranke@chromium.org>

        nrwt: remove port.test_expectations() and port.test_expectations_overrides()
        https://bugs.webkit.org/show_bug.cgi?id=88948

        Reviewed by Ojan Vafai.

        In the final patch of this run, we remove the
        test_expectations() and test_expectation_overrides() methods
        from the Port class - callers must now use just
        expectations_dict().

        Note that support for the cascade in new-run-webkit-tests is
        complete but only Chromium uses it; webkit-patch
        rebaseline-expectations still does not support updating entries
        in any file other than the first expectations file, however.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.path_to_test_expectations_file):
        (Port.uses_test_expectations_file):
        (Port.expectations_files):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_additional_expectations):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest.test_expectations_files):
        * Scripts/webkitpy/layout_tests/port/google_chrome_unittest.py:
        (TestGoogleChromePort.test_get_google_chrome_port):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (test_test_expectations):
        (test_legacy_test_expectations):

2012-06-13  Dirk Pranke  <dpranke@chromium.org>

        nrwt: implement the actual cascade of TestExpectations
        https://bugs.webkit.org/show_bug.cgi?id=88947

        Reviewed by Ojan Vafai.

        This change implements the actual cascade by removing the
        concept of 'overrides' from the TestExpectations object and
        parsing each file separately.

        There is an actual semantic change in this patch, in that
        setting an expectation on a directory in one file will override
        the expectations on any individual tests set in prior files. The
        test_overrides__directory() unit test verifies this.

        Otherwise, this patch mostly consists of deleting code :).

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectationsModel.__init__):
        (TestExpectationsModel.add_expectation_line):
        (TestExpectationsModel._add_test):
        (TestExpectationsModel._already_seen_better_match):
        (TestExpectations.__init__):
        (TestExpectations._add_expectations):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (test_overrides__directory):

2012-06-13  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: update callers to use port.expectation_dict() instead of test_expectations() and test_expectations_overrides()
        https://bugs.webkit.org/show_bug.cgi?id=88946

        Reviewed by Ojan Vafai.

        In preparation for fully supporting cascading expectations files
        and removing the 'overrides' concept.

        There should be no functional changes in this patch.

        * Scripts/webkitpy/layout_tests/controllers/manager_unittest.py:
        (ManagerTest.test_update_summary_with_result):
        (ResultSummaryTest.get_result_summary):
        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectations.__init__):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (parse_exp):
        (SkippedTests.check):
        (RemoveConfigurationsTest.test_remove):
        (test_remove_line):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (LintTest.test_all_configurations.FakePort.__init__):
        (LintTest.test_all_configurations.FakePort.expectations_dict):
        (LintTest.test_lint_test_files__errors):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_overrides_are_included_correctly):

2012-06-13  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: rework the TestExpectations style checker in preparation for the cascade
        https://bugs.webkit.org/show_bug.cgi?id=88945

        Reviewed by Ojan Vafai.

        This patch changes the style checker to call the
        TestExpectations parser directly and be oblivious as to what the
        port's actual expectations are.

        * Scripts/webkitpy/style/checkers/test_expectations.py:
        (TestExpectationsChecker.__init__):
        (TestExpectationsChecker.check_test_expectations):

2012-06-13  Dirk Pranke  <dpranke@chromium.org>

        nrwt: restructure the port classes to handle multiple expectations files
        https://bugs.webkit.org/show_bug.cgi?id=88944

        Reviewed by Ojan Vafai.

        This patch restructures the Port classes so that each port
        returns a list of TestExpectations files to be used (in a new, public,
        expectations_files() method), and the base implementation rolls them
        up into the ordered expectations_dict(), which becomes a public
        method.

        port.path_to_test_expectations_file(), port.test_expectations(),
        and port.test_expectations_overrides() are then reimplemented as
        wrappers around port.expectations_dict().
        port.test_expectations() and port.test_expectations_overrides()
        will eventually be removed when the cascade is fully completed,
        and port.path_to_test_expectations_file() will be removed when
        the rebaselining tool supports the cascade
        (expectations_files() may also become private at that point).

        There should be no functional changes in this patch, but a bunch
        of custom logic gets deleted!

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.expectations_dict):
        (Port):
        (Port.expectations_files):
        (Port.test_expectations):
        (Port.test_expectations_overrides):
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_additional_expectations):
        (PortTest.test_uses_test_expectations_file):
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort.all_baseline_variants):
        (ChromiumPort.expectations_files):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest.test_overrides_and_builder_names):
        * Scripts/webkitpy/layout_tests/port/google_chrome.py:
        (_expectations_files):
        (GoogleChromeLinux32Port.expectations_files):
        (GoogleChromeLinux64Port.expectations_files):
        (GoogleChromeMacPort.expectations_files):
        (GoogleChromeWinPort.expectations_files):
        * Scripts/webkitpy/layout_tests/port/google_chrome_unittest.py:
        (TestGoogleChromePort._verify_expectations_overrides):
        * Scripts/webkitpy/layout_tests/port/port_testcase.py:
        (PortTestCase.test_expectations_ordering):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort._skipped_file_search_paths):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (TestRebaseline.test_rebaseline_updates_expectations_file_noop):
        (test_rebaseline_updates_expectations_file):
        (test_rebaseline_does_not_include_overrides):
        (test_rebaseline_expectations):
        (test_overrides_are_included_correctly):

2012-06-13  Brent Fulgham  <bfulgham@webkit.org>

        [WinCairo] Update URL of WinCairoRequirements.zip download.
        https://bugs.webkit.org/show_bug.cgi?id=89009

        Reviewed by Martin Robinson.

        * Tools/Scripts/update-webkit-dependency: Put fallback code
        to download a "last update" time from servers that don't properly
        report Last-Modified in their HTTP header.
        * Tools/Scripts/update-webkit-wincairo-libs: Change download link
        for the WinCairo build requirements bundle.

2012-06-13  Dirk Pranke  <dpranke@chromium.org>

        nrwt: preliminary cleanup before supporting cascading expectations files
        https://bugs.webkit.org/show_bug.cgi?id=88942

        Reviewed by Ojan Vafai.

        This change just prepares the TestExpectations parser to get filenames
        along with the expectations, and improves the warning messages so that
        they contain the filenames along with the line numbers.

        There should be no functional changes in this patch.

        * Scripts/webkitpy/layout_tests/controllers/test_expectations_editor_unittest.py:
        (TestExpectationEditorTests.make_parsed_expectation_lines):
        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectationParser.parse):
        (TestExpectationParser.expectation_for_skipped_test):
        (TestExpectationParser._tokenize):
        (TestExpectationParser._tokenize_list):
        (TestExpectationLine):
        (TestExpectationsModel.__init__):
        (TestExpectationsModel._already_seen_better_match):
        (TestExpectations.__init__):
        (TestExpectations._shorten_filename):
        (TestExpectations._report_warnings):
        (TestExpectations._add_skipped_tests):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (TestExpectationParserTests._tokenize):
        (TestExpectationParserTests.test_tokenize_blank):
        (TestExpectationParserTests.test_tokenize_missing_colon):
        (TestExpectationParserTests.test_tokenize_extra_colon):
        (TestExpectationParserTests.test_tokenize_empty_comment):
        (TestExpectationParserTests.test_tokenize_comment):
        (TestExpectationParserTests.test_tokenize_missing_equal):
        (TestExpectationParserTests.test_tokenize_extra_equal):
        (TestExpectationParserTests.test_tokenize_valid):
        (TestExpectationParserTests.test_tokenize_valid_with_comment):
        (TestExpectationParserTests.test_tokenize_valid_with_multiple_modifiers):
        (TestExpectationParserTests.test_parse_empty_string):
        (TestExpectationSerializerTests._tokenize):
        (TestExpectationSerializerTests.assert_round_trip):
        (TestExpectationSerializerTests.assert_list_round_trip):
        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningExpectationsUpdater.update_expectations):

2012-06-13  Zan Dobersek  <zandobersek@gmail.com>

        [Gtk] Enable link prefetch support in the developer builds
        https://bugs.webkit.org/show_bug.cgi?id=89011

        Reviewed by Martin Robinson.

        Enable the link prefetch support for Gtk by default in developer
        builds.

        * Scripts/webkitperl/FeatureList.pm:

2012-06-13  Csaba Osztrogonác  <ossy@webkit.org>

        Update buildbot master in autoinstaller to match build.webkit.org
        https://bugs.webkit.org/show_bug.cgi?id=88992

        Reviewed by Adam Barth.

        * Scripts/webkitpy/thirdparty/__init__.py:
        (AutoinstallImportHook._install_buildbot):

2012-06-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120209.
        http://trac.webkit.org/changeset/120209
        https://bugs.webkit.org/show_bug.cgi?id=89007

        Broke the WebKit2 mac build. (Requested by andersca on
        #webkit).

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):

2012-06-13  Zoltan Horvath  <zoltan@webkit.org>

        check-webkit-style needs to respect Qt API coding style
        https://bugs.webkit.org/show_bug.cgi?id=88995

        Reviewed by Csaba Osztrogonác.

        Add -whitespace/declaration exception to Qt API files.

        * Scripts/webkitpy/style/checker.py:

2012-06-13  Christophe Dumez  <christophe.dumez@intel.com>

        [WK2] Add implementation for dispatchIntent in WebFrameLoaderClient
        https://bugs.webkit.org/show_bug.cgi?id=88340

        Reviewed by Kenneth Rohde Christiansen.

        Update initialization of WKPageLoaderClient.

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):

2012-06-13  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        [Qt] Handle multiple held buttons in touch mocking.
        https://bugs.webkit.org/show_bug.cgi?id=88865

        Reviewed by Kenneth Rohde Christiansen.

        Add handling for multiple held mouse-buttons in the appropiate places.
        To do this last-pos and start-pos are now also read from the last recorded
        touch-point instead from object-global variables.

        * MiniBrowser/qt/MiniBrowserApplication.cpp:
        (MiniBrowserApplication::notify):
        (MiniBrowserApplication::updateTouchPoint):
        * MiniBrowser/qt/MiniBrowserApplication.h:
        (MiniBrowserApplication):

2012-06-13  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Make it possible to disable -Werror in production builds

        Reviewed by Tor Arne Vestbø.

        Don't do -Werror if build-webkit is called with --qmakearg=CONFIG+=production_build,
        something qt5.git's qtwebkit.pri will soon do.

        * qmake/mkspecs/features/unix/default_post.prf:

2012-06-13  Dominik Röttsches  <dominik.rottsches@intel.com>

        [EFL] Store and compare md5sum of jhbuild files to trigger cleaning Dependencies
        https://bugs.webkit.org/show_bug.cgi?id=85790

        Reviewed by Gustavo Noronha Silva.

        Add md5 checks for jhbuild configuration for EFL, reusing the gtk jhbuild related
        code in webkitdirs.pm.

        * Scripts/webkitdirs.pm:
        (jhbuildConfigurationChanged):
        (saveJhbuildMd5):
        (cleanJhbuild):
        (buildAutotoolsProject):
        (generateBuildSystemFromCMakeProject):

2012-06-13  Qi Zhang  <qi.2.zhang@nokia.com>

        [Qt] Add configure test for zlib and set WTF_USE_ZLIB if found
        https://bugs.webkit.org/show_bug.cgi?id=88763

        Add configure test for zlib and set WTF_USE_ZLIB if found to enable websocket
        extension.

        Reviewed by Simon Hausmann.

        * qmake/config.tests/libzlib: Added.
        * qmake/config.tests/libzlib/libzlib.cpp: Added.
        (main):
        * qmake/config.tests/libzlib/libzlib.pro: Added.
        * qmake/mkspecs/features/features.prf:
        * qmake/sync.profile:

2012-06-13  Robin Cao  <robin.cao@torchmobile.com.cn>

        [BlackBerry] Enable MEDIA_STREAM by default
        https://bugs.webkit.org/show_bug.cgi?id=88849

        Reviewed by Antonio Gomes.

        * Scripts/webkitperl/FeatureList.pm:

2012-06-13  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Prevent stderr output from messing up detection of build path

        https://bugs.webkit.org/show_bug.cgi?id=88075

        Warnings such as 'perl: warning: Setting locale failed' will otherwise
        end up as the build path when calling out to webkit-build-directory.

        Reviewed by Ojan Vafai.

        * Scripts/webkitpy/layout_tests/port/config.py:
        (Config.build_directory):

2012-06-13  Ryosuke Niwa  <rniwa@webkit.org>

        Update the builder name for Apple Lion builders.

        * Scripts/webkitpy/layout_tests/port/builders.py:

2012-06-13  Joel Dillon  <joel.dillon@codethink.co.uk>

        [Qt][Win]QtTestBrowser somehow picks up DumpRenderTree's main.cpp, causing a failure to link
        https://bugs.webkit.org/show_bug.cgi?id=88874

        Reviewed by Simon Hausmann.

        Rename main.cpp in QtTestBrowser because on Windows
        it conflicts with main.cpp from DumpRenderTree.

        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/qttestbrowser.cpp: Renamed from Tools/QtTestBrowser/main.cpp.
        (launcherMain):
        (LauncherApplication):
        (LauncherApplication::urls):
        (LauncherApplication::isRobotized):
        (LauncherApplication::robotTimeout):
        (LauncherApplication::robotExtraTime):
        (LauncherApplication::applyDefaultSettings):
        (LauncherApplication::LauncherApplication):
        (requiresGraphicsView):
        (LauncherApplication::handleUserOptions):
        (main):

2012-06-12  Lucas Forschler  <lforschler@apple.com>

        Wrap bot types inside ().
        https://bugs.webkit.org/show_bug.cgi?id=88893
        
        Reviewed by Stephanie Lewis.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-06-12  Christophe Dumez  <christophe.dumez@intel.com>

        [soup] Prevent setting or editing httpOnly cookies from JavaScript
        https://bugs.webkit.org/show_bug.cgi?id=88760

        Reviewed by Gustavo Noronha Silva.

        Update libsoup to v2.39.2, glib to v2.33.2 and glib-networking
        to v2.33.2 for both GTK and EFL ports.

        * efl/jhbuild.modules:
        * gtk/jhbuild.modules:

2012-06-12  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Enable SHADOW_DOM flag
        https://bugs.webkit.org/show_bug.cgi?id=87732

        Reviewed by Kentaro Hara.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues): Enable
        SHADOW_DOM by default in DRT.
        * DumpRenderTree/efl/DumpRenderTreeView.cpp:
        (onFocusCanCycle): Enable focus cycling in EFL DRT to behave like
        Chromium and Mac ports.
        (drtViewAdd):
        * Scripts/webkitperl/FeatureList.pm: Enable SHADOW_DOM flag by default
        at compile time for EFL port.

2012-06-12  Ashod Nakashian  <ashodnakashian@yahoo.com>

        WinLauncher should show loading errors
        https://bugs.webkit.org/show_bug.cgi?id=80760

        Reviewed by Brent Fulgham.

        * WinLauncher/WinLauncher.cpp: Added load-fail handler to show messagebox with error.
        (WinLauncherWebHost::didFailProvisionalLoadWithError):
        * WinLauncher/WinLauncher.h:
        (WinLauncherWebHost::didFailProvisionalLoadWithError):
        (WinLauncherWebHost):

2012-06-12  Ryuan Choi  <ryuan.choi@samsung.com>

        [EFL][WK2] Add MiniBrowserEfl.
        https://bugs.webkit.org/show_bug.cgi?id=61850

        Reviewed by Chang Shu.

        Implement MiniBrowser for EFL.

        * CMakeLists.txt:
        * MiniBrowser/efl/CMakeLists.txt: Added.
        * MiniBrowser/efl/main.c: Added.
        (_MiniBrowser):
        (main_signal_exit):
        (on_ecore_evas_resize):
        (browserCreate):
        (main):

2012-06-12  Helder Correia  <helder.correia@nokia.com>

        Unreviewed. Update my email address in committers.py.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-12  Dominik Röttsches  <dominik.rottsches@intel.com>

        [EFL] Resolve CMake warnings on overlapping search paths for EFL jhbuild-enabled build
        https://bugs.webkit.org/show_bug.cgi?id=84707

        Fixing CMAKE prefix path for 64bit systems to avoid CMAKE warnings on those.
        use_lib64 variable is preconfigured to True by jhbuild.

        Reviewed by Dirk Pranke.

        * efl/jhbuildrc:

2012-06-12  Dana Jansens  <danakj@chromium.org>

        Add zlieber@chromium.org to contributors list
        https://bugs.webkit.org/show_bug.cgi?id=88904

        Unreviewed.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-12  Lucas Forschler  <lforschler@apple.com>

        Rename Apple bots to a standard convention.
        https://bugs.webkit.org/show_bug.cgi?id=88893
        
        Note: This has the side effect of grouping all of the Apple bots together in the waterfall.

        Reviewed by Simon Fraser.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-06-12  Mike West  <mkwst@chromium.org>

        Make document.documentURI readonly from JavaScript
        https://bugs.webkit.org/show_bug.cgi?id=65187

        Reviewed by Alexey Proskuryakov.

        * TestWebKitAPI/TestWebKitAPI.xcodeproj/project.pbxproj:
        * TestWebKitAPI/Tests/mac/SetDocumentURI.html: Added.
        * TestWebKitAPI/Tests/mac/SetDocumentURI.mm: Added.
        (-[SetDocumentURITest webView:didFinishLoadForFrame:]):
        (TestWebKitAPI):
        (TestWebKitAPI::TEST):

2012-06-12  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] enable LEGACY_WEBKIT_BLOB_BUILDER flag
        https://bugs.webkit.org/show_bug.cgi?id=88715

        Reviewed by Noam Rosenthal.

        Enable LEGACY_WEBKIT_BLOB_BUILDER flag by default on EFL port.

        * Scripts/webkitperl/FeatureList.pm:

2012-06-12  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Fix -Werror for the buildbots
        https://bugs.webkit.org/show_bug.cgi?id=88223

        Rubber-stamped by Tor Arne Vestbø.

        Revert a part of r119269 to enable Werror again for non qt-developer-builds. (for bots for example)

        * qmake/mkspecs/features/unix/default_post.prf:

2012-06-12  Balazs Kelemen  <kbalazs@webkit.org>

        [REGRESSION][WTR] Build fail with werror after r120054
        https://bugs.webkit.org/show_bug.cgi?id=88862

        Reviewed by Csaba Osztrogonác.

        Some static helpers become unused after counterValueForElementById
        has moved to Internals. Let's remove them.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR):

2012-06-12  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Slave losts cause build break on bots
        https://bugs.webkit.org/show_bug.cgi?id=38980

        Minor fix after r59261.

        Reviewed by Tor Arne Vestbø.

        * Scripts/build-webkit:
        (unlinkZeroFiles): Don't remove 0 byte sized directories, because they are always 0 byte sized on Windows.

2012-06-11  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        [DRT] LTC:: counterValueForElementById() could be moved to Internals.
        https://bugs.webkit.org/show_bug.cgi?id=84406

        Reviewed by Hajime Morita.

        Move the counterValueForElementById from LayoutTestCotroller to Internals and
        remove the old platform specific implementations as it exclusively tests WebCore functionality.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/blackberry/LayoutTestControllerBlackBerry.cpp:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::setPOSIXLocale):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (LayoutTestController):

2012-06-11  Hans Wennborg  <hans@chromium.org>

        Speech JavaScript API: Make SpeechRecognitionError an Event
        https://bugs.webkit.org/show_bug.cgi?id=88784

        Reviewed by Adam Barth.

        Make it possible to have MockWebSpeechRecognizer fire error events.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::setMockSpeechRecognitionError):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.cpp:
        (WebKit):
        (ErrorTask):
        (WebKit::ErrorTask::ErrorTask):
        (MockWebSpeechRecognizer::addMockResult):
        (MockWebSpeechRecognizer::setError):
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.h:
        (MockWebSpeechRecognizer):

2012-06-11  Ojan Vafai  <ojan@chromium.org>

        Don't show the ASAN builders in garden-o-matic since they don't get block WebKit rolls.
        https://bugs.webkit.org/show_bug.cgi?id=88836

        Reviewed by Dirk Pranke.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders_unittests.js:

2012-06-11  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Remove CMakeCache.txt before building
        https://bugs.webkit.org/show_bug.cgi?id=88717

        Reviewed by Antonio Gomes.

        Remove CMake cache file before every build to avoid using outdated
        build flags when new features get enabled. This will avoid unexpected
        failures on the bots due to outdated build flags.

        * Scripts/webkitdirs.pm:
        (generateBuildSystemFromCMakeProject):

2012-06-11  Vincent Scheib  <scheib@chromium.org>

        Add new Pointer Lock spec attribute webkitPointerLockElement.
        https://bugs.webkit.org/show_bug.cgi?id=88799

        Reviewed by Dimitri Glazkov.

        Part of a series of refactoring changes to update pointer lock API to
        the fullscreen locking style. https://bugs.webkit.org/show_bug.cgi?id=84402

        New attribute webkitPointerLockElement added. Follow up patches
        will remove the previous isLocked attribute. Tests updated to use
        the new attribute.

        WebViewHost logic required modification to correctly repond to
        a lock, unlock, pointerLockElement call series. Specifically,
        unlocking must be queued after a lock command is issued always
        as the lock state may not be set yet with a lock request in flight.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::requestPointerUnlock): Always post didLosePointerLock task.
        (WebViewHost::didLosePointerLock): Signal didLosePointerLock only if pointer was locked.

2012-06-11  Alexis Menard  <alexis.menard@openbossa.org>

        [CSS3 Backgrounds and Borders] Protect box-decoration-break behind a feature flag.
        https://bugs.webkit.org/show_bug.cgi?id=88804

        Reviewed by Tony Chang.

        Protect box-decoration-break behind a feature flag enabled by default.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-06-11  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        [CMAKE][EFL] Remove duplicated executable output path
        https://bugs.webkit.org/show_bug.cgi?id=88765

        Reviewed by Daniel Bates.

        CMake files for EFL port have redefined executable output path. However, EFL port doesn't
        need to define again because it is already defined in top-level CMake file.

        * DumpRenderTree/efl/CMakeLists.txt:
        * EWebLauncher/CMakeLists.txt:

2012-06-11  Ojan Vafai  <ojan@chromium.org>

        Don't consider show warnings in the garden-o-matic UI for non-layout test failures
        https://bugs.webkit.org/show_bug.cgi?id=88816

        Reviewed by Dirk Pranke.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/base.js:
        Expose a way to clear AsynchronousCaches.
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/builders_unittests.js:
        Clear the buildInfo cache at the beginning of each test in order to avoid having one test affect another.

2012-06-11  Dirk Pranke  <dpranke@chromium.org>

        nrwt exits early too frequently
        https://bugs.webkit.org/show_bug.cgi?id=73843

        Reviewed by Ryosuke Niwa.

        Change the defaults for new-run-webkit-tests for both
        --exit-after-n-failures and --exit-after-n-crashes-or-timeouts
        to zero (i.e., we will never exit early by default).

        If people want their buildbots to exit early it is their
        responsibility to update their buildbot configs appropriately.

        Note that we have tests that ensure that these flags work for
        non-zero numbers, but we don't have tests that either test the
        default or ensure that zero means "run all of the tests". I
        think that's okay but can add tests if others disagree.

        Also note that it looks like no changes on the build.webkit.org
        master.cfg are necessary; all of the bots seem to be using the
        RunWebKitTests wrapper which is already setting the flags. There
        is a NewRunWebKitTests wrapper, but that looks to be unused; I
        will delete that in a separate patch.

        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (parse_args):

2012-06-11  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [EFL] [DRT] Reset CacheModel before running each test
        https://bugs.webkit.org/show_bug.cgi?id=87534

        Reviewed by Gustavo Noronha Silva.

        Reset cache model to default before running each test to fix some
        flaky tests on EFL build bots. Also fix case value in setCacheModel.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::setCacheModel):

2012-06-11  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [GTK] Memory leaks in DRT EventSender.cpp
        https://bugs.webkit.org/show_bug.cgi?id=88774

        Reviewed by Martin Robinson.

        Fix a few possible memory leaks in EventSender code.

        * DumpRenderTree/gtk/EventSender.cpp:
        (contextClickCallback): Free the event returned by gdk_event_new().
        (mouseDownCallback): Ditto.
        (mouseUpCallback): Ditto.

2012-06-11  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [EFL] REGRESSION (r119788): tests rely on pathToLocalResource are failing after r119788
        https://bugs.webkit.org/show_bug.cgi?id=88661

        Reviewed by Dirk Pranke.

        Pass string length explicitly when creating String object from
        non-null-terminated UChar* returned by characters().

        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::pathToLocalResource):

2012-06-11  David Dorwin  <ddorwin@chromium.org>

        [chromium] Provide access to the WebPlugin created by the helper plugin widget
        https://bugs.webkit.org/show_bug.cgi?id=88028

        Reviewed by Adam Barth.

        Added isPlaceholder() to WebPlugin.

        * DumpRenderTree/chromium/TestWebPlugin.h:
        (TestWebPlugin::isPlaceholder):

2012-06-11  Tony Chang  <tony@chromium.org>

        rebaseline from garden-o-matic leaves N processes each time it is run
        https://bugs.webkit.org/show_bug.cgi?id=88586

        Reviewed by Dirk Pranke.

        This appears to only be a problem on python 2.7. Maybe a bug causing
        pools to not be garbage collected?

        * Scripts/webkitpy/common/system/executive.py:
        (Executive.run_in_parallel): close() and join() the process pool.
        * Scripts/webkitpy/common/system/executive_unittest.py:
        (ExecutiveTest.test_run_in_parallel):

2012-06-11  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Add config tests for WEBP imagedecoder library, modify HAVE(decoderlibrary) to USE(...)
        https://bugs.webkit.org/show_bug.cgi?id=87841

        Reviewed by Simon Hausmann.

        * qmake/config.tests/libwebp/libwebp.cpp: Added.
        (main):
        * qmake/config.tests/libwebp/libwebp.pro: Added.
        * qmake/sync.profile:

2012-06-10  Ryosuke Niwa  <rniwa@webkit.org>

        Expose layoutTestController as testRunner
        https://bugs.webkit.org/show_bug.cgi?id=88210

        Reviewed by Darin Adler.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::makeWindowObject):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::bindJSObjectsToWindow):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::initJSObjects):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::makeWindowObject):

2012-06-09  Dominic Cooney  <dominicc@chromium.org>

        [Chromium] Remove JavaScriptCore dependencies from gyp
        https://bugs.webkit.org/show_bug.cgi?id=88510

        Reviewed by Adam Barth.

        Chromium doesn't support JSC any more and there doesn't seem to be
        a strong interest in using GYP as the common build system in other
        ports.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * Scripts/generate-project-files: Removed.

2012-06-09  Sukolsak Sakshuwong  <sukolsak@google.com>

        Add UNDO_MANAGER flag
        https://bugs.webkit.org/show_bug.cgi?id=87908

        Reviewed by Tony Chang.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-06-08  Ryosuke Niwa  <rniwa@webkit.org>

        webkit-patch land-safely should set cq? if the patch author is not in committers.py
        https://bugs.webkit.org/show_bug.cgi?id=88689

        Reviewed by Dirk Pranke.

        When posting a patch on Bugzilla, trun cq+ into cq? if the Bugzilla login is not listed
        in committers.py or the contributor cannot commit. If anything, the contributor can still
        set cq+ on thier patches manually so I don't think this will be an issue for people who
        don't list their Bugzille email on committers.py.

        * Scripts/webkitpy/common/net/bugzilla/bugzilla.py:
        (Bugzilla._commit_queue_flag):
        * Scripts/webkitpy/common/net/bugzilla/bugzilla_unittest.py:
        (test_commit_queue_flag):
        (test_commit_queue_flag.assert_commit_queue_flag):

2012-06-08  Dirk Pranke  <dpranke@chromium.org>

        remove obsolete NewRunWebKitTests buildbot master factory classes
        https://bugs.webkit.org/show_bug.cgi?id=88693

        Reviewed by Ryosuke Niwa.

        I believe these aren't used any more ...

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (RunWebKitTests.getText2):
        (BuildAndTestLeaksFactory):

2012-06-08  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Build DumpRenderTree with Android SDK
        https://bugs.webkit.org/show_bug.cgi?id=88598

        Change WebKit side of DRT related code according to some recent changes at chromium side.

        Reviewed by Adam Barth.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort.__init__):
        (ChromiumAndroidPort._path_to_driver):

2012-06-08  Wei James  <james.wei@intel.com>

        Add app_abi option for DumpRenderTree_apk
        https://bugs.webkit.org/show_bug.cgi?id=88626

        Reviewed by Adam Barth.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-06-08  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Add API to get the library version to WebKit2 GTK+
        https://bugs.webkit.org/show_bug.cgi?id=88426

        Reviewed by Martin Robinson.

        * gtk/generate-gtkdoc:
        (get_webkit2_options): Add built sources to the list of files, but
        ignore enum types and marshallers.

2012-06-07  Vincent Scheib  <scheib@chromium.org>

        Layout Test pointer-lock/pointerlockchange-pointerlockerror-events.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=88604

        Reviewed by Kent Tamura.

        DumpRenderTree fixed to not call didLosePointerLock if pointer is not currently locked.
        Fixes debug only assert crash in pointer-lock/pointerlockchange-pointerlockerror-events.html test.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::requestPointerUnlock):

2012-06-08  Hans Wennborg  <hans@chromium.org>

        Speech JavaScript API: mock WebSpeechRecognizer for DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=87976

        Reviewed by Kent Tamura.

        Provide a mock implementation of WebSpeechRecognizer for
        DumpRenderTree. This will allow better testing of the API via layout
        tests.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::addMockSpeechRecognitionResult):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.cpp: Added.
        (MockWebSpeechRecognizer::create):
        (MockWebSpeechRecognizer::start):
        (MockWebSpeechRecognizer::stop):
        (MockWebSpeechRecognizer::abort):
        (MockWebSpeechRecognizer::MockWebSpeechRecognizer):
        (MockWebSpeechRecognizer::~MockWebSpeechRecognizer):
        (MockWebSpeechRecognizer::ResultTask::runIfValid):
        * DumpRenderTree/chromium/MockWebSpeechRecognizer.h: Added.
        (WebKit):
        (MockWebSpeechRecognizer):
        (MockWebSpeechRecognizer::addMockResult):
        (MockWebSpeechRecognizer::taskList):
        (ClientCallTask):
        (MockWebSpeechRecognizer::ClientCallTask::ClientCallTask):
        (ResultTask):
        (MockWebSpeechRecognizer::ResultTask::ResultTask):
        (NoMatchTask):
        (MockWebSpeechRecognizer::NoMatchTask::NoMatchTask):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::speechRecognizer):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):
        (WebViewHost::mockSpeechRecognizer):

2012-06-07  Kinuko Yasuda  <kinuko@chromium.org>

        check-webkit-style needs to be taught about <public/Foo.h>
        https://bugs.webkit.org/show_bug.cgi?id=88524

        Reviewed by David Levin.

        * Scripts/webkitpy/style/checkers/cpp.py:
        (_classify_include):
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:
        (OrderOfIncludesTest.test_public_primary_header):
        (OrderOfIncludesTest.test_classify_include):

2012-06-07  Joshua Lock  <joshua.lock@intel.com>

        [EFL][DRT] Normalize file:///tmp/LayoutTests in LayoutTestController::pathToLocalResource()
        https://bugs.webkit.org/show_bug.cgi?id=67255

        Reviewed by Dirk Pranke.

        Implement pathToLocalResource to redirect file:///tmp URL's to
        DUMPRENDERTREE_TEMP and file:///tmp/LayoutTests to point to the
        LayoutTests sub-directory of the WebKit source tree.

        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::pathToLocalResource):

2012-06-07  Tony Payne  <tpayne@chromium.org>

        [chromium] Allow LayoutTests under new git workflow
        https://bugs.webkit.org/show_bug.cgi?id=88575

        On Windows, chromium indirects through git.bat. Adds the same hack that
        is currently used for discovering svn.bat to support the new git
        workflow.

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/common/checkout/scm/git.py:
        (Git): Replaces all hard-coded references to 'git' with the class
        variable executable_name.
        (Git._check_git_architecture):
        (Git.in_working_directory):
        (Git.find_checkout_root):
        (Git.read_git_config):
        (Git.discard_local_commits):
        (Git.local_commits):
        (Git.working_directory_is_clean):
        (Git.clean_working_directory):
        (Git.status_command):
        (Git.add_list):
        (Git.delete_list):
        (Git.exists):
        (Git._current_branch):
        (Git.changed_files):
        (Git._changes_files_for_commit):
        (Git.revisions_changing_file):
        (Git.conflicted_files):
        (Git.svn_revision):
        (Git.create_patch):
        (Git._run_git_svn_find_rev):
        (Git.contents_at_revision):
        (Git.diff_for_file):
        (Git.show_head):
        (Git.committer_email_for_revision):
        (Git.apply_reverse_diff):
        (Git.revert_files):
        (Git.commit_with_message):
        (Git._commit_on_branch):
        (Git.svn_commit_log):
        (Git.last_svn_commit_log):
        (Git.svn_blame):
        (Git._branch_ref_exists):
        (Git.delete_branch):
        (Git.remote_merge_base):
        (Git.commit_locally_with_message):
        (Git.push_local_commits_to_server):
        (Git.commit_ids_from_commitish_arguments):
        (Git.commit_message_for_local_commit):
        (Git.files_changed_summary_for_commit):
        * Scripts/webkitpy/common/host.py:
        (Host._engage_awesome_windows_hacks): Adds an awesome 'git.bat' hack
        that duplicates the logic in the existing 'svn.bat' hack.

2012-06-07  Ojan Vafai  <ojan@chromium.org>

        Style build architectures like build versions for non-layout test failures
        https://bugs.webkit.org/show_bug.cgi?id=88590

        Reviewed by Tony Chang.

        Since we show the list of failing tests after the architecture, we want the
        buildtype and architecture to be grouped together visually.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/styles/failures.css:
        (.effects a.failing-builder>span.architecture):

2012-06-07  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Remove header dependency of ImageDiff to WTF
        https://bugs.webkit.org/show_bug.cgi?id=88422

        Reviewed by Ryosuke Niwa.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/chromium/ImageDiff.cpp:
        (untestedCompareImages):

2012-06-07  Dongwoo Im  <dw.im@samsung.com>

        [EFL] [DRT] DRT enables WebAudio when WebAudio feature is enabled.
        https://bugs.webkit.org/show_bug.cgi?id=88491

        Reviewed by Dirk Pranke.

        DRT should enable WebAudio when WebAudio feature is enabled,
        so that the WebAudio feature could be tested by the Layouttest.

        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp: Enable WebAudio when WebAudio feature is enabled.
        (LayoutTestController::overridePreference):

2012-06-07  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch rebaseline-expectations should only rebaseline the appropriate suffixes for the failure in question
        https://bugs.webkit.org/show_bug.cgi?id=88581

        Reviewed by Ojan Vafai.

        webkit-paptch rebaseline-expectations was ignoring what the
        expected results for a test were and pulling down all the result
        files from a bot. This could lead to us pulling down old,
        incorrect .txt or .png files. With this patch we will now only
        pull down expectations of the appropriate file types (so an
        IMAGE failure will only pull the png and not the txt file).

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (has_pixel_failures):
        (suffixes_for_expectations):
        * Scripts/webkitpy/layout_tests/models/test_expectations_unittest.py:
        (FunctionsTest.test_suffixes_for_expectations):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractRebaseliningCommand.__init__):
        (RebaselineExpectations._is_supported_port):
        (RebaselineExpectations._update_expectations_file):
        (RebaselineExpectations._tests_to_rebaseline):
        (RebaselineExpectations._rebaseline_port):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_overrides_are_included_correctly):

2012-06-07  Ojan Vafai  <ojan@chromium.org>

        Fix recent null pointer error regression in the flakiness dashboard
        https://bugs.webkit.org/show_bug.cgi?id=88573

        Reviewed by Dirk Pranke.

        * TestResultServer/static-dashboards/builders.js:
        (requestBuilderList):
        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js:

2012-06-07  Konrad Piascik  <kpiascik@rim.com>

        Add Konrad Piascik to committers.py
        https://bugs.webkit.org/show_bug.cgi?id=88560

        Unreviewed.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-07  Tony Chang  <tony@chromium.org>

        [chromium] Win mock scrollbars appear to overflow by a pixel to the right and bottom
        https://bugs.webkit.org/show_bug.cgi?id=77368

        Reviewed by Ojan Vafai.

        It doesn't look like we ever get a rect with width or height of 0.
        I ran css1, css2.1, fast/forms, and tables without any crashes.

        * DumpRenderTree/chromium/WebThemeEngineDRTWin.cpp:
        (webRectToSkIRect): Correctly convert a WebRect to a SkIRect.

2012-06-07  Dirk Pranke  <dpranke@chromium.org>

        run-webkit-tests --lint-test-files gives an error when run on linux
        https://bugs.webkit.org/show_bug.cgi?id=88551

        Reviewed by Ojan Vafai.

        We weren't mapping the expectations properly for the
        google-chrome ports.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.path_to_test_expectations_file):
        * Scripts/webkitpy/layout_tests/port/google_chrome_unittest.py:
        (TestGoogleChromePort.test_path_to_expectations):

2012-06-07  Daniel Erat  <derat@chromium.org>

        [chromium] Add LayoutTestController::setTextSubpixelPositioning() for Linux.
        https://bugs.webkit.org/show_bug.cgi?id=88263

        Reviewed by Tony Chang.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::reset):
        (LayoutTestController::setTextSubpixelPositioning):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/chromium/fonts.conf:

2012-06-07  Zan Dobersek  <zandobersek@gmail.com>

        [Gtk] Assertions in gtk_widget_draw when acquiring pixel output
        https://bugs.webkit.org/show_bug.cgi?id=88060

        Reviewed by Martin Robinson.

        Spin the main loop before acquiring the pixel content. This ensures things
        like late size allocations are finished before calling gtk_widget_draw,
        avoiding assertions and subsequent empty pixel results.

        * DumpRenderTree/gtk/PixelDumpSupportGtk.cpp:
        (createBitmapContextFromWebView):

2012-06-06  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        [Qt] Improve the visual of the viewport info box
        https://bugs.webkit.org/show_bug.cgi?id=88410

        Reviewed by Tor Arne Vestbø.

        Improve the visual and make it possible to see the content more easy.

        * MiniBrowser/qt/qml/ViewportInfoItem.qml:

2012-06-06  Mariusz Grzegorczyk  <mariusz.g@samsung.com>

        [EFL][WK2] Compile webkit1 and webkit2 by default.
        https://bugs.webkit.org/show_bug.cgi?id=85041

        Reviewed by Chang Shu.

        Compile webkit1 and webkit2 while running Tools/Scripts/build-webkit --efl.
        Webkit2 build can be skipped by adding --no-webkit2 option to build-webkit script.

        * Scripts/build-webkit:

2012-06-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119662.
        http://trac.webkit.org/changeset/119662
        https://bugs.webkit.org/show_bug.cgi?id=88487

        Broke builds (Requested by rniwa on #webkit).

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/chromium/ImageDiff.cpp:
        (untestedCompareImages):

2012-06-06  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Remove header dependency of ImageDiff to WTF
        https://bugs.webkit.org/show_bug.cgi?id=88422

        Reviewed by Adam Barth.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/chromium/ImageDiff.cpp:
        (untestedCompareImages):

2012-06-06  Amy Ousterhout  <aousterh@chromium.org>

        [WebKit] DeviceOrientation cleanup
        https://bugs.webkit.org/show_bug.cgi?id=88406

        Reviewed by Kent Tamura.

        Updated LayoutTestController to use new public default constructor in WebDeviceOrientation.h.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::setMockDeviceOrientation):

2012-05-29  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: add support for an ordered dict of test expectations
        https://bugs.webkit.org/show_bug.cgi?id=87802

        Reviewed by Ojan Vafai.

        As per https://bugs.webkit.org/show_bug.cgi?id=65834 we want to
        support a cascaded list of test expectations files. An easy way
        to think of this is as an ordered dictionary of name -> contents
        for files, where the name is usually a path on disk (I say
        usually because we want to support other kinds of expectations
        like the compile-time skips for unsupported features in
        webkit.py, and we want to continue to support "in-memory" test
        expectations that don't require a filesystem).

        Conveniently there is an OrderedDict implementation in Python
        2.7+ and it is available as a backport, so the first step in
        adding this support is to use that implementation. Subsequent
        patches will update the test_expectations.py module (and other
        callers) to access the dict directly.

        This patch just changes the base internal implementation and
        provides wrappers for compatibility. The derived ports
        (WebKitPort, TestPort, etc.) still need to be updated.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port._expectations_dict):
        (Port.test_expectations):
        (Port):
        (Port._expectations_overrides_dict):
        (Port.test_expectations_overrides):
        * Scripts/webkitpy/layout_tests/port/port_testcase.py:
        (PortTestCase.test_expectations_ordering):
        (PortTestCase):
        (PortTestCase.test_expectations_overrides_ordering):
        * Scripts/webkitpy/thirdparty/ordered_dict.py: Added.
        (OrderedDict):
        (OrderedDict.__init__):
        (OrderedDict.clear):
        (OrderedDict.__setitem__):
        (OrderedDict.__delitem__):
        (OrderedDict.__iter__):
        (OrderedDict.__reversed__):
        (OrderedDict.popitem):
        (OrderedDict.__reduce__):
        (OrderedDict.__repr__):
        (OrderedDict.copy):
        (OrderedDict.fromkeys):

2012-06-06  Mario Sanchez Prada  <msanchez@igalia.com>

        Unreviewed gardening. Unit test fails on GTK 64bit debug bot.

        * gtk/run-api-tests:
        (TestRunner): Skip TestWebKitAPI/WTF/TestHashMap.

2012-06-06  Dirk Pranke  <dpranke@chromium.org>

        nrwt should look in 'out' for binaries on chromium win to support ninja
        https://bugs.webkit.org/show_bug.cgi?id=88273

        Reviewed by Tony Chang.

        This patch standardizes the search algorithm the chromium ports
        use to figure out which driver to run. We will look in a
        chromium location before a webkit location (e.g., in
        Source/WebKit/chromium/out before out/) and we will look in the
        "legacy" directory (xcodebuild) before the directory ninja uses
        (out).

        Unfortunately due to the way the test code is set up testing the
        properly requires some duplication of test code. I will fix that
        in a followup patch.

        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort):
        (ChromiumPort._static_build_path):
        (ChromiumPort._build_path):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort):
        (ChromiumLinuxPort._determine_driver_path_statically):
        * Scripts/webkitpy/layout_tests/port/chromium_linux_unittest.py:
        (ChromiumLinuxPortTest.test_build_path):
        (ChromiumLinuxPortTest):
        (ChromiumLinuxPortTest.test_driver_name_option):
        (ChromiumLinuxPortTest.path_to_image_diff):
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        (ChromiumMacPort):
        * Scripts/webkitpy/layout_tests/port/chromium_mac_unittest.py:
        (ChromiumMacPortTest.test_build_path):
        (ChromiumMacPortTest):
        (ChromiumMacPortTest.test_driver_name_option):
        (ChromiumMacPortTest.path_to_image_diff):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest.test_overrides_and_builder_names):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort):
        * Scripts/webkitpy/layout_tests/port/chromium_win_unittest.py:
        (ChromiumWinTest.test_build_path):
        (ChromiumWinTest.test_operating_system):
        (ChromiumWinTest):
        (ChromiumWinTest.test_driver_name_option):
        (ChromiumWinPortTest.path_to_image_diff):
        * Scripts/webkitpy/layout_tests/port/port_testcase.py:
        (PortTestCase.assert_build_path):

2012-06-06  Jessie Berlin  <jberlin@apple.com>

        Remove very red Windows WebKit2 testers
        https://bugs.webkit.org/show_bug.cgi?id=88452

        Reviewed by Steve Falkenburg.

        Remove the Windows 7 Release WK2 testers so that the hardware can be repurposed. We are
        need to focus on getting the WK1 testers green.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-06-06  Dirk Pranke  <dpranke@chromium.org>

        get rebaselining tools to kinda work with the skia overrides file
        https://bugs.webkit.org/show_bug.cgi?id=88456

        Reviewed by Ryosuke Niwa.

        Update rebaseline-expectations so that we read in the overrides
        when looking for tests to rebaseline, but don't read in the
        overrides when we are writing the expectations file back out.
        This prevents the overrides from getting written into the main
        file. This is kind of a hack but will have to do until we
        support multiple expectations files properly.

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineExpectations._expectations):
        (RebaselineExpectations._update_expectations_file):
        (RebaselineExpectations._tests_to_rebaseline):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_overrides_are_included_correctly):

2012-06-06  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: two manager_worker_broker_unittest tests are broken
        https://bugs.webkit.org/show_bug.cgi?id=88445

        Reviewed by Ojan Vafai.

        These tests were never updated when we removed the
        --worker-model argument, and we were passing 'inline' instead of
        1 (for the number of workers) :(. As a result we were creating
        multiprocessing queues unnecessarily and that was failing on cygwin.

        * Scripts/webkitpy/layout_tests/controllers/manager_worker_broker_unittest.py:
        (InterfaceTest.test_managerconnection_is_abstract):
        (InterfaceTest.test_workerconnection_is_abstract):

2012-06-06  Ryosuke Niwa  <rniwa@webkit.org>

        REGRESSION(r117789): "webkit-patch rebaseline-expectations" copies contents in skia_test_expectations.txt into test_expectations.txt
        https://bugs.webkit.org/show_bug.cgi?id=87406

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectations.__init__):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest._update_expectations_file):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_rebaseline_does_not_include_overrides):

2012-06-06  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: perf tests unit tests fail on chromium win
        https://bugs.webkit.org/show_bug.cgi?id=88279

        Reviewed by Ryosuke Niwa.

        I'm seeing weird failures running the unit tests in my win32
        checkout, and we don't really expect webpagereplay to work on
        win32 anyway, so I'm skipping the import of that module for now
        and adding a warning.

        * Scripts/run-perf-tests:
        * Scripts/webkitpy/performance_tests/perftest.py:

2012-06-06  Yong Li <yoli@rim.com>

        Unreviewed. Update my email address in committers.py.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-06  Robert Kroeger  <rjkroege@chromium.org>

        Add Robert Kroeger  to commiters.py
        https://bugs.webkit.org/show_bug.cgi?id=88415

        Unreviewed.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-06  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][DRT] http/tests/globalhistory testcases do not pass
        https://bugs.webkit.org/show_bug.cgi?id=82579

        Reviewed by Csaba Osztrogonác.

        DRT has provided callbacks for ewk_view "global history delegate" signals.

        * DumpRenderTree/efl/DumpRenderTree.cpp:
        (isGlobalHistoryTest): Aux function to ident global history testcase.
        (createLayoutTestController):
        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::createView):
        (DumpRenderTreeChrome::onTitleChanged): Handles also some global history testcases.
        (DumpRenderTreeChrome::onWebViewNavigatedWithData): New callback function.
        (DumpRenderTreeChrome::onWebViewServerRedirect): Ditto.
        (DumpRenderTreeChrome::onWebViewClientRedirect): Ditto.
        (DumpRenderTreeChrome::onWebViewPopulateVisitedLinks): Ditto.
        * DumpRenderTree/efl/DumpRenderTreeChrome.h:
        (DumpRenderTreeChrome):

2012-06-06  János Badics  <jbadics@inf.u-szeged.hu>

        [Qt] run-qtwebkit-tests hangs with -j1
        run-qtwebkit-tests used to hang when wk2 API tests were run with -j1 and --timeout.
        This could happen due to an uncancelled timer after results were returned. This timer was
        started only if --timeout was set.
        https://bugs.webkit.org/show_bug.cgi?id=85475

        Reviewed by Csaba Osztrogonác.

        * Scripts/run-qtwebkit-tests:
        (run_test):

2012-06-06  Michael Brüning  <michael.bruning@nokia.com>

        [Qt][WK2] Add preferredMinimumContentsWidth to the viewport info in MiniBrowser.
        https://bugs.webkit.org/show_bug.cgi?id=88327

        Reviewed by Kenneth Rohde Christiansen.

        * MiniBrowser/qt/MiniBrowser.qrc: Added contents_width.png.
        * MiniBrowser/qt/icons/contents_width.png: Added.
        * MiniBrowser/qt/qml/BrowserWindow.qml: Added button for toggling preferredMinimumContentsWidth.
        * MiniBrowser/qt/qml/ViewportInfoItem.qml: Added display of preferredMinimumContentsWidth.

2012-06-05  Jon Lee  <jonlee@apple.com>

        Buildbot fix.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg: We lose the type attribute earlier
        in the function. Store in a local variable.
        (loadBuilderConfig):

2012-06-05  Jon Lee  <jonlee@apple.com>

        Buildbot fix.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        (loadBuilderConfig):

2012-06-04  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: clean up win-specific path handling and tests
        https://bugs.webkit.org/show_bug.cgi?id=88281

        Reviewed by Adam Barth.

        There was a bunch of inconsistent logic for handling path
        conversions for win32 and cygwin paths due to us sometimes
        looking at sys.platform and sometimes using mock hosts. This
        patch cleans everything up so that we are required to pass
        PlatformInfo objects to the path module and stop trying to do
        different things when running on cygwin or win32 hosts (except
        in the path_unittest module itself).

        This may slightly reduce test coverage for the win32 code paths
        but will be a lot easier to follow and maintain.

        * Scripts/webkitpy/common/system/path.py:
        (abspath_to_uri):
        (_convert_path):
        * Scripts/webkitpy/common/system/path_unittest.py:
        (AbspathTest.platforminfo):
        (AbspathTest.test_abspath_to_uri_cygwin):
        (AbspathTest.test_abspath_to_uri_unixy):
        (AbspathTest.test_abspath_to_uri_win):
        (AbspathTest.test_abspath_to_uri_escaping_unixy):
        (AbspathTest.test_abspath_to_uri_escaping_cygwin):
        (AbspathTest.test_stop_cygpath_subprocess):
        * Scripts/webkitpy/common/system/platforminfo.py:
        (PlatformInfo.__init__):
        (PlatformInfo.is_cygwin):
        * Scripts/webkitpy/common/system/platforminfo_mock.py:
        (MockPlatformInfo.is_cygwin):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.to.show_results_html_file):
        * Scripts/webkitpy/layout_tests/port/driver.py:
        (Driver.test_to_uri):
        (Driver.uri_to_test):
        * Scripts/webkitpy/layout_tests/port/driver_unittest.py:
        (DriverTest.test_test_to_uri):
        (DriverTest.test_uri_to_test):
        * Scripts/webkitpy/layout_tests/port/mock_drt_unittest.py:
        (MockDRTPortTest.make_port):
        (MockDRTTest.input_line):
        (MockChromiumDRTTest.test_pixeltest__fails):
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/port/win.py:
        (WinPort.show_results_html_file):
        * Scripts/webkitpy/layout_tests/run_webkit_tests_integrationtest.py:
        (MainTest.test_unexpected_failures):
        (MainTest.test_results_directory_absolute):
        (MainTest.test_results_directory_default):
        (MainTest.test_results_directory_relative):

2012-06-05  Jon Lee  <jonlee@apple.com>

        Workaround buildbot bug when merging build requests.
        https://bugs.webkit.org/show_bug.cgi?id=88158

        Reviewed by Mark Rowe.

        For expediency, we still want testers to pick the latest build to test, but to ensure
        that the builders are reporting the correct revision number, we should let the building bots
        run as they normally would. That is, the builder picks the oldest revision, and merges
        subsequent requests. Because merged requests get appended to the list of changes for a given
        build, the last change in that list is also the latest change. When we used pickLatestBuild
        for the builders, this was not the case (it would always report the penultimate change).

        http://trac.buildbot.net/ticket/2309 is tracking the buildbot bug.

        * BuildSlaveSupport/build.webkit.org-config/config.json: Remove the mergeRequests override
        for all Apple builders.
        * BuildSlaveSupport/build.webkit.org-config/master.cfg: Have only non-building bots pick
        the latest build to run.
        (loadBuilderConfig):

2012-06-05  Jessie Berlin  <jberlin@apple.com>

        [Win] DumpRenderTree should call resetInternalsObject
        https://bugs.webkit.org/show_bug.cgi?id=88346

        Reviewed by Simon Fraser.

        Invoke it on Windows in the same place it is invoked on Mac.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):

2012-06-05  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [GTK] Fix two more memory leaks in DRT
        https://bugs.webkit.org/show_bug.cgi?id=88255

        Reviewed by Martin Robinson.

        Fixed memory leaks in GTK's DRT code.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (dumpHistoryItem): webkit_web_history_item_get_target() returns a
        g_strdup()'d string. So, use GOwnPtr to manage memory automatically.
        * DumpRenderTree/gtk/PixelDumpSupportGtk.cpp:
        (createBitmapContextFromWebView): Free the cairo surface.

2012-06-05  Allan Sandfeld Jensen  <allan.jensen@nokia.com>

        [Qt] Building when a top directory is named Source
        https://bugs.webkit.org/show_bug.cgi?id=77727

        Reviewed by Tor Arne Vestbø.

        Change regex to only replace the last instance of OUT_PWD.

        * qmake/mkspecs/features/default_pre.prf:

2012-06-05  Dongwoo Im  <dw.im@samsung.com>

        Add 'isProtocolHandlerRegistered' and 'unregisterProtocolHandler'.
        https://bugs.webkit.org/show_bug.cgi?id=73176

        Reviewed by Adam Barth.

        Two more APIs are added in Custom Scheme Handler specification.
        http://dev.w3.org/html5/spec/Overview.html#custom-handlers
        One is 'isProtocolHandlerRegistered' to query whether the specific URL
        is registered or not.
        The other is 'unregisterProtocolHandler' to remove the registered URL.

        * Scripts/webkitperl/FeatureList.pm: Add a macro 'ENABLE_CUSTOM_SCHEME_HANDLER'.

2012-06-05  Mario Sanchez Prada  <msanchez@igalia.com>

        [GTK][WK2] Implement API for Geolocation permission requests in the GTK port
        https://bugs.webkit.org/show_bug.cgi?id=83879

        Reviewed by Carlos Garcia Campos.

        Make minibrowser connect to the new 'permission requests' signal
        to allow users handle the Geolocation permission requests.

        * MiniBrowser/gtk/BrowserWindow.c:
        (geolocationRequestDialogCallback): Callback for the dialog asking
        the user for allowing or not geolocation permission requests.
        (webViewDecidePermissionRequest): Launch a dialog to ask the user
        whether to allow or deny geolocation permission requests.
        (browserWindowConstructed): Connect to 'permission-request' signal.

2012-06-04  Chase Phillips  <cmp@google.com>

        Make a builder group support+expect multiple loads.
        https://bugs.webkit.org/show_bug.cgi?id=88260

        Change BuilderGroup to allow expecting multiple
        loads.  This allows merging results for a given set
        of builders into one group.

        Add a test that verifies that the group count
        increments correctly based on successful and failed
        list loads.

        Reviewed by Ojan Vafai.

        * TestResultServer/static-dashboards/builders.js:
        (BuilderGroup):
        (BuilderGroup.prototype.setbuilder):
        (BuilderGroup.prototype.append):
        (BuilderGroup.prototype.loaded):
        (requestBuilderList.xhr.onload):
        (requestBuilderList.xhr.onerror):
        (onErrorLoadingBuilderList):
        (loadBuildersList):
        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js:
        (test):
        * TestResultServer/static-dashboards/run-unittests.html:

2012-06-04  Ryosuke Niwa  <rniwa@webkit.org>

        Python test fix attempt for Chromium Windows.

        * Scripts/webkitpy/layout_tests/port/driver.py:
        (Driver.uri_to_test):

2012-06-04  Hugo Parente Lima  <hugo.lima@openbossa.org>

        Turn LEGACY_VIEWPORT_ADAPTION USE flag into an ENABLE flag.
        https://bugs.webkit.org/show_bug.cgi?id=88243

        Reviewed by Adam Barth.

        * qmake/mkspecs/features/features.prf:

2012-06-04  Dirk Pranke  <dpranke@chromium.org>

        webkitpy.layout_tests.port.server_process_unittest.TestServerProcess.test_basic is flaky
        https://bugs.webkit.org/show_bug.cgi?id=88280

        Unreviewed, build fix.

        * Scripts/webkitpy/layout_tests/port/server_process_unittest.py:
        (TestServerProcess.test_basic):

2012-06-04  Dirk Pranke  <dpranke@chromium.org>

        test-webkitpy is hanging under cygwin
        https://bugs.webkit.org/show_bug.cgi?id=88269

        Reviewed by Ryosuke Niwa.

        The 'multiprocessing' module doesn't work correctly under Cygwin yet,
        so we need to skip any tests that use it.

        * Scripts/webkitpy/common/system/executive.py:
        (Executive.run_in_parallel):
        * Scripts/webkitpy/common/system/executive_unittest.py:
        (ExecutiveTest.test_run_in_parallel):

2012-06-04  Dirk Pranke  <dpranke@chromium.org>

        test-webkitpy is failing on win32 after r115054
        https://bugs.webkit.org/show_bug.cgi?id=88264

        Reviewed by Ryosuke Niwa.

        The failing http_server test was improperly suppressed (the
        tuple was missing a comma, and so wasn't a tuple at all, just a
        string) and so we were skipping *all* tests on win32. The right
        way to skip a single test is to disable it inside the test
        itself.

        * Scripts/webkitpy/layout_tests/servers/http_server_unittest.py:
        (TestHttpServer.test_start_cmd):
        * Scripts/webkitpy/test/test_finder.py:
        (TestFinder._default_names):
        * Scripts/webkitpy/test/main.py:
        (Tester.run): Add error message if we don't find any tests to run.
        * Scripts/webkitpy/test/main_unittest.py:
            

2012-06-04  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [GTK] Memory leaks in AccessibilityUIElementGtk.cpp
        https://bugs.webkit.org/show_bug.cgi?id=88215

        Reviewed by Martin Robinson.

        Fixed memory leaks in AccessibilityUIElement by using GOwnPtr
        for newly allocated strings.

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (attributeSetToString):
        (AccessibilityUIElement::allAttributes):

2012-06-04  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [GTK] Memory leaks in DumpRenderTree.cpp
        https://bugs.webkit.org/show_bug.cgi?id=88213

        Reviewed by Martin Robinson.

        Fixed memory leaks in DumpRenderTree.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (appendString): Accepts const gchar* as the second argument.
        (dumpFramesAsText): Free the string returned by g_strdup_printf().
        (dumpHistoryItem): Free the string returned by g_uri_parse_scheme().

2012-06-04  David Dorwin  <ddorwin@chromium.org>

        Enable Chromium media player to instantiate a plugin
        https://bugs.webkit.org/show_bug.cgi?id=87399

        Reviewed by Kent Tamura.

        Adds WebHelperPlugin, an off-screen widget that contains an <object> tag.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::createPopupMenu):

2012-06-04  Mario Sanchez Prada  <msanchez@igalia.com>

        [GTK][WK2] Implement geolocation provider for the GTK port
        https://bugs.webkit.org/show_bug.cgi?id=83877

        Reviewed by Carlos Garcia Campos.

        * gtk/generate-gtkdoc:
        (get_webkit2_options): Ignore WebKitGeolocationProvider files.

2012-06-04  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL] Reset "WebKitTabToLinksPreferenceKey" in DumpRenderTreeChrome::resetDefaultsToConsistentValues
        https://bugs.webkit.org/show_bug.cgi?id=87668

        Reviewed by Ryosuke Niwa.

        Layout test controller "WebKitTabToLinksPreferenceKey" setting should be reset to false
        otherwise LayoutTests/fast/html/tab-order.html is failing as it has a link inside the test description which might 
        be included in focus chain (if "WebKitTabToLinksPreferenceKey" setting is set to true). 

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):

2012-06-04  Tomasz Morawski  <t.morawski@samsung.com>

        [EFL] Refactor ewk_view_context_paint code.
        https://bugs.webkit.org/show_bug.cgi?id=85588

        Reviewed by Hajime Morita.

        * DumpRenderTree/efl/CMakeLists.txt: Added include directory.

2012-06-04  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Compilation warning in DumpRenderTreeView.cpp on 64-Bit
        https://bugs.webkit.org/show_bug.cgi?id=87869

        Reviewed by Andreas Kling.

        Replace %lld by PRId64 macro to print an int64_t value and silent a
        compilation warning on 64-Bit.

        * DumpRenderTree/efl/DumpRenderTreeView.cpp:
        (onExceededApplicationCacheQuota):

2012-06-03  Varun Jain  <varunjain@google.com>

        [chromium] Add new gesture type (two finger tap) that triggers context menu.
        https://bugs.webkit.org/show_bug.cgi?id=88173

        Reviewed by Adam Barth.

        * DumpRenderTree/chromium/EventSender.cpp:
        (EventSender::EventSender):
        (EventSender::gestureTwoFingerTap):
        (EventSender::gestureEvent):
        * DumpRenderTree/chromium/EventSender.h:
        (EventSender):

2012-06-02  Zeno Albisser  <zeno@webkit.org>

        Fix and enable WebGL for WebKit2 on Qt.
        https://bugs.webkit.org/show_bug.cgi?id=86214

        Enable WebGL by default for Qt MiniBrowser.

        Reviewed by Noam Rosenthal.

        * MiniBrowser/qt/qml/BrowserWindow.qml:

2012-06-02  Ryosuke Niwa  <rniwa@webkit.org>

        Teach svn-apply how to apply changes in test_expectations.txt to TestExpectations
        https://bugs.webkit.org/show_bug.cgi?id=88164

        Reviewed by Kentaro Hara.

        Just like r74856, adjust git/svn headers from test_expectations.txt to TestExpectations.
        Also replace all occurrences of /test_expectations.txt: by /TestExpectations: in change log entries.

        * Scripts/VCSUtils.pm:
        (adjustPathForRecentRenamings):
        (fixChangeLogPatch):

2012-06-01  Ryosuke Niwa  <rniwa@webkit.org>

        Rename test_expectations.txt to TestExpectations
        https://bugs.webkit.org/show_bug.cgi?id=86690

        Reviewed by Dirk Pranke.

        Make webkitpy aware of both test_expectations.txt and TestExpectations while we rename files.
        We can the code to read test_expectations.txt once we've successfully transitioned.

        * Scripts/webkitpy/layout_tests/models/test_expectations.py:
        (TestExpectationParser._check_path_does_not_exist):
        (TestExpectationParser._tokenize):
        (TestExpectations): Removed TEST_LIST, which is not used anywhere.
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.path_to_test_expectations_file): Moved from WebKitPort and ChromiumPort. Returns the path to
        test_expectations.txt if one exists and the path to TestExpectations otherwise.
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        (PortTest.test_virtual_methods): path_to_test_expectations_file and test_expectations are no longer
        virtual.
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort.path_from_chromium_base):
        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort.test_expectations):
        * Scripts/webkitpy/layout_tests/port/test.py:
        (add_unit_tests_to_mock_filesystem): Use TestExpectations instead of test_expectations.txt.
        (TestPort.__init__):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort.baseline_search_path):
        (WebKitPort.test_expectations):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py: Added some test cases. We should move these
        tests to base as a follow up.
        (WebKitPortTest.test_path_to_test_expectations_file):
        (test_test_expectations):
        (test_legacy_test_expectations):
        * Scripts/webkitpy/style/checker.py:
        (CheckerDispatcher.should_skip_without_warning): Replace the check for legacy drt_expectations.txt
        with one for TestExpectations.
        * Scripts/webkitpy/style/checkers/test_expectations.py:
        (TestExpectationsChecker): Accept both test_expectations.txt and TestExpectations in warning outputs.
        * Scripts/webkitpy/style/checkers/test_expectations_unittest.py:
        (TestExpectationsTestCase._expect_port_for_expectations_path): Test both TestExpectations and
        test_expectations.txt.
        (TestExpectationsTestCase.test_determine_port_from_expectations_path):
        (TestExpectationsTestCase.assert_lines_lint):
        * Scripts/webkitpy/tool/commands/queries.py:
        (PrintExpectations.__init__):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineExpectations):
        * Scripts/webkitpy/tool/steps/commit.py:
        (Commit._check_test_expectations):
        * Scripts/webkitpy/tool/steps/commit_unittest.py:
        (CommitTest._test_check_test_expectations): Extracted from test_check_test_expectations.
        (CommitTest.test_check_test_expectations): For TestExpectations.
        (CommitTest.test_check_legacy_test_expectations): For test_expectations.txt
        * TestResultServer/static-dashboards/dashboard_base.js:
        (requestExpectationsFile): Look for TestExpectations first, and fallback to test_expectations.txt.
        Error only when neither exists.
        * TestResultServer/static-dashboards/flakiness_dashboard.js:
        (processMissingAndExtraExpectations):
        (htmlForTestsWithExpectationsButNoFailures):
        * TestResultServer/static-dashboards/flakiness_dashboard_unittests.js:

2012-06-01  Xianzhu Wang  <wangxianzhu@chromium.org>

        Remove dependency from ImageDiff to WTF
        https://bugs.webkit.org/show_bug.cgi?id=88147

        Reviewed by Adam Barth.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-06-01  Dirk Pranke  <dpranke@chromium.org>

        NRWT seems to leak (more?) temp dirs
        https://bugs.webkit.org/show_bug.cgi?id=88126

        Re-land r119297 with chromium fix (weren't calling the
        super() method if not in --test-shell mode in start().
        Add unit tests to chromium_unittest as well to check.

        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumDriver.start):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitDriver.__del__):
        (WebKitDriver._start):
        (WebKitDriver.run_test):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (WebKitDriverTest.test_check_for_driver_crash):
        (WebKitDriverTest.test_stop_cleans_up_properly):
        (WebKitDriverTest):
        (WebKitDriverTest.test_two_starts_cleans_up_properly):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumDriverTest.test_stop_cleans_up_properly):
        (ChromiumDriverTest.test_two_starts_cleans_up_properly):

2012-06-01  Tim Horton  <timothy_horton@apple.com>

        Lots of "failed download-built-product" on Apple bots
        https://bugs.webkit.org/show_bug.cgi?id=88158

        Reviewed by Jessie Berlin.
        
        Disable mergeRequests on all Apple builders. This is a speculative fix.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-06-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119297.
        http://trac.webkit.org/changeset/119297
        https://bugs.webkit.org/show_bug.cgi?id=88156

        May have broken Chromium bots (Requested by rniwa on #webkit).

        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitDriver.__del__):
        (WebKitDriver.run_test):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (WebKitDriverTest.test_check_for_driver_crash):
        (WebKitDriverTest.test_stop_cleans_up_properly):

2012-06-01  Dirk Pranke  <dpranke@chromium.org>

        nrwt seems to leak tmpdirs
        https://bugs.webkit.org/show_bug.cgi?id=88126

        Reviewed by Ojan Vafai.

        Fix leak possibly introduced in r118979 - we now will
        make sure we clean up any stale temp directories during the
        start routine and attempt to clean up again in __del__. It
        turns out that asserting in __del__ logs a message but is
        caught by the runtime, so it's mostly useless.

        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitDriver.__del__):
        (WebKitDriver._start):
        (WebKitDriver.run_test):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (WebKitDriverTest.test_check_for_driver_crash):
        (WebKitDriverTest.test_stop_cleans_up_properly):
        (WebKitDriverTest):
        (WebKitDriverTest.test_two_starts_cleans_up_properly):

2012-06-01  Michael Saboff  <msaboff@apple.com>

        WebFrame::_stringByEvaluatingJavaScriptFromString methods don't handle nil string
        https://bugs.webkit.org/show_bug.cgi?id=88109

        Reviewed by Geoffrey Garen.

        Additional test case.

        * TestWebKitAPI/Tests/mac/StringByEvaluatingJavaScriptFromString.mm:
        (TestWebKitAPI::TEST):

2012-06-01  Simon Hausmann  <simon.hausmann@nokia.com>

        [Qt] Use -Werror only in developer builds

        Rubber-stamped by Tor Arne Vestbø.

        In production builds -Werror with custom toolchains and wierd system
        headers, -Werror is of no use and just creates confusion. So use it
        only if Qt is configured with -developer-build.

        * qmake/mkspecs/features/default_pre.prf: Move qt_developer_build determination here...
        * qmake/mkspecs/features/unix/default_post.prf: ... so that we can use it here to do -Werror
        only if qt_developer_build is set.

2012-06-01  Jochen Eisinger  <jochen@chromium.org>

        [watchlist] Add myself to loader and v8 bindings changes
        https://bugs.webkit.org/show_bug.cgi?id=88112

        Reviewed by Adam Barth.

        * Scripts/webkitpy/common/config/watchlist:

2012-06-01  Jacky Jiang  <zhajiang@rim.com>

        Adding Jacky Jiang to committers.py
        https://bugs.webkit.org/show_bug.cgi?id=88122

        Reviewed by Rob Buis.

        Adding myself to committers.py as a Committer.

        * Scripts/webkitpy/common/config/committers.py:

2012-06-01  Jessie Berlin  <jberlin@apple.com>

        Fix Windows build.

        * TestWebKitAPI/Tests/WebKit2/MouseMoveAfterCrash.cpp:

2012-06-01  Jessie Berlin  <jberlin@apple.com>

        Windows WK2 MouseMoveAfterCrash API test failing
        https://bugs.webkit.org/show_bug.cgi?id=69982

        Disable the test on Windows to get the bots greener.

        * TestWebKitAPI/Tests/WebKit2/MouseMoveAfterCrash.cpp:
        (TestWebKitAPI::TEST):

2012-06-01  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL port does not enable WEB_INTENTS_TAG flag
        https://bugs.webkit.org/show_bug.cgi?id=86866

        Reviewed by Adam Barth.

        Catch new "intent,service,register" signal on the frame and print out
        information about the Web Intent service in EFL's DumpRenderTree.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::createView):
        (DumpRenderTreeChrome::onFrameCreated):
        (DumpRenderTreeChrome::onFrameIntentServiceRegistration):
        * DumpRenderTree/efl/DumpRenderTreeChrome.h:
        (DumpRenderTreeChrome):

2012-06-01  Martin Robinson  <mrobinson@igalia.com>

        The ChangeLog parser cannot handle reviewers with initials in their name
        https://bugs.webkit.org/show_bug.cgi?id=87864

        Reviewed by Ryosuke Niwa.

        Add support in the ChangeLog parser for reviewer names that have
        initials in them.

        * Scripts/webkitpy/common/checkout/changelog.py:
        (ChangeLogEntry): Add a new group of regular expressions that need a backreference
        in the replacement string. This allows for matching the word characters before a
        period, without totally throwing them away.
        (ChangeLogEntry._parse_reviewer_text): Use the new regular expression.
        * Scripts/webkitpy/common/checkout/changelog_unittest.py:
        (test_fuzzy_reviewer_match_initial): Add a test for a reviewer name that has an initial.

2012-06-01  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL's LayoutTestController needs to implement deliverWebIntent
        https://bugs.webkit.org/show_bug.cgi?id=86865

        Reviewed by Adam Barth.

        Add deliverWebIntent method to LayoutTestController and provide
        implementation for EFL port.

        * DumpRenderTree/LayoutTestController.cpp:
        (deliverWebIntentCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/blackberry/LayoutTestControllerBlackBerry.cpp:
        (LayoutTestController::deliverWebIntent):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::deliverWebIntent):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::deliverWebIntent):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::deliverWebIntent):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::deliverWebIntent):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::deliverWebIntent):

2012-06-01  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Make Qt Creator aware of files in webkitpy/perl for easy editing

        Reviewed by Simon Hausmann.

        * Tools.pro:

2012-06-01  Ryosuke Niwa  <rniwa@webkit.org>

        Add public page loading performance tests using web-page-replay
        https://bugs.webkit.org/show_bug.cgi?id=84008

        Reviewed by Dirk Pranke.

        Add the primitive implementation of replay performance tests. We use web-page-replay (http://code.google.com/p/web-page-replay/)
        to cache data locally. Each replay test is represented by a text file with .replay extension containing a single URL.
        To hash out bugs and isolate them from the rest of performance tests, replay tests are hidden behind --replay flag.

        Run "run-perf-tests --replay PerformanceTests/Replay" after changing the system network preference to forward HTTP and HTTPS requests
        to localhost:8080 and localhost:8443 respectively (i.e. configure the system as if there are HTTP proxies at ports 8080 and 8443)
        excluding: *.webkit.org, *.googlecode.com, *.sourceforge.net, pypi.python.org, and www.adambarth.com for thirdparty Python dependencies.
        run-perf-tests starts web-page-replay, which provides HTTP proxies at ports 8080 and 8443 to replay pages.

        * Scripts/webkitpy/layout_tests/port/driver.py:
        (Driver.is_external_http_test): Added.
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitDriver._command_from_driver_input): Allow test names that starts with http:// or https://.
        * Scripts/webkitpy/performance_tests/perftest.py:
        (PerfTest.__init__): Takes port.
        (PerfTest.prepare): Added. Overridden by ReplayPerfTest.
        (PerfTest):
        (PerfTest.run): Calls run_single.
        (PerfTest.run_single): Extracted from PageLoadingPerfTest.run.
        (ChromiumStylePerfTest.__init__):
        (PageLoadingPerfTest.__init__):
        (PageLoadingPerfTest.run):
        (ReplayServer): Added. Responsible for starting and stopping replay.py in the web-page-replay.
        (ReplayServer.__init__):
        (ReplayServer.wait_until_ready): Wait until port 8080 is ready. I have tried looking at the piped output from web-page-replay
        but it caused a dead lock on some web pages.
        (ReplayServer.stop):
        (ReplayServer.__del__):
        (ReplayPerfTest):
        (ReplayPerfTest.__init__):
        (ReplayPerfTest._start_replay_server):
        (ReplayPerfTest.prepare): Creates test.wpr and test-expected.png to cache the page when a replay test is ran for the first time.
        The subsequent runs of the same test will just use test.wpr.
        (ReplayPerfTest.run_single):
        (PerfTestFactory):
        (PerfTestFactory.create_perf_test):
        * Scripts/webkitpy/performance_tests/perftest_unittest.py:
        (MainTest.test_parse_output):
        (MainTest.test_parse_output_with_failing_line):
        (TestPageLoadingPerfTest.test_run):
        (TestPageLoadingPerfTest.test_run_with_bad_output):
        (TestReplayPerfTest):
        (TestReplayPerfTest.ReplayTestPort):
        (TestReplayPerfTest.ReplayTestPort.__init__):
        (TestReplayPerfTest.ReplayTestPort.__init__.ReplayTestDriver):
        (TestReplayPerfTest.ReplayTestPort.__init__.ReplayTestDriver.run_test):
        (TestReplayPerfTest.ReplayTestPort._driver_class):
        (TestReplayPerfTest.MockReplayServer):
        (TestReplayPerfTest.MockReplayServer.__init__):
        (TestReplayPerfTest.MockReplayServer.stop):
        (TestReplayPerfTest._add_file):
        (TestReplayPerfTest._setup_test):
        (TestReplayPerfTest.test_run_single):
        (TestReplayPerfTest.test_run_single.run_test):
        (TestReplayPerfTest.test_run_single_fails_without_webpagereplay):
        (TestReplayPerfTest.test_prepare_fails_when_wait_until_ready_fails):
        (TestReplayPerfTest.test_run_single_fails_when_output_has_error):
        (TestReplayPerfTest.test_run_single_fails_when_output_has_error.run_test):
        (TestReplayPerfTest.test_prepare):
        (TestReplayPerfTest.test_prepare.run_test):
        (TestReplayPerfTest.test_prepare_calls_run_single):
        (TestReplayPerfTest.test_prepare_calls_run_single.run_single):
        (TestPerfTestFactory.test_regular_test):
        (TestPerfTestFactory.test_inspector_test):
        (TestPerfTestFactory.test_page_loading_test):
        * Scripts/webkitpy/performance_tests/perftestsrunner.py:
        (PerfTestsRunner):
        (PerfTestsRunner._parse_args): Added --replay flag to enable replay tests.
        (PerfTestsRunner._collect_tests): Collect .replay files when replay tests are enabled.
        (PerfTestsRunner._collect_tests._is_test_file):
        (PerfTestsRunner.run): Exit early if one of calls to prepare() fails.
        * Scripts/webkitpy/performance_tests/perftestsrunner_unittest.py:
        (create_runner):
        (run_test):
        (_tests_for_runner):
        (test_run_test_set):
        (test_run_test_set_kills_drt_per_run):
        (test_run_test_pause_before_testing):
        (test_run_test_set_for_parser_tests):
        (test_run_test_set_with_json_output):
        (test_run_test_set_with_json_source):
        (test_run_test_set_with_multiple_repositories):
        (test_run_with_upload_json):
        (test_upload_json):
        (test_upload_json.MockFileUploader.upload_single_text_file):
        (_add_file):
        (test_collect_tests):
        (test_collect_tests_with_multile_files):
        (test_collect_tests_with_multile_files.add_file):
        (test_collect_tests_with_skipped_list):
        (test_collect_tests_with_page_load_svg):
        (test_collect_tests_should_ignore_replay_tests_by_default):
        (test_collect_tests_with_replay_tests):
        (test_parse_args):
        * Scripts/webkitpy/thirdparty/__init__.py: Added the dependency for web-page-replay version 1.1.1.
        (AutoinstallImportHook.find_module):
        (AutoinstallImportHook._install_webpagereplay):

2012-05-31  Yaron Friedman  <yfriedman@chromium.org>

        Support building the Android port of chromium with Ninja
        https://bugs.webkit.org/show_bug.cgi?id=87545

        Reviewed by Adam Barth.

        Ensures that shared libraries are looked up in a generator-agnostic
        way and that output is placed in the correct directory.

        Depends on http://codereview.chromium.org/10386188/

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:

2012-05-31  Ryosuke Niwa  <rniwa@webkit.org>

        [Chromium] Chromium DRT should be able to load external resources
        https://bugs.webkit.org/show_bug.cgi?id=87893

        Reviewed by Dirk Pranke.

        Allow external resources to be loaded when the main frame's URL is also an external resource.
        This change is analogous to r118231 for Mac port.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (blockRequest):
        (isLocalhost):
        (hostIsUsedBySomeTestsToGenerateError):
        (WebViewHost::willSendRequest):

2012-05-31  Anders Carlsson  <andersca@apple.com>

        Build fixes.

        Disable the C++11 extensions warning.

        * DumpRenderTree/mac/Configurations/Base.xcconfig:
        * TestWebKitAPI/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/Base.xcconfig:

2012-05-31  Alexey Proskuryakov  <ap@apple.com>

        [WK2] window.internals settings are not reset between tests
        https://bugs.webkit.org/show_bug.cgi?id=87783

        Reviewed by Mihai Parparita.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::done): Call resetAfterTest().

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::prepare): Renamed from "reset" for clarity.
        (WTR::InjectedBundlePage::resetAfterTest): Added a function that resets internals.
        This needs to be done after a tets, because the code assumes that there is an object
        with this name in global scope.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2012-05-31  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][DRT] EFL's DRT navigation_policy_decision implementation
        https://bugs.webkit.org/show_bug.cgi?id=85006

        Reviewed by Tor Arne Vestbø.

        Added navigation_policy_decision implementation for DumpRenderTreeView.
        Added LayoutTestController::setCustomPolicyDelegate implementation.
        Modified LayoutTestController::waitForPolicyDelegate.

        * DumpRenderTree/efl/DumpRenderTree.cpp:
        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):
        * DumpRenderTree/efl/DumpRenderTreeEfl.h:
        * DumpRenderTree/efl/DumpRenderTreeView.cpp:
        (navigationTypeToString): aux function
        (onNavigationPolicyDecision): navigation_policy_decision implementation
        (drtViewAdd):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::setCustomPolicyDelegate):
        (LayoutTestController::waitForPolicyDelegate):

2012-05-31  Jussi Kukkonen  <jussi.kukkonen@intel.com>

        [EFL][DRT] LayoutTestController does not implement clearApplicationCacheForOrigin
        https://bugs.webkit.org/show_bug.cgi?id=86195

        Reviewed by Gustavo Noronha Silva.

        Implement clearApplicationCacheForOrigin in EFL
        LayoutTestController.

        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::clearApplicationCacheForOrigin):

2012-05-31  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Simplify QT_VERSION_CHECKS for Qt5 by introducing HAVE(QT5)
        https://bugs.webkit.org/show_bug.cgi?id=87955

        Reviewed by Simon Hausmann.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        * DumpRenderTree/qt/EventSenderQt.cpp:
        * DumpRenderTree/qt/QtInitializeTestFonts.cpp:
        * DumpRenderTree/qt/main.cpp:
        * QtTestBrowser/cookiejar.cpp:
        * QtTestBrowser/launcherwindow.cpp:
        * WebKitTestRunner/InjectedBundle/qt/LayoutTestControllerQt.cpp:
        * qmake/mkspecs/features/default_post.prf:

2012-05-31  Zoltan Horvath  <zoltan@webkit.org>

        [Qt] Don't enforce the version of libpng for the config test when passing the option to the linker

        Rubber-stamped by Kenneth Rohde Christiansen.

        * qmake/config.tests/libpng/libpng.pro:

2012-05-30  Peter Beverloo  <peter@chromium.org>

        [Chromium] Automatically install 64-bit linker for Android
        https://bugs.webkit.org/show_bug.cgi?id=79780

        Reviewed by Adam Barth.

        Change the update-webkit-chromium script to check whether the 64-bit
        linker needs to be installed as part of the update process. The actual
        code for doing these checks and "installing" it has been added to the
        webkitdirs.pm script.

        The linker itself is part of the third_party/aosp repository, which
        will be pulled in through the DEPS change.

        * Scripts/update-webkit-chromium:
        * Scripts/webkitdirs.pm:
        (chromiumInstall64BitAndroidLinkerIfNeeded):
        (chromiumReplaceAndroidLinkerIfNeeded):

2012-05-30  Stephanie Lewis  <slewis@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=87803
        Layout tests often fail trying to stat nonexistent logs 

        Reviewed by Dirk Pranke.

        CrashReporter removes logs using a heuristic to conserve space.  Wrap a 
        try/catch block around accessing the logs as a precaution.

        * Scripts/webkitpy/common/system/crashlogs.py:
        (CrashLogs._find_newest_log_darwin):

2012-05-30  Gavin Peters  <gavinp@chromium.org>

        Add a LayoutTest for prerender remove after stop.
        https://bugs.webkit.org/show_bug.cgi?id=87860

        These very boring mocks in DumpRenderTree mean that the basic Prerendering API
        can be tested by LayoutTests now.

        Reviewed by Adam Barth.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/MockWebPrerenderingSupport.cpp: Added.
        (MockWebPrerenderingSupport::MockWebPrerenderingSupport):
        (MockWebPrerenderingSupport::~MockWebPrerenderingSupport):
        (MockWebPrerenderingSupport::add):
        (MockWebPrerenderingSupport::cancel):
        (MockWebPrerenderingSupport::abandon):
        * DumpRenderTree/chromium/MockWebPrerenderingSupport.h: Added.
        (MockWebPrerenderingSupport):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::initialize):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::willAddPrerender):
        (WebViewHost::setWebWidget):
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost):

2012-05-30  Stephanie Lewis  <slewis@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=87717
        Unresponsive WebProcesses can be mistaken for WebProcess crashes.

        Reviewed by Dirk Pranke.

        Change the error message from #CRASHED to #UNRESPONSIVE PROCESS
        If there isn't a crash log found for the process add a message saying
        the process was unresponsive.

        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitDriver.__init__):
        (WebKitDriver._check_for_driver_crash):
        (WebKitDriver.run_test):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (WebKitDriverTest.test_check_for_driver_crash.assert_crash):
        (WebKitDriverTest):
        (WebKitDriverTest.test_check_for_driver_crash):
        * WebKitTestRunner/TestController.cpp:
        (WTR):
        (WTR::TestController::runTest):

2012-05-30  Stephanie Lewis  <slewis@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=87714
        Mac crash logs can take a really long time to be written out.

        Reviewed by Dirk Pranke.

        Make a second pass looking for crash logs after the tests have completed running.

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (use_trac_links_in_results_html):
        (Manager.run):
        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.repository_paths):
        (Port.look_for_new_crash_logs):
        * Scripts/webkitpy/layout_tests/port/mac.py:
        (MacPort.look_for_new_crash_logs):
        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:
        (test_get_crash_log):
        (test_look_for_new_crash_logs):
        (test_look_for_new_crash_logs.fake_time_cb):

2012-05-30  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Fix 2.9 issues with c_str() type by using the wx fprintf wrapper.

        * DumpRenderTree/wx/DumpRenderTreeWx.cpp:
        (LayoutWebViewEventHandler::OnAlertEvent):
        (LayoutWebViewEventHandler::OnConfirmEvent):
        (LayoutWebViewEventHandler):
        (LayoutWebViewEventHandler::OnPromptEvent):
        (LayoutWebViewEventHandler::OnConsoleMessageEvent):
        (LayoutWebViewEventHandler::OnReceivedTitleEvent):

2012-05-30  Ojan Vafai  <ojan@chromium.org>

        Only give lint errors for -expected.png png files that lack a checksum
        https://bugs.webkit.org/show_bug.cgi?id=87875

        Reviewed by Tony Chang.

        We have other pngs in the tree, e.g. for the inspector, that legitimately
        lack a checksum.

        * Scripts/webkitpy/style/checkers/png.py:
        (PNGChecker.check):
        * Scripts/webkitpy/style/checkers/png_unittest.py:
        (PNGCheckerTest.test_check):

2012-05-30  Dirk Pranke  <dpranke@chromium.org>

        nrwt: seems to leak temp dirs
        https://bugs.webkit.org/show_bug.cgi?id=87795

        Reviewed by Ojan Vafai.

        There appears to be a bug where the chromium bots are creating
        temporary directories and not cleaning them up that started
        after the switch to WebKitDriver. It's possible that __del__
        wasn't getting called in a timely manner (or at all), and it's
        generally bad style to rely on __del__ being called, so this
        code changes things so that we create a temp dir in
        driver.start() and remove it in driver.stop(). We could be
        paranoid and leave the __del__ code in, but there doesn't seem
        to be much advantage to it. If there are bugs that result in
        drivers being started but not stopped, we have other problems.

        * Scripts/webkitpy/common/system/filesystem_mock.py:
        (MockFileSystem.__init__):
        (MockFileSystem._mktemp):
        (MockFileSystem.mkdtemp):
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitDriver.__init__):
        (WebKitDriver._start):
        (WebKitDriver.stop):
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        (WebKitDriverTest.test_check_for_driver_crash):
        (WebKitDriverTest):
        (WebKitDriverTest.test_creating_a_port_does_not_write_to_the_filesystem):
        (WebKitDriverTest.test_stop_cleans_up_properly):

2012-05-30  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL's DRT should print the number of MessagePorts for new each new intent
        https://bugs.webkit.org/show_bug.cgi?id=86841

        Reviewed by Adam Barth.

        Print the number of MessagePorts for each new intent in EFL's DRT.
        This output is expected by several Web Intents test cases.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::onFrameIntentNew):

2012-05-30  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Unreviewed build fix after removal of setJavaScriptProfilingEnabled.

        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:

2012-05-30  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Ewk_Intent_Request's postResult/postFailure should take serialized script values in argument
        https://bugs.webkit.org/show_bug.cgi?id=87829

        Reviewed by Adam Barth.

        EFL's LayoutTestController now makes uses of the new helper method in
        DumpRenderTreeSupportEfl in order to send the intent response. This is
        now needed because the Ewk_Intent_Request postResult / postFailure
        methods were made private.

        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::sendWebIntentResponse):

2012-05-30  Xueqing Huang  <huangxueqing@baidu.com>

        eventSender.beginDragWithFiles should be implemented in Windows, which blocked drag and drop related tests.
        https://bugs.webkit.org/show_bug.cgi?id=86296

        Reviewed by Tony Chang.

        * DumpRenderTree/win/DRTDataObject.cpp: Added.
        (cfHDropFormat):
        (cfFileNameWFormat):
        (cfUrlWFormat):
        (WCEnumFormatEtc):
        (WCEnumFormatEtc::WCEnumFormatEtc):
        (WCEnumFormatEtc::QueryInterface):
        (WCEnumFormatEtc::AddRef):
        (WCEnumFormatEtc::Release):
        (WCEnumFormatEtc::Next):
        (WCEnumFormatEtc::Skip):
        (WCEnumFormatEtc::Reset):
        (WCEnumFormatEtc::Clone):
        (DRTDataObject::createInstance):
        (DRTDataObject::DRTDataObject):
        (DRTDataObject::~DRTDataObject):
        (DRTDataObject::QueryInterface):
        (DRTDataObject::AddRef):
        (DRTDataObject::Release):
        (DRTDataObject::GetData):
        (DRTDataObject::GetDataHere):
        (DRTDataObject::QueryGetData):
        (DRTDataObject::GetCanonicalFormatEtc):
        (DRTDataObject::SetData):
        (DRTDataObject::CopyMedium):
        (DRTDataObject::EnumFormatEtc):
        (DRTDataObject::DAdvise):
        (DRTDataObject::DUnadvise):
        (DRTDataObject::EnumDAdvise):
        (DRTDataObject::clearData):
        * DumpRenderTree/win/DRTDataObject.h: Added.
        (DRTDataObject):
        * DumpRenderTree/win/DRTDropSource.cpp: Added.
        (DRTDropSource::DRTDropSource):
        (DRTDropSource::~DRTDropSource):
        (DRTDropSource::QueryInterface):
        (DRTDropSource::AddRef):
        (DRTDropSource::Release):
        (DRTDropSource::createInstance):
        (DRTDropSource::QueryContinueDrag):
        (DRTDropSource::GiveFeedback):
        * DumpRenderTree/win/DRTDropSource.h: Added.
        (DRTDropSource):
        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/EventSender.cpp:
        (beginDragWithFilesCallback):

2012-05-30  Marcelo Lira  <marcelo.lira@openbossa.org>

        WebKit2: Implement layoutTestController.setPluginsEnabled() in WebKitTestRunner.
        https://bugs.webkit.org/show_bug.cgi?id=58593

        Adds the ability to change the pluginsEnabled flag in WebCore::Settings
        to WebKitTestRunner's LayoutTestController. The flag is modified via the
        public C API of the WebProcess.

        Reviewed by Darin Adler.

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::setPluginsEnabled): Just calls the
        WKBundleSetPluginsEnabled function in the public C API of WebProcess.
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:

2012-05-30  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][DRT] http/tests/navigation/new-window-redirect-history.html does not pass
        https://bugs.webkit.org/show_bug.cgi?id=87848

        Reviewed by Csaba Osztrogonác.

        The reason was that DumpRenderTreeChrome::extraViews() returned copy of the vector
        and dumpBackForwardListForWebViews() used iterators belonging actually to different vectors
        (browser->extraViews().begin() and browser->extraViews().end()) as if they had belonged to the same vector.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::extraViews):
        * DumpRenderTree/efl/DumpRenderTreeChrome.h:
        (DumpRenderTreeChrome):

2012-05-30  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][DRT] EFL's DRT needs "postProgressFinishedNotification" message
        https://bugs.webkit.org/show_bug.cgi?id=87833

        Reviewed by Tor Arne Vestbø.

        Print "postProgressFinishedNotification" message if frame load finished 
        to unskip http/tests/loading/progress-finished-callback.html.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::onFrameLoadFinished):

2012-05-30  Mariusz Grzegorczyk  <mariusz.g@samsung.com>, Ryuan Choi  <ryuan.choi@samsung.com>

        [EFL][WK2] Fix WebKit2-EFL build
        https://bugs.webkit.org/show_bug.cgi?id=83693

        Reviewed by Carlos Garcia Campos.

        * CMakeLists.txt:  Guard Webkit1 related codes with ENABLE_WEBKIT.

2012-05-29  János Badics  <jbadics@inf.u-szeged.hu>

        [Qt] Modified ORWT and NRWT to check for test expectations in platform/qt-5.0-wk1 too
        (They only used to check for Skipped in platform/qt-5.0-wk1)
        https://bugs.webkit.org/show_bug.cgi?id=87376

        Reviewed by Csaba Osztrogonác.

        * Scripts/old-run-webkit-tests:
        (buildPlatformResultHierarchy):
        * Scripts/webkitpy/layout_tests/port/qt.py:
        (QtPort.baseline_search_path):

2012-05-29  Ojan Vafai  <ojan@chromium.org>

        Add a linter error for pngs that lack an embedded checksum
        https://bugs.webkit.org/show_bug.cgi?id=87793

        Reviewed by Dirk Pranke.

        * Scripts/read-checksum-from-png:
        * Scripts/webkitpy/common/read_checksum_from_png.py: Renamed from Tools/Scripts/webkitpy/layout_tests/read_checksum_from_png.py.
        (read_checksum):
        * Scripts/webkitpy/common/read_checksum_from_png_unittest.py: Renamed from Tools/Scripts/webkitpy/layout_tests/read_checksum_from_png_unittest.py.
        (ReadChecksumFromPngTest):
        (ReadChecksumFromPngTest.test_read_checksum):
        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/style/checkers/png.py:
        (PNGChecker.check):
        * Scripts/webkitpy/style/checkers/png_unittest.py:
        (PNGCheckerTest.test_check):

2012-05-29  Stephanie Lewis  <slewis@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=87720
        WebProcess is often killed due to being unresponsive on the bots

        Reviewed by Alexey Proskuryakov.

        Blind attempt to improve flakiness on the bots by reducing the number
        of crashes due to an unresponsive process.  This helped on my personal machine
        under stress conditions.  I don't have enough cores to hit the problem
        under normal conditions.

        * WebKitTestRunner/TestController.cpp:
        (WTR):

2012-05-29  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: rename 'rm' to 'delete' in rebaseline scm output
        https://bugs.webkit.org/show_bug.cgi?id=87779

        Reviewed by Eric Seidel.

        Update output to match the names in scm.py as per
        https://bugs.webkit.org/show_bug.cgi?id=87451#c26 .

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (RebaselineTest.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_rebaseline_test_and_print_scm_changes):
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:
        (GardeningServerTest.test_rebaselineall):

2012-05-29  Stephanie Lewis  <slewis@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=87711

        Reviewed by Jessie Berlin.

        Remove Snowleopard testers so the hardware can be repurposed.  The lion bots
        are better maintained.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-05-29  Dirk Pranke  <dpranke@chromium.org>

        webkit-patch optimize-baselines should add/delete files in batches from the vcs
        https://bugs.webkit.org/show_bug.cgi?id=87538

        Reviewed by Ojan Vafai.

        Invoking git and svn on one file at a time is kinda slow. We
        should batch the add and rm operations together.

        * Scripts/webkitpy/common/checkout/baselineoptimizer.py:
        (BaselineOptimizer._move_baselines):

2012-05-29  Dirk Pranke  <dpranke@chromium.org>

        garden-o-matic should rebaseline baselines in parallel
        https://bugs.webkit.org/show_bug.cgi?id=87451

        Reviewed by Ojan Vafai.
                                                                               
        This modifies garden-o-matic so that we will fetch all                  
        of the baselines in parallel from the bots, and then                    
        optimize the baselines serially (since that should be fairly            
        quick and we get into trouble if we optimize in parallel due            
        to concurrent access to the source control system).                     

        This change adds a flag to webkit-patch rebaseline-test (--print-scm-changes)
        so that the files that need to be modified in the SCM are returned to 
        garden-o-matic rather than actually added or removed. This is done so that
        we can run multiple rebaseline-tests in parallel (we can't modify the SCM
        concurrently). In order to safely return the files (as a JSON dict) I
        needed to shift all of the logging in rebaseline-test to use the logging
        module (and hence log to stderr).

        I also had to stub out a line in chromium.py that would get confused if
        the skia overrides file didn't exist in a mock checkout.

        * Scripts/webkitpy/common/system/executive.py:
        (Executive.popen):
        (Executive):
        (Executive.run_in_parallel):
        (_run_command_thunk):
        * Scripts/webkitpy/common/system/executive_mock.py:
        (MockExecutive.run_in_parallel):
        * Scripts/webkitpy/common/system/executive_unittest.py:
        (ExecutiveTest.test_run_in_parallel):
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        (ChromiumPort._expectations_file_contents):
        * Scripts/webkitpy/tool/commands/rebaseline.py:
        (AbstractRebaseliningCommand.__init__):
        (RebaselineTest.__init__):
        (RebaselineTest._copy_existing_baseline):
        (RebaselineTest._save_baseline):
        (RebaselineTest):
        (RebaselineTest._add_to_scm):
        (RebaselineTest._rebaseline_test):
        (RebaselineTest.execute):
        (RebaselineExpectations._rebaseline_port):
        (RebaselineExpectations.execute):
        (Rebaseline._builder_to_pull_from):
        (Rebaseline.execute):
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:
        (test_rebaseline_updates_expectations_file):
        (test_rebaseline_test):
        (test_rebaseline_test_and_print_scm_changes):
        (test_rebaseline_and_copy_test):
        (test_rebaseline_and_copy_test_no_existing_result):
        (test_rebaseline_and_copy_test_with_lion_result):
        (test_rebaseline_and_copy_no_overwrite_test):
        (test_rebaseline_expectations):
        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningHTTPRequestHandler._rebaseline_commands):
        (GardeningHTTPRequestHandler):
        (GardeningHTTPRequestHandler._files_to_add):
        (GardeningHTTPRequestHandler._optimize_baselines):
        (GardeningHTTPRequestHandler.rebaselineall):
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:
        (GardeningServerTest._post_to_path):
        (GardeningServerTest.test_rebaselineall):
        (GardeningServerTest.test_rebaselineall.run_command):

2012-05-29  Benjamin Poulain  <bpoulain@apple.com>

        Fix the type of dispatch_time() offset

        Rubber-stamped by Joseph Pecoraro.

        In r118631, I erroneously used the type NSTimeInterval for the delta of dispatch_time().

        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        (-[FrameLoadDelegate webView:didStartProvisionalLoadForFrame:]):

2012-05-29  Arvid Nilsson  <anilsson@rim.com>

        2012-05-29  Arvid Nilsson  <anilsson@rim.com>

        [BlackBerry] OpenGL content is not rendered on simulator
        https://bugs.webkit.org/show_bug.cgi?id=87721

        Reviewed by George Staikos.

        Fixed by enabling GLES2 support in simulator builds.

        To experiment with building without OpenGL support, you can set the
        DISABLE_GLES2 environment variable to a non-empty string and rebuild.

        PR #150695

        * Scripts/webkitdirs.pm:
        (blackberryCMakeArguments):

2012-05-29  David Barr  <davidbarr@chromium.org>

        Introduce ENABLE_CSS_IMAGE_RESOLUTION compile flag
        https://bugs.webkit.org/show_bug.cgi?id=87685

        Reviewed by Eric Seidel.

        Add a configuration option for CSS image-resolution support, disabling it by default.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-05-29  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Don't add cxx-flags to QMAKE_CFLAGS

        Prevents warnings such as: "command line option ‘-Wno-c++0x-compat’ is
            valid for C++/ObjC++ but not for C [enabled by default]"

        Reviewed by Simon Hausmann.

        * qmake/mkspecs/features/unix/default_post.prf:

2012-05-29  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Sync up favicon-implementation with WebView url changes in r118158

        https://bugs.webkit.org/show_bug.cgi?id=87133

        We now base64-encode the page url in the image-provider url, so that any
        normalization done by QUrl will not mess up the page-url. The logic of
        creating and parsing the provider-url has been moved into the image
        provider, to keep it in one place.

        We were also releasing icons (even ones we hadn't retained), which we can't
        do since we don't know when the icon url is no longer in use.

        Reviewed-by Simon Hausmann.

        * MiniBrowser/qt/icons/favicon.png:
        * MiniBrowser/qt/qml/BrowserWindow.qml:

2012-05-29  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL] Refactoring. Get rid of unnecessary singleCharacterString() function
        https://bugs.webkit.org/show_bug.cgi?id=87654

        Reviewed by Csaba Osztrogonác.

        Event sender provides strings for all the key events.
        Also KeyEventInfo constructor parameters order was changed to simplify the case when
        a key event has empty string.

        * DumpRenderTree/efl/EventSender.cpp:
        (KeyEventInfo::KeyEventInfo):
        (keyPadNameFromJSValue):
        (keyNameFromJSValue):

2012-05-23  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Cancel potential url-edit when going back/forward

        Reviewed by Kenneth Rohde Christiansen.

        * MiniBrowser/qt/qml/BrowserWindow.qml:

2012-05-29  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] Compilation warning in DumpRenderTreeView.cpp
        https://bugs.webkit.org/show_bug.cgi?id=87636

        Reviewed by Filip Pizlo.

        Fix compilation error in DumpRenderTreeView.cpp due to wrong format
        specifier in printf. Also fix the return type for
        onExceededApplicationCacheQuota callback.

        * DumpRenderTree/efl/DumpRenderTreeView.cpp:
        (onExceededApplicationCacheQuota):

2012-05-29  Hironori Bono  <hbono@chromium.org>

        Adding Hironori Bono to committers.py.
        https://bugs.webkit.org/show_bug.cgi?id=87697

        * Scripts/webkitpy/common/config/committers.py:

2012-05-28  Jonathan Dong  <jonathan.dong@torchmobile.com.cn>

        [BlackBerry] http authenticate dialog popup only once no matter authentication pass or fail
        https://bugs.webkit.org/show_bug.cgi?id=80135

        Reviewed by Rob Buis.

        Implemented interface function didReceiveAuthenticationChallenge in class
        DumpRenderTree.

        Resubmit the patch reverted by r115104 after the digest infinite loop
        issue for BlackBerry porting get identified and fixed.

        Internally reviewed by Joe Mason <jmason@rim.com>

        * DumpRenderTree/blackberry/DumpRenderTree.cpp:
        (drtCredentialDescription):
        (BlackBerry::WebKit::DumpRenderTree::didReceiveAuthenticationChallenge):
        (WebKit):
        * DumpRenderTree/blackberry/DumpRenderTreeBlackBerry.h:
        (WebCore):
        (DumpRenderTree):

2012-05-25  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        WebKitTestRunner needs to support layoutTestController.setJavaScriptProfilingEnabled
        https://bugs.webkit.org/show_bug.cgi?id=42328

        Reviewed by Eric Seidel.

        Removed unneeded setJavaScriptProfilingEnabled function from DRT after its
        move to windows.internals.settings.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/blackberry/LayoutTestControllerBlackBerry.cpp:
        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:
        (DRTDevToolsAgent):
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (LayoutTestController):

2012-05-28  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        Move allowRoundingHacks to Internals interface
        https://bugs.webkit.org/show_bug.cgi?id=87328

        Reviewed by Hajime Morita.

        Remove allowRoundingHacks functions, because it is able to work in the
        cross-port way through the Internals interface.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/blackberry/LayoutTestControllerBlackBerry.cpp:
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:

2012-05-28  Luke Macpherson  <macpherson@chromium.org>

        Fix mac build with older XCode by defining NSEC_PER_MSEC.
        https://bugs.webkit.org/show_bug.cgi?id=87616

        Reviewed by Hajime Morita.

        The following patch introduced the use of NSEC_PER_MSEC which is not defined for older XCode versions.
        http://trac.webkit.org/changeset/118631/trunk/Tools/DumpRenderTree/mac/FrameLoadDelegate.mm
        Patch just adds a #ifndef / #define check.

        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        (-[FrameLoadDelegate webView:didStartProvisionalLoadForFrame:]):

2012-05-27  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [EFL] Enable blob support for the EFL port
        https://bugs.webkit.org/show_bug.cgi?id=85363

        Reviewed by Hajime Morita.

        Enable Blob support by default for the EFL port.

        * Scripts/webkitperl/FeatureList.pm:

2012-05-27  Benjamin Poulain  <bpoulain@apple.com>

        When pages are loaded from AppCache with DeferredLoading, willSendRequest() is never called
        https://bugs.webkit.org/show_bug.cgi?id=87582

        Reviewed by Darin Adler.

        Extend DumpRenderTree to support loading the main resource deferred with a delay. This makes it
        possible to test pages in a similar way as they are loaded in Browsers.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (setUseDeferredFrameLoadingCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::useDeferredFrameLoading):
        (LayoutTestController::setUseDeferredFrameLoading):
        (LayoutTestController):
        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        (-[FrameLoadDelegate webView:didStartProvisionalLoadForFrame:]):

2012-05-27  David Barton  <dbarton@mathscribe.com>

        [watchlist] Improve MathML rule
        https://bugs.webkit.org/show_bug.cgi?id=87592

        Reviewed by Adam Barth.

        The old rule "filename": r".*mathml" works fine because "filename" is a prefix match,
        but if this changed the rule would be slow. We protect against this, clarify the rule,
        and make it more similar to existing rules.

        * Scripts/webkitpy/common/config/watchlist:

2012-05-27  David Barton  <dbarton@mathscribe.com>

        [watchlist] Add myself & a rule for MathML
        https://bugs.webkit.org/show_bug.cgi?id=87586

        Reviewed by Adam Barth.

        * Scripts/webkitpy/common/config/watchlist:

2012-05-26  David Kilzer  <ddkilzer@apple.com>

        Use xcrun to find path to nm for Mac port
        <http://webkit.org/b/87588>

        Reviewed by Dan Bernstein.

        * Scripts/webkitpy/layout_tests/port/mac.py:
        (MacPort.nm_command): Add. Tries to find a path for the nm
        command using xcrun.  Falls back to returning 'nm'.
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        (WebKitPort.nm_command): Add. Returns 'nm'.
        (WebKitPort._webcore_symbols_string): Call self.nm_command().

2012-05-25  Lynn Neir  <lynn.neir@skype.net>

        Added windows implementation in DRT for TextInputController, https://bugs.webkit.org/show_bug.cgi?id=32021

        Reviewed by Eric Seidel.

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/FrameLoadDelegate.cpp:
        (FrameLoadDelegate::FrameLoadDelegate):
        (FrameLoadDelegate::didClearWindowObjectForFrameInStandardWorld):
        * DumpRenderTree/win/FrameLoadDelegate.h:
        (FrameLoadDelegate):
        * DumpRenderTree/win/TextInputController.cpp: Added.
        (setMarkedTextCallback):
        (hasMarkedTextCallback):
        (unmarkTextCallback):
        (markedRangeCallback):
        (insertTextCallback):
        (firstRectForCharacterRangeCallback):
        (selectedRangeCallback):
        (TextInputController::makeWindowObject):
        (TextInputController::getJSClass):
        (TextInputController::staticValues):
        (TextInputController::staticFunctions):
        * DumpRenderTree/win/TextInputController.h: Added.
        (TextInputController):
        * DumpRenderTree/win/TextInputControllerWin.cpp: Added.
        (TextInputController::setMarkedText):
        (TextInputController::hasMarkedText):
        (TextInputController::unmarkText):
        (TextInputController::markedRange):
        (TextInputController::insertText):
        (TextInputController::firstRectForCharacterRange):
        (TextInputController::selectedRange):

2012-05-25  Dirk Pranke  <dpranke@chromium.org>

        webkitpy: change scm.add(), scm.delete() to accept multiple paths
        https://bugs.webkit.org/show_bug.cgi?id=87528

        Reviewed by Ojan Vafai.

        launching git or svn for individual files can be slow; this
        change will hand multiple paths at once to git and svn so they
        can be added in a batch.

        * Scripts/webkitpy/common/checkout/scm/git.py:
        (Git.add_list):
        (Git.delete_list):
        * Scripts/webkitpy/common/checkout/scm/scm.py:
        (SCM.add):
        (SCM):
        (SCM.add_list):
        (SCM.delete):
        (SCM.delete_list):
        * Scripts/webkitpy/common/checkout/scm/scm_mock.py:
        (MockSCM.add):
        (MockSCM):
        (MockSCM.add_list):
        (MockSCM.delete):
        (MockSCM.delete_list):
        * Scripts/webkitpy/common/checkout/scm/scm_unittest.py:
        (_shared_test_exists):
        (_shared_test_added_files):
        (_test_delete_list):
        * Scripts/webkitpy/common/checkout/scm/svn.py:
        (SVN.add_list):
        (SVN.delete_list):

2012-05-25  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [NRWT] Add unit testing for perf tests on locked shards
        https://bugs.webkit.org/show_bug.cgi?id=87489

        Reviewed by Dirk Pranke.

        Adding utests that makes sure that perf tests are running in locked
        shards and by passing --no-http won't break NRWT (r118421).

        * Scripts/webkitpy/layout_tests/controllers/manager_unittest.py:
        (ShardingTests):
        (ShardingTests.test_shard_by_dir):
        (ShardingTests.test_shard_every_file):
        (ShardingTests.test_shard_in_two):
        (ShardingTests.test_multiple_locked_shards):
        (LockCheckingManager):
        (LockCheckingManager.__init__):
        (LockCheckingManager.handle_finished_list):
        (ManagerTest.test_http_locking):
        (ManagerTest):
        (ManagerTest.test_perf_locking):
        * Scripts/webkitpy/layout_tests/port/test.py:

2012-05-25  Jessie Berlin  <jberlin@apple.com>

        [Win] fast/events/keydown-leftright-keys.html failing since introduction in r118001
        https://bugs.webkit.org/show_bug.cgi?id=87511

        Reviewed by Alexey Proskuryakov.

        Update the Windows implementation of keyDown to match the Mac one changed in r118001.

        * DumpRenderTree/win/EventSender.cpp:
        (keyDownCallback):

2012-05-25  Ken Buchanan  <kenrb@chromium.org>

        Adding Ken Buchanan to committers.py
        https://bugs.webkit.org/show_bug.cgi?id=87443

        Unreviewed.

        Adding self to committers.py as a Committer.

        * Scripts/webkitpy/common/config/committers.py:

2012-05-25  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Buildfix for newer Qt5
        https://bugs.webkit.org/show_bug.cgi?id=87257

        Reviewed by Simon Hausmann.

        * MiniBrowser/qt/MiniBrowserApplication.h: QtDeclarative -> QtQml renaming.

2012-05-25  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Unreviewed fix after r118484.

        Enable CSS_EXCLUSIONS and CSS_REGIONS.
        They were enabled uncoditinally before r118484.

        * qmake/mkspecs/features/features.pri:

2012-05-24  Tim Horton  <timothy_horton@apple.com>

        Add feature defines for web-facing parts of CSS Regions and Exclusions
        https://bugs.webkit.org/show_bug.cgi?id=87442
        <rdar://problem/10887709>

        Reviewed by Dan Bernstein.

        * Scripts/webkitperl/FeatureList.pm:

2012-05-24  Hironori Bono  <hbono@chromium.org>

        Enable grammar checking on Chromium when we paste text (Take 2)
        https://bugs.webkit.org/show_bug.cgi?id=74393

        Reviewed by Ryosuke Niwa.

        This change enables grammar checking on Chromium and implements a mock grammar
        checker to fix a failing test.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/MockGrammarCheck.cpp: Added.
        (MockGrammarCheck::checkGrammarOfString):
        * DumpRenderTree/chromium/MockGrammarCheck.h: Added.
        (WebKit):
        (MockGrammarCheck):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::finishLastTextCheck): Call MockGrammarCheck::checkGrammarOfString to check grammatical errors.

2012-05-24  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [EFL] [DRT] Add support for WebKitOfflineWebApplicationCacheEnabled preference
        https://bugs.webkit.org/show_bug.cgi?id=86842

        Reviewed by Antonio Gomes.

        Add support for overriding the application cache support preference
        through EFL's LayoutTestController.

        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::overridePreference):

2012-05-24  Sudarsana Nagineni  <sudarsana.nagineni@linux.intel.com>

        [EFL] Remove unnecessary extra call to set developer extras setting on the test startup
        https://bugs.webkit.org/show_bug.cgi?id=85209

        Reviewed by Antonio Gomes.

        Set developer extras setting called twice on the test startup. Hence, removing
        an unnecessary extra call which set wrong value. 

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):

2012-05-24  Dirk Pranke  <dpranke@chromium.org>

        garden-o-matic should not fetch from debug bots if it also knows about the release bots
        https://bugs.webkit.org/show_bug.cgi?id=86916

        Reviewed by Adam Barth.

        Note that if release and debug are failing differently, debug
        will be ignored ...

        Note: also change the use of a fake port name from
        "mock-port-name" to "test-mac-leopard" to make it more friendly
        to the port factory ("mock" actually is a real port).

        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningHTTPRequestHandler._builders_to_fetch_from):
        (GardeningHTTPRequestHandler.rebaselineall):
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:
        (GardeningServerTest.test_rebaselineall):
        (GardeningServerTest.test_rebaseline_new_port):

2012-05-24  Dirk Pranke  <dpranke@chromium.org>

        nrwt: fix baseline search path for official chrome builders
        https://bugs.webkit.org/show_bug.cgi?id=87432

        Reviewed by Tony Chang.

        The official chrome builders need to use the win7 and SL
        baseline paths, not the XP and Leopard paths. Linux is correct.

        * Scripts/webkitpy/layout_tests/port/google_chrome.py:
        (GoogleChromeMacPort.determine_full_port_name):
        (GoogleChromeWinPort.determine_full_port_name):
        * Scripts/webkitpy/layout_tests/port/google_chrome_unittest.py:
        (TestGoogleChromePort._verify_baseline_search_path_startswith):
        (TestGoogleChromePort.test_get_google_chrome_port):

2012-05-24  Thiago Marcos P. Santos  <thiago.santos@intel.com>

        [NRWT] REGRESSION(r116021): Assertion when running with --no-http
        https://bugs.webkit.org/show_bug.cgi?id=86800

        Reviewed by Dirk Pranke.

        Don't launch a HTTP server with lock based only on the existence of
        locked shards since we now run perf on locked shards too.

        * Scripts/webkitpy/layout_tests/controllers/manager.py:
        (Manager._run_tests):

2012-05-24  Jochen Eisinger  <jochen@chromium.org>

        Add --driver-name option to run_webkit_tests.py to allow for selecting alternative DRT binaries
        https://bugs.webkit.org/show_bug.cgi?id=87128

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.driver_name):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort._path_to_driver):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest.test_driver_name_option):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort._path_to_driver):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (parse_args):

2012-05-24  John Mellor  <johnme@chromium.org>

        Font Boosting: Add compile flag and runtime setting
        https://bugs.webkit.org/show_bug.cgi?id=87394

        Reviewed by Adam Barth.

        Add ENABLE_FONT_BOOSTING.

        * Scripts/webkitperl/FeatureList.pm:
        * qmake/mkspecs/features/features.pri:

2012-05-24  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL] [DRT] keyboard-related tests do not pass
        https://bugs.webkit.org/show_bug.cgi?id=85369

        Reviewed by Gustavo Noronha Silva.

        Add SHIFT modifier for capital letters as VK_ 
        codes do not distinguish between lows and caps and also to be consistent
        with other ports which send caps as lowercase letters with the shift key down.

        * DumpRenderTree/efl/EventSender.cpp:
        (keyNameFromJSValue): 

2012-05-24  Alexey Proskuryakov  <ap@apple.com>

        [WK2] Let the client give local files universal access on a case by case basis
        https://bugs.webkit.org/show_bug.cgi?id=87174
        <rdar://problem/11024330>

        Reviewed by Maciej Stachowiak.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp: (WTR::InjectedBundlePage::InjectedBundlePage):
        Added initialization of a new structure member to prevent build failure.

2012-05-24  Raphael Kubo da Costa  <rakuco@webkit.org>

        [EFL] Modify keycode conversion functions to return keycodes with location information after r118001.
        https://bugs.webkit.org/show_bug.cgi?id=87203

        Reviewed by Andreas Kling.

        Add the required changes to make
        fast/events/keydown-leftright-keys.html pass after r118001.

        * DumpRenderTree/efl/EventSender.cpp:
        (keyNameFromJSValue): Translate "{left,right}{Shift,Alt,Control}"
        into the proper X11 keysym definitions.

2012-05-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118352.
        http://trac.webkit.org/changeset/118352
        https://bugs.webkit.org/show_bug.cgi?id=87390

        Caused 6 editing/spelling tests crash/fail on chromium in
        debug. (Requested by vsevik on #webkit).

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/MockGrammarCheck.cpp: Removed.
        * DumpRenderTree/chromium/MockGrammarCheck.h: Removed.
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::finishLastTextCheck):

2012-05-24  Peter Beverloo  <peter@chromium.org>

        Add John Mellor as a contributor
        https://bugs.webkit.org/show_bug.cgi?id=87389

        Reviewed by Kenneth Rohde Christiansen.

        John will be working on Font Boosting and is very involved with various
        web-facing subjects of Chrome for Android, such as viewport.

        * Scripts/webkitpy/common/config/committers.py:

2012-05-24  Mikhail Pozdnyakov  <mikhail.pozdnyakov@intel.com>

        [EFL][DRT] LayoutTestController's setCacheModel() implementation
        https://bugs.webkit.org/show_bug.cgi?id=86840

        Reviewed by Csaba Osztrogonác.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues): Reset dead decoded data deletion interval.
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::setCacheModel): Implementation added.

2012-05-24  Hironori Bono  <hbono@chromium.org>

        Enable grammar checking on Chromium when we paste text.
        https://bugs.webkit.org/show_bug.cgi?id=74393

        Reviewed by Hajime Morita.

        This change enables grammar checking on Chromium and implements a mock grammar
        checker to fix a failing test.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/MockGrammarCheck.cpp: Added.
        (MockGrammarCheck::checkGrammarOfString):
        * DumpRenderTree/chromium/MockGrammarCheck.h: Added.
        (WebKit):
        (MockGrammarCheck):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::finishLastTextCheck): Call MockGrammarCheck::checkGrammarOfString to check grammatical errors.

2012-05-24  Csaba Osztrogonác  <ossy@webkit.org>

        [Qt] Unreviewed fix, add ENABLE_CSS3_FLEXBOX after r118304.

        * qmake/mkspecs/features/features.pri:

2012-05-24  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL's LayoutTestController needs to implement sendWebIntentResponse
        https://bugs.webkit.org/show_bug.cgi?id=86867

        Reviewed by Adam Barth.

        Add implementation for sendWebIntentResponse() in EFL's
        LayoutTestController and add empty implementation for other ports.

        * DumpRenderTree/LayoutTestController.cpp:
        (sendWebIntentResponseCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController):
        * DumpRenderTree/blackberry/LayoutTestControllerBlackBerry.cpp:
        (LayoutTestController::sendWebIntentResponse):
        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::currentIntentRequest):
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):
        (DumpRenderTreeChrome::onFrameIntentNew):
        * DumpRenderTree/efl/DumpRenderTreeChrome.h:
        (DumpRenderTreeChrome):
        * DumpRenderTree/efl/LayoutTestControllerEfl.cpp:
        (LayoutTestController::sendWebIntentResponse):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::sendWebIntentResponse):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::sendWebIntentResponse):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::sendWebIntentResponse):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::sendWebIntentResponse):

2012-05-24  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] The EFL port has no support for title directionality
        https://bugs.webkit.org/show_bug.cgi?id=86462

        Reviewed by Gustavo Noronha Silva.

        Update "title,changed" signal handlers in DRT and EWebLauncher to
        reflect the change from const char* to Ewk_Text_With_Direction* type
        for the title.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::onTitleChanged):
        * EWebLauncher/main.c:
        (title_set):
        (on_title_changed):
        (on_key_down):

2012-05-23  Gyuyoung Kim  <gyuyoung.kim@samsung.com>

        Change EFL debug build name with more detail one
        https://bugs.webkit.org/show_bug.cgi?id=87254

        Reviewed by Ryosuke Niwa.

        EFL Linux Debug buildbot name needs to be consistent with other EFL buildbot name.
        In addition, remove efl-linux-debug triggerable since nobody uses it.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-05-23  Kangil Han  <kangil.han@samsung.com>

        [EFL][DRT] Fix WebCore library path and rebaseline result
        https://bugs.webkit.org/show_bug.cgi?id=86355

        Reviewed by Dirk Pranke.

        Currently EFL DRT uses wrong WebCore library path when running DRT.
        Therefore, this patch adjusted the path correctly.

        * Scripts/webkitpy/layout_tests/port/efl.py:
        (EflPort._path_to_webcore_library):

2012-05-23  Ojan Vafai  <ojan@chromium.org>

        add back the ability to disable flexbox
        https://bugs.webkit.org/show_bug.cgi?id=87147

        Reviewed by Tony Chang.

        * Scripts/webkitperl/FeatureList.pm:

2012-05-23  Tony Chang  <tony@chromium.org>

        Remove the Chromium Grid Layout bot from the waterfall
        https://bugs.webkit.org/show_bug.cgi?id=87311

        Reviewed by Ryosuke Niwa.

        I removed the compiler define in r117613, so we don't need a separate
        bot to compile/test this code.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2012-05-23  Ian Vollick  <vollick@chromium.org>

        Add vollick to list of contributors.
        https://bugs.webkit.org/show_bug.cgi?id=87305

        Reviewed by Adam Barth.

        * Scripts/webkitpy/common/config/committers.py:

2012-05-23  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Fix chromium_android_unittest
        https://bugs.webkit.org/show_bug.cgi?id=87196

        Reviewed by Tony Chang.

        Update unit tests after ChromiumAndroidPort supported apk based
        DumpRenderTree.

        * Scripts/webkitpy/layout_tests/port/chromium_android_unittest.py:
        (ChromiumAndroidPortTest):
        (ChromiumAndroidPortTest.mock_run_command_fn): Moved out from test_get_last_stacktrace so that other tests can use it as a common command line handler.
        (ChromiumAndroidPortTest.test_get_last_stacktrace):
        (ChromiumAndroidPortTest.test_get_crash_log): Added to test our overridden _get_crash_log()
        (ChromiumAndroidDriverTest):
        (ChromiumAndroidDriverTest.setUp):
        (ChromiumAndroidDriverTest.test_cmd_line): Added to test our overridden cmd_line()
        (ChromiumAndroidDriverTest.test_write_command_and_read_line): Added test of unexpected EOF (indicating crash on Android)

2012-05-23  Caio Marcelo de Oliveira Filho  <caio.oliveira@openbossa.org>

        [watchlist] Add myself and create a watch rule to catch Attribute related patches
        https://bugs.webkit.org/show_bug.cgi?id=87303

        Reviewed by Alexis Menard.

        * Scripts/webkitpy/common/config/watchlist:

2012-05-23  Dirk Pranke  <dpranke@chromium.org>

        garden-o-matic should not fetch from debug bots if it also knows about the release bots
        https://bugs.webkit.org/show_bug.cgi?id=86916

        Reviewed by Adam Barth.

        This change pushes all of the logic for rebaselining a cluster
        of failures (a list of tests failing a list of suffixes on a
        list of bots) onto the server, so there is a single call from
        the web page; we will then be able to optimize the performance
        of the rebaselining better.

        Also remove the 'optimizebaseline' entry point on garden-o-matic
        (and the client-side call) since we don't need it any more.

        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/checkout.js:
        * BuildSlaveSupport/build.webkit.org-config/public_html/TestFailures/scripts/checkout_unittests.js:
        * Scripts/webkitpy/tool/servers/gardeningserver.py:
        (GardeningHTTPRequestHandler.rebaselineall):
        * Scripts/webkitpy/tool/servers/gardeningserver_unittest.py:

2012-05-21  Ryosuke Niwa  <rniwa@webkit.org>

        Mac DRT should be able to load external URLs for replay performance tests
        https://bugs.webkit.org/show_bug.cgi?id=86191

        Reviewed by Alexey Proskuryakov.

        Let external URL requests go through if the test file is not a local file or hosted at localhost.
        e.g. "DumpRenderTree http://webkit.org/" as supposed to "DumpRenderTree test.html" or
        "DumpRenderTree http://localhost:8000/".

        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (isLocalhost):
        (hostIsUsedBySomeTestsToGenerateError):
        (-[ResourceLoadDelegate webView:resource:willSendRequest:redirectResponse:fromDataSource:]):

2012-05-23  Malcolm MacLeod <malcolm.macleod@tshwanedje.com>

        [wx] In wxWebKit release builds on MSW, keep release settings but also build the 
        debug symbols for easier debugging.
        https://bugs.webkit.org/show_bug.cgi?id=87151

        Reviewed by Kevin Ollivier.

        * waf/build/settings.py:
        (common_configure):

2012-05-23  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Move myself to reviewers.

        * Scripts/webkitpy/common/config/committers.py:

2012-05-23  Dongwoo Im  <dw.im@samsung.com>

        [EFL] Implements the registerProtocolHandler method and option.
        https://bugs.webkit.org/show_bug.cgi?id=73638

        Reviewed by Andreas Kling.

        * Scripts/webkitperl/FeatureList.pm: Turn on the ENABLE_REGISTER_PROTOCOL_HANDLER option as default on EFL port.

2012-05-23  Zan Dobersek  <zandobersek@gmail.com>

        [Gtk] EventSender should properly handle (left|right)(control|shift|alt) after r118001
        https://bugs.webkit.org/show_bug.cgi?id=87221

        Reviewed by Martin Robinson.

        Convert leftAlt, leftControl, leftShift, rightAlt, rightControl and
        rightShift key names into proper GDK key symbols.

        * DumpRenderTree/gtk/EventSender.cpp:
        (createKeyPressEvent):

2012-04-18  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        [Qt] Make the web view's url property follow the active url

        https://bugs.webkit.org/show_bug.cgi?id=77554

        Update  the location bar in the minibrowser to behave
        a bit more like normal browsers in terms of when the url will change
        and how active focus is handled.

        Reviewed by Simon Hausmann.

        * MiniBrowser/qt/qml/BrowserWindow.qml:

2012-05-23  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Remove references to $$QT_SOURCE_TREE

        With a modularized Qt, it's ambigious. What we really want is qtbase,
        which qtcore is a proxy for (we assume it will always live in qtbase).

        Reviewed by Tor Arne Vestbø.

        * DumpRenderTree/qt/DumpRenderTree.pro:

2012-05-23  Oswald Buddenhagen  <oswald.buddenhagen@nokia.com>

        [Qt] Fix qmake conditional for c++-11 compat warnings

        Reviewed by Tor Arne Vestbø.

        * qmake/mkspecs/features/unix/default_post.prf:

2012-05-23  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL's DRT does not print didFailProvisionalLoadWithError messages
        https://bugs.webkit.org/show_bug.cgi?id=85956

        Reviewed by Gustavo Noronha Silva.

        Catch new "load,provisional,failed" signal and print
        didFailProvisionalLoadWithError messages when LayoutTestController's
        dumpFrameLoadCallbacks() returns true. Also make sure the
        didFailLoadWithError message is not printed in case of provisional
        load failure.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::createView):
        (DumpRenderTreeChrome::onFrameCreated):
        (DumpRenderTreeChrome::onFrameProvisionalLoadFailed):
        (DumpRenderTreeChrome::onFrameLoadError):
        * DumpRenderTree/efl/DumpRenderTreeChrome.h:
        (DumpRenderTreeChrome):

2012-05-23  Christophe Dumez  <christophe.dumez@intel.com>

        [EFL] EFL's DRT needs to call Settings::setValidationMessageTimerMagnification(-1)
        https://bugs.webkit.org/show_bug.cgi?id=86366

        Reviewed by Antonio Gomes.

        Call Settings::setValidationMessageTimerMagnification(-1) between the tests.

        * DumpRenderTree/efl/DumpRenderTreeChrome.cpp:
        (DumpRenderTreeChrome::resetDefaultsToConsistentValues):

2012-05-22  Darin Adler  <darin@apple.com>

        * Scripts/webkitpy/thirdparty/mod_pywebsocket: Added property svn:ignore.
        * Scripts/webkitpy/thirdparty/mod_pywebsocket/handshake: Added property svn:ignore.

2012-05-22  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Run DumpRenderTree as an apk (C++ and gyp part)
        https://bugs.webkit.org/show_bug.cgi?id=86922

        Because we have new platformInit() in TestShellAndroid.cpp, and
        we still need the timeout part in TestShellLinux.cpp, TestShellLinux.cpp
        is split into TestShellPosix.cpp and TestShellX11.cpp.

        Reviewed by Kent Tamura.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/TestShellAndroid.cpp: Added. Handles command lines to redirect stdin/stdout/stderr.
        (platformInit):
        * DumpRenderTree/chromium/TestShellGtk.cpp: Removed. Merged into TestShellX11.cpp
        * DumpRenderTree/chromium/TestShellLinux.cpp: Removed. Split into TestShellPosix.cpp and TestShellX11.cpp.
        * DumpRenderTree/chromium/TestShellPosix.cpp: Split from TestShellLinux.cpp, containing the timeout handling part, compiled when os_posix=1 (excluding mac).
        (AlarmHandler):
        (TestShell::waitTestFinished):
        * DumpRenderTree/chromium/TestShellX11.cpp: Split from TestShellLinux.cpp, containing the fontconfig part, compiled when use_x11=1
        (openStartupDialog): from TestShellGtk.cpp
        (checkLayoutTestSystemDependencies): from TestShellGtk.cpp.
        (setupFontconfig):
        (platformInit):

2012-05-22  Kangil Han  <kangil.han@samsung.com>

        [EFL][DRT] Implement touch event
        https://bugs.webkit.org/show_bug.cgi?id=86720

        Reviewed by Hajime Morita.

        Currently EFL DRT doesn't support touch event.
        Therefore, this patch enabled it and implemented some eventSender function callbacks.

        * DumpRenderTree/efl/EventSender.cpp:
        (TouchEventInfo::TouchEventInfo):
        (TouchEventInfo):
        (touchPointList):
        (sendTouchEvent):
        (addTouchPointCallback):
        (touchStartCallback):
        (updateTouchPointCallback):
        (touchMoveCallback):
        (cancelTouchPointCallback):
        (touchCancelCallback):
        (releaseTouchPointCallback):
        (touchEndCallback):
        (clearTouchPointsCallback):
        (setTouchModifierCallback):
        * Scripts/webkitperl/FeatureList.pm:

2012-05-22  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Fix chromium_android_unittest
        https://bugs.webkit.org/show_bug.cgi?id=87196

        Not reviewed.
        Temporarily disable chromium_android_unittest.

        * Scripts/webkitpy/layout_tests/port/chromium_android_unittest.py:
        (ChromiumAndroidPortTest):
        (ChromiumAndroidDriverTest):

2012-05-22  Jessie Berlin  <jberlin@apple.com>

        WebKitTestRunner needs an implementation of layoutTestController.setDefersLoading
        https://bugs.webkit.org/show_bug.cgi?id=64313

        Reviewed by Jon Honeycutt.

        Add it.

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        Make sure to generate the binding.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::setDefersLoading):
        Call WKBundlePageSetDefersLoading.
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:

2012-05-22  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Run DumpRenderTree as an apk (python part)
        https://bugs.webkit.org/show_bug.cgi?id=86923

        chromium_android.py is modified to support running DumpRenderTree as
        an apk, so that we can run the tests (e.g. video) requiring features
        implemented in Java on Android.

        Reviewed by Adam Barth.

        * Scripts/webkitpy/layout_tests/port/chromium_android.py:
        (ChromiumAndroidPort.__init__):
        (ChromiumAndroidPort.default_child_processes):
        (ChromiumAndroidPort.check_wdiff):
        (ChromiumAndroidPort.check_build):
        (ChromiumAndroidPort.start_helper):
        (ChromiumAndroidPort.skipped_layout_tests):
        (ChromiumAndroidPort):
        (ChromiumAndroidPort._path_to_driver):
        (ChromiumAndroidPort._get_crash_log):
        (ChromiumAndroidPort._push_executable):
        (ChromiumAndroidPort._run_adb_command):
        (ChromiumAndroidPort._get_last_stacktrace):
        (ChromiumAndroidPort._get_logcat):
        (ChromiumAndroidPort._setup_performance):
        (ChromiumAndroidDriver):
        (ChromiumAndroidDriver.__init__):
        (ChromiumAndroidDriver._command_wrapper):
        (ChromiumAndroidDriver.cmd_line):
        (ChromiumAndroidDriver._file_exists_on_device):
        (ChromiumAndroidDriver._deadlock_detector):
        (ChromiumAndroidDriver._start):
        (ChromiumAndroidDriver.run_test):
        (ChromiumAndroidDriver.stop):
        (ChromiumAndroidDriver._write_command_and_read_line):
        (ChromiumAndroidDriver._output_image):
        (ChromiumAndroidDriver._get_stderr):

2012-05-22  Joshua Bell  <jsbell@chromium.org>

        [Chromium] Reverting r118084 - webkit_tests failing on chromium mac.

        Unreviewed gardening.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.driver_name):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort._path_to_driver):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest.test_overrides_and_builder_names):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort._path_to_driver):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (parse_args):

2012-05-22  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Move conditions in DumpRenderTree.gypi into DumpRenderTree.gyp
        https://bugs.webkit.org/show_bug.cgi?id=87176

        Reviewed by Tony Chang.

        * DumpRenderTree/DumpRenderTree.gyp/DumpRenderTree.gyp:
        * DumpRenderTree/DumpRenderTree.gypi:

2012-05-22  Jochen Eisinger  <jochen@chromium.org>

        [chromium] add --driver-name option to run_webkit_tests.py to allow for selecting alternative DRT binaries
        https://bugs.webkit.org/show_bug.cgi?id=87128

        Reviewed by Dirk Pranke.

        * Scripts/webkitpy/layout_tests/port/base.py:
        (Port.driver_name):
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        (ChromiumLinuxPort._path_to_driver):
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        (ChromiumPortTest.test_driver_name_option):
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        (ChromiumWinPort._path_to_driver):
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        (parse_args):

2012-05-22  Jessie Berlin  <jberlin@apple.com>

        WTR fix after r118001.

        Rubber-stamped by Alexey Proskuryakov.

        Update the WTR implementation of keyDown to match the DRT one changed in r118001.

        * WebKitTestRunner/mac/EventSenderProxy.mm:
        (WTR::EventSenderProxy::keyDown):

2012-05-22  Kausalya Madhusudhanan  <kmadhusu@chromium.org>

        [Chromium] Use overloaded printBegin() webkit API to support auto fit to page functionality.
        https://bugs.webkit.org/show_bug.cgi?id=86684

        Reviewed by Darin Fisher.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::numberOfPages):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::printPage):

== Rolled over to ChangeLog-2012-05-22 ==
