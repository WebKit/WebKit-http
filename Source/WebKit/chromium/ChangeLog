2012-06-17  Zeev Lieber  <zlieber@chromium.org>

        [Chromium] Compositor should avoid drawing quads when cached textures are available and contents unchanged
        https://bugs.webkit.org/show_bug.cgi?id=88482

        Reviewed by Adrienne Walker.

        Added tests to verify quad removal algorithm. Added infrastructure
        code to generate custom render passes out of a script encoded as C
        string.

        * tests/CCDamageTrackerTest.cpp:
        (WebKitTests::TEST_F):
        * tests/CCLayerImplTest.cpp:
        (WebCore):
        (WebCore::TEST):
        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-16  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] Make the deviceScaleFactor dynamically adjustable.
        https://bugs.webkit.org/show_bug.cgi?id=88916

        Reviewed by James Robinson.

        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings): Removed unused
        static deviceScaleFactor.
        (WebKit::WebLayerTreeView::setDeviceScaleFactor):
        (WebKit):
        (WebKit::WebLayerTreeView::deviceScaleFactor):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setDeviceScaleFactor): Push the dynamic deviceScaleFactor
        to the compositor as required.
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostTest.cpp: Tests use dynamic setDeviceScaleFactor.
        (WTF::CCLayerTreeHostTestDeviceScaleFactorScalesViewportAndLayers::CCLayerTreeHostTestDeviceScaleFactorScalesViewportAndLayers):
        (WTF::CCLayerTreeHostTestDeviceScaleFactorScalesViewportAndLayers::beginTest):
        (WTF::CCLayerTreeHostTestDeviceScaleFactorScalesViewportAndLayers::commitCompleteOnCCThread):

2012-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120536.
        http://trac.webkit.org/changeset/120536
        https://bugs.webkit.org/show_bug.cgi?id=89296

        Does not compile on chromium-linux (Requested by abarth on
        #webkit).

        * WebKit.gyp:
        * public/linux/WebFontRendering.h:
        * public/linuxish/WebFontRendering.h: Renamed from Source/WebKit/chromium/public/WebFontRendering.h.
        (WebKit):
        (WebFontRendering):
        * src/linuxish/WebFontRendering.cpp: Renamed from Source/WebKit/chromium/src/WebFontRendering.cpp.
        (WebKit):
        (WebKit::WebFontRendering::setHinting):
        (WebKit::WebFontRendering::setAutoHint):
        (WebKit::WebFontRendering::setUseBitmaps):
        (WebKit::WebFontRendering::setAntiAlias):
        (WebKit::WebFontRendering::setSubpixelRendering):
        (WebKit::WebFontRendering::setSubpixelPositioning):
        (WebKit::WebFontRendering::setLCDOrder):
        (WebKit::WebFontRendering::setLCDOrientation):

2012-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120539.
        http://trac.webkit.org/changeset/120539
        https://bugs.webkit.org/show_bug.cgi?id=89295

        Does not compile on chromium-mac (Requested by abarth on
        #webkit).

        * tests/CCDamageTrackerTest.cpp:
        (WebKitTests::TEST_F):
        * tests/CCLayerImplTest.cpp:
        (WebCore):
        (WebCore::TEST):
        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-16  Zeev Lieber  <zlieber@chromium.org>

        [Chromium] Compositor should avoid drawing quads when cached textures are available and contents unchanged
        https://bugs.webkit.org/show_bug.cgi?id=88482

        Reviewed by Adrienne Walker.

        Added tests to verify quad removal algorithm. Added infrastructure
        code to generate custom render passes out of a script
        encoded as C string.

        * tests/CCDamageTrackerTest.cpp:
        (WebKitTests::TEST_F):
        * tests/CCLayerImplTest.cpp:
        (WebCore):
        (WebCore::TEST):
        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-16  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Move chromium/public/linuxish/WebFontRendering.h out of linuxish directory
        https://bugs.webkit.org/show_bug.cgi?id=89228

        Reverse dependency originally from WebCore::FontPlatformDataHarfBuzz to WebKit::WebFontRendering
        so that WebKit::WebFontRendering can be platform-independent.

        This also avoids the ambiguous name 'linuxish'.

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * public/WebFontRendering.h: Copied from Source/WebKit/chromium/public/linuxish/WebFontRendering.h. Added getters under WEBKIT_IMPLEMENTATION.
        (WebFontRendering):
        * public/linux/WebFontRendering.h:
        * public/linuxish: Removed.
        * public/linuxish/WebFontRendering.h: Removed.
        * src/WebFontRendering.cpp: Copied from Source/WebKit/chromium/src/linuxish/WebFontRendering.cpp. Changed setters to be independent of platform-dependent implementation and added getters.
        (WebKit):
        (WebKit::WebFontRendering::setHinting):
        (WebKit::WebFontRendering::hinting):
        (WebKit::WebFontRendering::setAutoHint):
        (WebKit::WebFontRendering::autoHint):
        (WebKit::WebFontRendering::setUseBitmaps):
        (WebKit::WebFontRendering::useBitmaps):
        (WebKit::WebFontRendering::setAntiAlias):
        (WebKit::WebFontRendering::antiAlias):
        (WebKit::WebFontRendering::setSubpixelRendering):
        (WebKit::WebFontRendering::subpixelRendering):
        (WebKit::WebFontRendering::setSubpixelPositioning):
        (WebKit::WebFontRendering::subpixelPositioning):
        * src/linuxish: Removed.
        * src/linuxish/WebFontRendering.cpp: Removed.

2012-06-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-16  Dan Alcantara  <dfalcantara@chromium.org>

        [chromium] WebFrameClient::userAgentOverride() should take in a WebFrame* as its first argument
        https://bugs.webkit.org/show_bug.cgi?id=89233

        Reviewed by Darin Fisher.

        Adds a WebFrame* to the WebFrameClient::userAgentOverride() function.

        * public/WebFrameClient.h:
        (WebKit::WebFrameClient::userAgentOverride):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::userAgent):
        * tests/FrameLoaderClientImplTest.cpp:

2012-06-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120511.
        http://trac.webkit.org/changeset/120511
        https://bugs.webkit.org/show_bug.cgi?id=89255

        Breaks at least Android builder (Requested by wangxianzhu on
        #webkit).

        * WebKit.gyp:
        * public/linux/WebFontRendering.h:
        * public/linuxish/WebFontRendering.h: Renamed from Source/WebKit/chromium/public/WebFontRendering.h.
        (WebKit):
        (WebFontRendering):
        * src/linuxish/WebFontRendering.cpp: Renamed from Source/WebKit/chromium/src/WebFontRendering.cpp.
        (WebKit):
        (WebKit::WebFontRendering::setHinting):
        (WebKit::WebFontRendering::setAutoHint):
        (WebKit::WebFontRendering::setUseBitmaps):
        (WebKit::WebFontRendering::setAntiAlias):
        (WebKit::WebFontRendering::setSubpixelRendering):
        (WebKit::WebFontRendering::setSubpixelPositioning):
        (WebKit::WebFontRendering::setLCDOrder):
        (WebKit::WebFontRendering::setLCDOrientation):

2012-06-15  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Move chromium/public/linuxish/WebFontRendering.h out of linuxish directory
        https://bugs.webkit.org/show_bug.cgi?id=89228

        Reverse dependency originally from WebCore::FontPlatformDataHarfBuzz to WebKit::WebFontRendering
        so that WebKit::WebFontRendering can be platform-independent.

        This also avoids the ambiguous name 'linuxish'.

        Reviewed by Tony Chang.

        * WebKit.gyp:
        * public/WebFontRendering.h: Copied from Source/WebKit/chromium/public/linuxish/WebFontRendering.h. Added getters under WEBKIT_IMPLEMENTATION.
        (WebFontRendering):
        * public/linux/WebFontRendering.h:
        * public/linuxish: Removed.
        * public/linuxish/WebFontRendering.h: Removed.
        * src/WebFontRendering.cpp: Copied from Source/WebKit/chromium/src/linuxish/WebFontRendering.cpp. Changed setters to be independent of platform-dependent implementation and added getters.
        (WebKit):
        (WebKit::WebFontRendering::setHinting):
        (WebKit::WebFontRendering::hinting):
        (WebKit::WebFontRendering::setAutoHint):
        (WebKit::WebFontRendering::autoHint):
        (WebKit::WebFontRendering::setUseBitmaps):
        (WebKit::WebFontRendering::useBitmaps):
        (WebKit::WebFontRendering::setAntiAlias):
        (WebKit::WebFontRendering::antiAlias):
        (WebKit::WebFontRendering::setSubpixelRendering):
        (WebKit::WebFontRendering::subpixelRendering):
        (WebKit::WebFontRendering::setSubpixelPositioning):
        (WebKit::WebFontRendering::subpixelPositioning):
        * src/linuxish: Removed.
        * src/linuxish/WebFontRendering.cpp: Removed.

2012-06-15  Tony Chang  <tony@chromium.org>

        [chromium] Remove WebKit/chromium/public/gtk/WebFontInfo.h since it's no longer referenced.
        https://bugs.webkit.org/show_bug.cgi?id=89251

        Reviewed by Adam Barth.

        This was a forwarding header when we moved the file to public/linux.

        * public/gtk/WebFontInfo.h: Removed.

2012-06-15  Bill Budge  <bbudge@chromium.org>

        AssociatedURLLoader should allow trusted clients to read all headers, not just exposed ones.
        https://bugs.webkit.org/show_bug.cgi?id=89185

        Reviewed by Adam Barth.

        This change adds an option to turn off whitelist filtering of response headers for CORS loads,
        and modifies AssociatedURLLoader check for that before filtering.

        * public/WebURLLoaderOptions.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        (WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        * tests/AssociatedURLLoaderTest.cpp:
        (WebKit):
        (WebKit::TEST_F):

2012-06-15  Sami Kyostila  <skyostil@chromium.org>

        [chromium] Allow scrolling non-root layers in the compositor thread
        https://bugs.webkit.org/show_bug.cgi?id=73350

        Reviewed by James Robinson.

        New unit tests to verify layer scrolling behavior and the associated
        utility functions.

        * src/WebCompositorInputHandlerImpl.cpp:
        (WebKit::WebCompositorInputHandlerImpl::handleInputEventInternal):
        (WebKit::WebCompositorInputHandlerImpl::handleGestureFling):
        * tests/CCLayerTreeHostCommonTest.cpp:
        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockContentLayerDelegate::paintContents):
        (CCLayerTreeHostTestScrollChildLayer):
        (WTF::CCLayerTreeHostTestScrollChildLayer::CCLayerTreeHostTestScrollChildLayer):
        (WTF::CCLayerTreeHostTestScrollChildLayer::beginTest):
        (WTF::CCLayerTreeHostTestScrollChildLayer::applyScrollAndScale):
        (WTF::CCLayerTreeHostTestScrollChildLayer::beginCommitOnCCThread):
        (WTF::CCLayerTreeHostTestScrollChildLayer::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestScrollChildLayer::afterTest):
        (WTF):
        (WTF::TEST_F):
        * tests/WebCompositorInputHandlerImplTest.cpp:
        (WebKit::TEST_F):

2012-06-15  Hironori Bono  <hbono@chromium.org>

        Allow platforms to choose whether to remove markers on editing
        https://bugs.webkit.org/show_bug.cgi?id=88838

        Reviewed by Hajime Morita.

        This change implements EditorClientImpl::checkGrammarOfString so
        DumpRenderTree can run grammar tests.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::isGrammarCheckingEnabled): Return true also when unified text-checking is enabled.
        (WebKit::EditorClientImpl::shouldEraseMarkersAfterChangeSelection): ditto.
        (WebKit::EditorClientImpl::checkGrammarOfString): Implement this function with our unified text-checker.

2012-06-14  Kent Tamura  <tkent@chromium.org>

        Support file extensions in HTMLInputElement::accept
        https://bugs.webkit.org/show_bug.cgi?id=88298

        Reviewed by Hajime Morita.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel):
        Use FileChooserSettings::acceptTypes() to get both of MIME types and file extensions.

2012-06-14  Kaustubh Atrawalkar  <kaustubh@motorola.com>

        Remove support for counterValueForElementById from chromium port
        https://bugs.webkit.org/show_bug.cgi?id=88851

        Reviewed by Adam Barth.

        Moved the counterValueForElementById from LayoutTestCotroller to Internals so
        remove the old platform specific implementations as it exclusively tests WebCore functionality.

        * public/WebFrame.h:
        (WebFrame):
        * src/WebFrameImpl.cpp:
        (WebKit):
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2012-06-14  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Initialize font rendering in DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=89133

        Reviewed by Adam Barth.

        * src/linuxish/WebFontRendering.cpp:
        (WebKit::WebFontRendering::setSubpixelPositioning): Now calls WebFontInfo::setSubpixelPositioning to avoid API users from calling both and simplify platform differences at call sites.

2012-06-14  Tony Chang  <tony@chromium.org>

        [chromium] Port IFrameRedirectTest.Test from test_shell_tests to webkit_unit_tests
        https://bugs.webkit.org/show_bug.cgi?id=89132

        Reviewed by Adam Barth.

        This test is currently in src/webkit/glue/iframe_redirect_unittest.cc
        and uses test_shell's layoutTestController. Moving this will make
        it easier to get rid of layoutTestController in test_shell.

        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        (WebKit):
        * tests/data/iframe_redirect.html: Added.

2012-06-14  David Reveman  <reveman@chromium.org>

        [Chromium] Sub-pixel text rendering is incorrectly used for WebView with transparent background.
        https://bugs.webkit.org/show_bug.cgi?id=89033

        Reviewed by James Robinson.

        Add canvas background argument to PageWidgetDelegate::paint and call
        PlatformCanvasSkia::setDrawingToImageBuffer to ensure that sub-pixel
        rendering is only used when WebView has opaque background.

        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::paint):
        * src/PageWidgetDelegate.h:
        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::paint):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paint):

2012-06-14  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] CCLayerTreeHostCommonTest.verifyHitTestingForSingleLayer failing in debug
        https://bugs.webkit.org/show_bug.cgi?id=89065

        Reviewed by James Robinson.

        A debug assertion was being triggered in the hit-testing unit
        tests because I accidentally forgot to set the
        DebugScopedSetImplThread for the tests.

        This patch also re-enables the disabled broken test.

        * tests/CCLayerTreeHostCommonTest.cpp:

2012-06-14  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Add setAutoHint() and setUseBitmaps() in WebFontRendering
        https://bugs.webkit.org/show_bug.cgi?id=89014

        Reviewed by James Robinson.

        * public/linuxish/WebFontRendering.h:
        (WebFontRendering):
        * src/linuxish/WebFontRendering.cpp:
        (WebKit):
        (WebKit::WebFontRendering::setAutoHint):
        (WebKit::WebFontRendering::setUseBitmaps):
        (WebKit::WebFontRendering::setAntiAlias):

2012-06-14  Daniel Erat  <derat@chromium.org>

        [chromium/linux] Drop deprecated WebFontRenderStyle::useSubpixel
        https://bugs.webkit.org/show_bug.cgi?id=88263

        Reviewed by Adam Barth.

        This removes the useSubpixel member, which was replaced by
        useSubpixelRendering.  Chrome has been updated to set only the
        useSubpixelRendering field.

        No test updates since the existing behavior shouldn't change.

        * public/linux/WebFontInfo.h:
        (WebFontInfo):
        * public/linux/WebFontRenderStyle.h:
        * src/linux/WebFontInfo.cpp:
        (WebKit::WebFontInfo::renderStyleForStrike):
        * src/linux/WebFontRenderStyle.cpp:
        (WebKit::WebFontRenderStyle::toFontRenderStyle):
        (WebKit::WebFontRenderStyle::setDefaults):

2012-06-14  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] For hit testing in CCLayerTreeHostCommon, need to check that the transform is invertible before inverting it.
        https://bugs.webkit.org/show_bug.cgi?id=89049

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:

2012-06-14  Ian Vollick  <vollick@chromium.org>

        [chromium] Certain settings in CCSettings could be global
        https://bugs.webkit.org/show_bug.cgi?id=88384

        Reviewed by James Robinson.

        * WebKit.gypi:
        * public/WebCompositor.h:
        (WebCompositor):
        * public/WebSettings.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositor::shutdown):
        (WebKit):
        (WebKit::WebCompositor::setPerTilePaintingEnabled):
        (WebKit::WebCompositor::setPartialSwapEnabled):
        (WebKit::WebCompositor::setAcceleratedAnimationEnabled):
        * src/WebLayerTreeView.cpp:
        (WebKit):
        (WebKit::WebLayerTreeView::Settings::operator CCLayerTreeSettings):
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF):
        (CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived1::afterTest):
        * tests/CCTestCommon.h: Added.
        (WebKitTests):
        (CCScopedSettings):
        (WebKitTests::CCScopedSettings::CCScopedSettings):
        (WebKitTests::CCScopedSettings::~CCScopedSettings):
        * tests/CCThreadedTest.cpp:
        (WebKitTests::MockLayerTreeHostImpl::create):
        (WebKitTests::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (WebKitTests::CCThreadedTest::runTest):
        * tests/CCThreadedTest.h:
        (CCThreadedTest):
        (MockLayerTreeHostImpl):
        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (WebKitTests::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/LayerChromiumTest.cpp:
        * tests/LayerRendererChromiumTest.cpp:
        (LayerRendererChromiumTest):
        (TEST_F):
        (TEST):
        * tests/TextureLayerChromiumTest.cpp:
        * tests/TiledLayerChromiumTest.cpp:
        * tests/TreeSynchronizerTest.cpp:
        (WebKitTests::TEST):

2012-06-14  James Robinson  <jamesr@chromium.org>

        [chromium] Move opaque rectangle tracking logic out of compositor core
        https://bugs.webkit.org/show_bug.cgi?id=89031

        Reviewed by Adrienne Walker.

        Moves the grayscale/subpixel AA text decision into NonCompositedContentHost and removes one layer of indirection
        betwen NCCH and WVI that existed only for historical reasons.

        Ports the opaque rect tracking tests that were in LayerTextureUpdaterTest to
        OpaquerectTrackingContentLayerDelegateTest to reflect the move in responsibilities.

        * WebKit.gypi:
        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::NonCompositedContentHost):
        (WebKit::NonCompositedContentHost::setOpaque):
        (WebKit::NonCompositedContentHost::paintContents):
        * src/NonCompositedContentHost.h:
        (WebCore):
        (WebKit):
        (WebKit::NonCompositedContentHost::create):
        (NonCompositedContentHost):
        * src/WebContentLayerImpl.cpp:
        (WebKit::WebContentLayerImpl::paintContents):
        * src/WebContentLayerImpl.h:
        (WebContentLayerImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::paintRootLayer):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestOpacityChangeLayerDelegate::paintContents):
        (WTF::MockContentLayerDelegate::paintContents):
        * tests/LayerChromiumTest.cpp:
        * tests/LayerTextureUpdaterTest.cpp: Removed.
        * tests/OpaqueRectTrackingContentLayerDelegateTest.cpp: Added.
        (WebCore):
        (PaintCallback):
        (TestLayerPainterChromium):
        (WebCore::TestLayerPainterChromium::TestLayerPainterChromium):
        (WebCore::PaintFillAlpha::operator()):
        (WebCore::PaintFillPartialOpaque::PaintFillPartialOpaque):
        (PaintFillPartialOpaque):
        (WebCore::PaintFillPartialOpaque::operator()):
        (OpaqueRectTrackingContentLayerDelegateTest):
        (WebCore::OpaqueRectTrackingContentLayerDelegateTest::OpaqueRectTrackingContentLayerDelegateTest):
        (WebCore::OpaqueRectTrackingContentLayerDelegateTest::skCanvas):
        (WebCore::OpaqueRectTrackingContentLayerDelegateTest::canvasRect):
        (WebCore::TEST_F):

2012-06-14  Justin Novosad  <junov@chromium.org>

        [Chromium] webkitImageSmoothingEnabled canvas property does not work on redraw
        https://bugs.webkit.org/show_bug.cgi?id=89018

        Reviewed by Stephen White.

        Rolling chromium DEPS to 141884

        * DEPS:

2012-06-14  Alexander Pavlov  <apavlov@chromium.org>

        [Chromium] Unreviewed, build fix for Mac 10.5

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::DeviceMetricsSupport::autoZoomPageToFitWidth):

2012-06-14  Eugene Klyuchnikov  <eustas.bug@gmail.com>

        Web Inspector: Refactor message loop instrumentation.
        https://bugs.webkit.org/show_bug.cgi?id=88978

        Reviewed by Pavel Feldman.

        1) Remove "messageLoop" term
        2) Reuse WebThread::TaskObserver interface
        3) Move implementation (from embedder) to platform code.

        * public/WebDevToolsAgent.h:
        (WebDevToolsAgent):
        * public/WebDevToolsAgentClient.h:
        (WebDevToolsAgentClient):
        (WebKit::WebDevToolsAgentClient::startMainThreadMonitoring): Renamed medthod.
        (WebKit::WebDevToolsAgentClient::stopMainThreadMonitoring): Ditto.
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::startMainThreadMonitoring): Ditto.
        (WebKit::InspectorClientImpl::stopMainThreadMonitoring): Ditto.
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::startMainThreadMonitoring): Use platform threading.
        (WebKit::WebDevToolsAgentImpl::stopMainThreadMonitoring): Ditto.
        (WebKit::WebDevToolsAgentImpl::willProcessTask): Renamed medthod.
        (WebKit::WebDevToolsAgentImpl::didProcessTask): Ditto.
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):
        * src/WebKit.cpp:

2012-06-14  Alexander Pavlov  <apavlov@chromium.org>

        Web Inspector: [Device Metrics] "Fit window" results in duplicate rescaling in WebDevToolsAgentImpl::autoZoomPageToFitWidth()
        https://bugs.webkit.org/show_bug.cgi?id=89092

        Reviewed by Pavel Feldman.

        Do not apply the sizeRatio after it has been applied in scaledEmulatedFrameSize().

        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::DeviceMetricsSupport::autoZoomPageToFitWidth):
        (WebKit::DeviceMetricsSupport::ensureOriginalZoomFactor):

2012-06-14  Yoshifumi Inoue  <yosin@chromium.org>

        [Chromium][Forms] We should remove ENABLE_INPUT_TYPE_TIME=0 and so on to allows us to override them by ~/.gyp/include.gypi
        https://bugs.webkit.org/show_bug.cgi?id=89062

        Reviewed by Kent Tamura.

        This patch removes ENABLE_INPUT_TYPE_*=0 from default entry of feature_defines to
        allows us overriding by ~/.gyp/include.gypi

        * features.gypi: Remove ENABLE_INPUT_TYPE_DATETIME=0, ENABLE_INPUT_TYPE_DATETIMELOCAL=0,
        and so on.

2012-06-14  Min Qin  <qinmin@google.com>

        Remove the const keyword from MediaPlayerPrivate::enterFullscreen()
        https://bugs.webkit.org/show_bug.cgi?id=89044

        Reviewed by Adam Barth.

        enterFullscreen() should be treated similarly as exitFullscreen() as it could alter the player state.
        This reverts the change from r120213.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::enterFullscreen):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-06-14  Dan Alcantara  <dfalcantara@chromium.org>

        [chromium] Rename WebFrameClient::userAgent() to better reflect what it does
        https://bugs.webkit.org/show_bug.cgi?id=89028

        Reviewed by Adam Barth.

        Renames WebFrameClient::userAgent() to userAgentOverride() and makes it return
        the user agent override string directly.

        * public/WebFrameClient.h:
        (WebFrameClient):
        (WebKit::WebFrameClient::userAgentOverride):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::userAgent):
        * tests/FrameLoaderClientImplTest.cpp:

2012-06-13  Jesse Greenwald  <jgreenwald@google.com>

        [Chromium] Add WebDocument.images
        https://bugs.webkit.org/show_bug.cgi?id=88837

        Reviewed by Adam Barth.

        This method is needed on Android to support the existing
        WebView.documentHasImages Java API.

        * public/WebDocument.h:
        (WebDocument):
        * src/WebDocument.cpp:
        (WebKit::WebDocument::images):
        (WebKit):

2012-06-13  Dominic Cooney  <dominicc@chromium.org>

        Unreviewed: Disable verifyHitTestingForSingleLayer.
        https://bugs.webkit.org/show_bug.cgi?id=89065

        It is failing on canary debug bots.

        * tests/CCLayerTreeHostCommonTest.cpp:

2012-06-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120268.
        http://trac.webkit.org/changeset/120268
        https://bugs.webkit.org/show_bug.cgi?id=89060

        WebCompositor::setPerTilePaintingEnabled hits an assertion in
        DEBUG (Requested by dominicc|work on #webkit).

        * WebKit.gypi:
        * public/WebCompositor.h:
        (WebCompositor):
        * public/WebSettings.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositor::shutdown):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setPerTilePaintingEnabled):
        (WebKit):
        (WebKit::WebSettingsImpl::setPartialSwapEnabled):
        (WebKit::WebSettingsImpl::setThreadedAnimationEnabled):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        * tests/CCTestCommon.h: Removed.
        * tests/CCThreadedTest.cpp:
        (WebKitTests::MockLayerTreeHostImpl::create):
        (WebKitTests::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (WebKitTests::CCThreadedTest::runTest):
        * tests/CCThreadedTest.h:
        (CCThreadedTest):
        (MockLayerTreeHostImpl):
        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (WebKitTests::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/LayerChromiumTest.cpp:
        * tests/LayerRendererChromiumTest.cpp:
        (LayerRendererChromiumTest):
        (TEST_F):
        (TEST):
        * tests/TextureLayerChromiumTest.cpp:
        * tests/TiledLayerChromiumTest.cpp:
        * tests/TreeSynchronizerTest.cpp:
        (WebKitTests::TEST):

2012-06-13  Hironori Bono  <hbono@chromium.org>

        [chromium] Add WebFrame::replaceMisspelledRange
        https://bugs.webkit.org/show_bug.cgi?id=88618

        Reviewed by Kent Tamura.

        This change adds WebFrame::replaceMisspelledRange, which replaces the range of a
        misspelled marker with text so Chromium can use it for replacing misspelled
        words with suggetions.

        * public/WebFrame.h:
        (WebFrame):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::replaceMisspelledRange):
        (WebKit):
        * src/WebFrameImpl.h:
        (WebFrameImpl):

2012-06-13  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Let Android and Linux share WebFontRendering decl/impl.
        https://bugs.webkit.org/show_bug.cgi?id=88802

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * public/linux/WebFontRendering.h: Temporarily forwards to the new file under linuxish.
        * public/linuxish: Added.
        * public/linuxish/WebFontRendering.h: Copied from chromium/public/linux/WebFontRendering.h.
        * src/linux/WebFontRendering.cpp: Removed.
        * src/linuxish: Added.
        * src/linuxish/WebFontRendering.cpp: Copied from chromium/src/linux/WebFontRendering.cpp.

2012-06-13  Ian Vollick  <vollick@chromium.org>

        [chromium] Certain settings in CCSettings could be global
        https://bugs.webkit.org/show_bug.cgi?id=88384

        Reviewed by James Robinson.

        * WebKit.gypi:
        * public/WebCompositor.h:
        (WebCompositor):
        * public/WebSettings.h:
        * src/WebCompositorImpl.cpp:
        (WebKit::WebCompositor::shutdown):
        (WebKit):
        (WebKit::WebCompositor::setPerTilePaintingEnabled):
        (WebKit::WebCompositor::setPartialSwapEnabled):
        (WebKit::WebCompositor::setAcceleratedAnimationEnabled):
        * src/WebLayerTreeView.cpp:
        (WebKit):
        (WebKit::WebLayerTreeView::Settings::operator CCLayerTreeSettings):
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF):
        (CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::CCLayerTreeHostTestShortlived1):
        (WTF::CCLayerTreeHostTestShortlived1::beginTest):
        (WTF::CCLayerTreeHostTestShortlived1::afterTest):
        * tests/CCTestCommon.h: Added.
        (WebKitTests):
        (CCScopedSettings):
        (WebKitTests::CCScopedSettings::CCScopedSettings):
        (WebKitTests::CCScopedSettings::~CCScopedSettings):
        * tests/CCThreadedTest.cpp:
        (WebKitTests::MockLayerTreeHostImpl::create):
        (WebKitTests::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (WebKitTests::CCThreadedTest::runTest):
        * tests/CCThreadedTest.h:
        (CCThreadedTest):
        (MockLayerTreeHostImpl):
        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (WebKitTests::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        * tests/LayerChromiumTest.cpp:
        * tests/LayerRendererChromiumTest.cpp:
        (LayerRendererChromiumTest):
        (TEST_F):
        (TEST):
        * tests/TextureLayerChromiumTest.cpp:
        * tests/TiledLayerChromiumTest.cpp:
        * tests/TreeSynchronizerTest.cpp:
        (WebKitTests::TEST):

2012-06-13  Dana Jansens  <danakj@chromium.org>

        [chromium] Assert if iterating an invalid RenderSurfaceLayerList, where a layer in the list has no RenderSurface
        https://bugs.webkit.org/show_bug.cgi?id=89004

        Reviewed by Adrienne Walker.

        * tests/CCLayerIteratorTest.cpp:

2012-06-13  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Implement hit-testing for impl-side input handling in accelerated compositor
        https://bugs.webkit.org/show_bug.cgi?id=88972

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:

2012-06-13  David Reveman  <reveman@chromium.org>

        [Chromium] Crash when WebViewImpl::setIsTransparent is called before the WebLayerTreeView has been initialized.
        https://bugs.webkit.org/show_bug.cgi?id=89013

        Reviewed by James Robinson.

        Add !m_layerTreeView.isNull() check to WebViewImpl::setIsTransparent.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsTransparent):

2012-06-13  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120220.
        http://trac.webkit.org/changeset/120220
        https://bugs.webkit.org/show_bug.cgi?id=89021

        The patch broke build Chromium Win Release (Requested by
        wangxianzhu on #webkit).

        * WebKit.gyp:
        * public/linux/WebFontRendering.h:
        (WebKit):
        (WebFontRendering):
        * public/linuxish/WebFontRendering.h: Removed.
        * src/linux/WebFontRendering.cpp: Renamed from Source/WebKit/chromium/src/linuxish/WebFontRendering.cpp.
        (WebKit):
        (WebKit::WebFontRendering::setHinting):
        (WebKit::WebFontRendering::setAntiAlias):
        (WebKit::WebFontRendering::setSubpixelGlyphs):
        (WebKit::WebFontRendering::setSubpixelRendering):
        (WebKit::WebFontRendering::setSubpixelPositioning):
        (WebKit::WebFontRendering::setLCDOrder):
        (WebKit::WebFontRendering::setLCDOrientation):

2012-06-13  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium] Let Android and Linux share WebFontRendering decl/impl.
        https://bugs.webkit.org/show_bug.cgi?id=88802

        Reviewed by Adam Barth.

        * WebKit.gyp:
        * public/linux/WebFontRendering.h: Temporarily forwards to the new file under linuxish.
        * public/linuxish: Added.
        * public/linuxish/WebFontRendering.h: Copied from chromium/public/linux/WebFontRendering.h.
        * src/linux/WebFontRendering.cpp: Removed.
        * src/linuxish: Added.
        * src/linuxish/WebFontRendering.cpp: Copied from chromium/src/linux/WebFontRendering.cpp.

2012-06-13  Martin Kosiba  <mkosiba@google.com>

        [Chromium] WebFrameImpl::find doesn't work for searching from a selection.
        https://bugs.webkit.org/show_bug.cgi?id=88885

        Reviewed by Adam Barth.

        Remember the active match not just until the seatchText changes but for the entire find session.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::find):
        (WebKit::WebFrameImpl::setFindEndstateFocusAndSelection):

2012-06-13  Peter Beverloo  <peter@chromium.org>

        [Chromium] Fix Clang build with USE(NATIVE_FULLSCREEN_VIDEO)=1
        https://bugs.webkit.org/show_bug.cgi?id=88987

        Reviewed by Simon Hausmann.

        The enterFullscreen method is declared as const by MediaPlayerPrivateInterface,
        so this one should be declared as such as well.

        Patch by Evgeniy Stepanov <eugenis@google.com>

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::enterFullscreen):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-06-13  MORITA Hajime  <morrita@google.com>

        REGRESSION(r118098): <content> element does not render distributed children when cloned from another document
        https://bugs.webkit.org/show_bug.cgi?id=88148

        Reviewed by Dimitri Glazkov.

        - Added ContextFeaturesClientImpl which implements WebCore::ContextFeaturesClient.
        - Replaced PagePopupFrameLoaderClient with PagePopupFeaturesClient.

        * WebKit.gyp:
        * public/WebPermissionClient.h:
        (WebKit):
        (WebKit::WebPermissionClient::allowWebComponents):
        * src/ContextFeaturesClientImpl.cpp: Renamed from Source/WebCore/bindings/generic/ContextEnabledFeatures.cpp.
        (WebKit):
        (WebKit::ContextFeaturesClientImpl::isEnabled):
        * src/ContextFeaturesClientImpl.h: Renamed from Source/WebCore/bindings/generic/ContextEnabledFeatures.h.
        (WebKit):
        (ContextFeaturesClientImpl):
        (WebKit::ContextFeaturesClientImpl::ContextFeaturesClientImpl):
        (WebKit::ContextFeaturesClientImpl::setPermissionClient):
        * src/FrameLoaderClientImpl.cpp:
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):
        * src/WebPagePopupImpl.cpp:
        (PagePopupFeaturesClient):
        (WebKit::PagePopupFeaturesClient::isEnabled):
        (WebKit):
        (WebKit::WebPagePopupImpl::initPage):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPermissionClient):
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:
        (WebKit):

2012-06-12  Ian Vollick  <vollick@chromium.org>

        [chromium] Roll chromium rev in DEPS
        https://bugs.webkit.org/show_bug.cgi?id=88934

        Reviewed by James Robinson.

        Rolling to 141410

        * DEPS:

2012-06-12  James Robinson  <jamesr@chromium.org>

        [chromium] Port Canvas2DLayerBridge over to WebExternalTextureLayer
        https://bugs.webkit.org/show_bug.cgi?id=88597

        Reviewed by Adrienne Walker.

        Implementations for new WebExternalTextureLayer APIs, updates test.

        * src/WebExternalTextureLayer.cpp:
        (WebKit::WebExternalTextureLayer::willModifyTexture):
        (WebKit):
        (WebKit::WebExternalTextureLayer::setRateLimitContext):
        * tests/Canvas2DLayerBridgeTest.cpp:
        (Canvas2DLayerBridgeTest::fullLifecycleTest):

2012-06-12  Adrienne Walker  <enne@google.com>

        [chromium] Paint scrollbars on WebKit thread and composite those textures
        https://bugs.webkit.org/show_bug.cgi?id=88145

        Reviewed by James Robinson.

        Remove scrollbarLayerLostContext test that no longer makes sense. The
        compositor won't draw at all after a lost context if it has no
        contents.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-12  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: ObjectStore/Index shouldn't hold reference to backing store
        https://bugs.webkit.org/show_bug.cgi?id=83074

        Reviewed by Tony Chang.

        * WebKit.gypi:
        * tests/IDBDatabaseBackendTest.cpp: Added.
        (WebCore):
        (WebCore::TEST):

2012-06-12  Dana Jansens  <danakj@chromium.org>

        [chromium] Set contentBounds() on impl layers in CCLayerTreeHostCommonTests
        https://bugs.webkit.org/show_bug.cgi?id=88903

        Reviewed by Adrienne Walker.

        Without setting the contentBounds() on impl layers, the visibleLayerRect
        will be wrong. This is not the case for main-thread layers, which most
        of the tests in this file use. But this is a potential serious confusion
        for future test implementors so I'd like to make it explicit now.

        * tests/CCLayerTreeHostCommonTest.cpp:

2012-06-12  Dana Jansens  <danakj@chromium.org>

        [chromium] Return empty visibleLayerRect for layers with empty content bounds
        https://bugs.webkit.org/show_bug.cgi?id=88901

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-12  Mark Mentovai  <mark@chromium.org>

        [chromium mac] Don't #include things in subframeworks of
        ApplicationServices.framework.

        #including the umbrella <ApplicatonServices/ApplicationServices.h>
        exposed an ambiguous name, FontMetrics, that needs to be fully
        qualified as WebCore::FontMetrics.

        https://bugs.webkit.org/show_bug.cgi?id=88569

        Reviewed by Stephen White.

        * src/WebFontImpl.cpp:
        (WebKit::WebFontImpl::estimateTextBounds):

2012-06-12  James Robinson  <jamesr@chromium.org>

        [chromium] REGRESSION(119769): Canvas2DLayerBridge may go away before its TextureLayerChromium
        https://bugs.webkit.org/show_bug.cgi?id=88910

        Reviewed by Adrienne Walker.

        New unit test to verify that we can still update a TextureLayerChromium after the bridge owning it has gone
        away.

        * tests/Canvas2DLayerBridgeTest.cpp:

2012-06-12  Adrienne Walker  <enne@google.com>

        [chromium] Fix incorrect LayerChromium scroll position for RTL overflow pages
        https://bugs.webkit.org/show_bug.cgi?id=88887

        Reviewed by James Robinson.

        The scroll position on layers needs to take into account the scroll
        origin, since RTL pages start scrolled all the way to the right.
        Otherwise, when scrolling left the scroll position incorrectly will go
        negative, causing havok in scrollbar theme code that just assumes that
        it's always scrolled all the way to the left.

        Also, now that the scroll origin is passed into NCCH, handle
        scrollOrigin.y() for layer adjusting. This is always zero in practice,
        but it seemed awkward to just drop it and that assumption could always
        change in the future.

        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::setViewport):
        (WebKit::NonCompositedContentHost::paintContents):
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::updateLayerTreeViewport):

2012-06-12  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Make damage tracking more robust to early exits
        https://bugs.webkit.org/show_bug.cgi?id=84803

        Reviewed by James Robinson.

        * tests/CCDamageTrackerTest.cpp:
        (WebKitTests::clearDamageForAllSurfaces):
        (WebKitTests::TEST_F):

2012-06-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r120051.
        http://trac.webkit.org/changeset/120051
        https://bugs.webkit.org/show_bug.cgi?id=88852

        some tests are crashing (Requested by morrita on #webkit).

        * WebKit.gyp:
        * public/WebPermissionClient.h:
        (WebKit::WebPermissionClient::allowWebComponents):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowShadowDOM):
        (WebKit):
        (WebKit::FrameLoaderClientImpl::allowStyleScoped):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):
        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::initPage):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPermissionClient):
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:
        (WebKit):

2012-06-12  MORITA Hajime  <morrita@google.com>

        REGRESSION(r118098): <content> element does not render distributed children when cloned from another document
        https://bugs.webkit.org/show_bug.cgi?id=88148

        Reviewed by Dimitri Glazkov.

        - Added ContextFeaturesClientImpl which implements WebCore::ContextFeaturesClient.
        - Replaced PagePopupFrameLoaderClient with PagePopupFeaturesClient.

        * WebKit.gyp:
        * public/WebPermissionClient.h:
        (WebKit):
        (WebKit::WebPermissionClient::allowWebComponents):
        * src/ContextFeaturesClientImpl.cpp: Renamed from Source/WebCore/bindings/generic/ContextEnabledFeatures.cpp.
        (WebKit):
        (WebKit::ContextFeaturesClientImpl::isEnabled):
        * src/ContextFeaturesClientImpl.h: Renamed from Source/WebCore/bindings/generic/ContextEnabledFeatures.h.
        (WebKit):
        (ContextFeaturesClientImpl):
        (WebKit::ContextFeaturesClientImpl::ContextFeaturesClientImpl):
        (WebKit::ContextFeaturesClientImpl::setPermissionClient):
        * src/FrameLoaderClientImpl.cpp:
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):
        * src/WebPagePopupImpl.cpp:
        (PagePopupFeaturesClient):
        (WebKit::PagePopupFeaturesClient::isEnabled):
        (WebKit):
        (WebKit::WebPagePopupImpl::initPage):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setPermissionClient):
        (WebKit::WebViewImpl::WebViewImpl):
        * src/WebViewImpl.h:
        (WebKit):

2012-06-11  Nico Weber  <thakis@chromium.org>

        Remove unused member variables found by clang's -Wunused-private-field
        https://bugs.webkit.org/show_bug.cgi?id=88812

        Reviewed by Anders Carlsson.

        * src/AudioDestinationChromium.cpp:
        (WebCore::AudioDestinationChromium::AudioDestinationChromium):
        * src/AudioDestinationChromium.h:
        (AudioDestinationChromium):
        * src/InspectorFrontendClientImpl.cpp:
        (WebKit::InspectorFrontendClientImpl::InspectorFrontendClientImpl):
        * src/InspectorFrontendClientImpl.h:
        (InspectorFrontendClientImpl):
        * src/WebFrameImpl.cpp:
        (ChromePluginPrintContext):
        * src/WebInputEvent.cpp:
        * src/WorkerAsyncFileSystemChromium.cpp:
        (WebCore::WorkerAsyncFileSystemChromium::createWorkerFileSystemCallbacksBridge):
        * src/WorkerAsyncFileWriterChromium.cpp:
        (WebCore::WorkerAsyncFileWriterChromium::WorkerAsyncFileWriterChromium):
        * src/WorkerAsyncFileWriterChromium.h:
        (WorkerAsyncFileWriterChromium):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestSetVisible::CCLayerTreeHostTestSetVisible):
        (CCLayerTreeHostTestSetVisible):

2012-06-11  Vincent Scheib  <scheib@chromium.org>

        Consolidate Pointer Lock runtime enabled flags to just one.
        https://bugs.webkit.org/show_bug.cgi?id=88810

        Reviewed by Dimitri Glazkov.

        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enablePointerLock):
        (WebKit::WebRuntimeFeatures::isPointerLockEnabled):

2012-06-11  Alexis Menard  <alexis.menard@openbossa.org>

        [CSS3 Backgrounds and Borders] Protect box-decoration-break behind a feature flag.
        https://bugs.webkit.org/show_bug.cgi?id=88804

        Reviewed by Tony Chang.

        Protect box-decoration-break behind a feature flag enabled by default.

        * features.gypi:

2012-05-11  James Robinson  <jamesr@chromium.org>

        [chromium] Port DrawingBufferChromium from TextureLayerChromium over to WebExternalTextureLayer
        https://bugs.webkit.org/show_bug.cgi?id=86273

        Reviewed by Adrienne Walker.

        * src/WebExternalTextureLayer.cpp:
        (WebTextureUpdaterImpl):
        (WebKit::WebTextureUpdaterImpl::WebTextureUpdaterImpl):
        (WebKit):
        (WebExternalTextureLayerImpl):
        (WebKit::WebExternalTextureLayerImpl::WebExternalTextureLayerImpl):
        (WebKit::WebExternalTextureLayer::create):
        (WebKit::WebExternalTextureLayer::clearClient):
        (WebKit::WebExternalTextureLayer::setOpaque):
        (WebKit::WebExternalTextureLayer::setPremultipliedAlpha):

2012-06-11  Dana Jansens  <danakj@chromium.org>

        [chromium] Separate CCVideoDrawQuad and from the layer tree and video provider by removing ManagedTexture and WebVideoFrame pointers from the quad
        https://bugs.webkit.org/show_bug.cgi?id=88363

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/CCTiledLayerTestCommon.h:
        (WebKitTests::FakeTextureCopier::copyToTexture):
        * tests/Canvas2DLayerChromiumTest.cpp:

2012-06-11  Joshua Bell  <jsbell@chromium.org>

        IndexedDB: Object stores are not successfully deleted
        https://bugs.webkit.org/show_bug.cgi?id=88788

        Reviewed by Tony Chang.

        * tests/IDBLevelDBCodingTest.cpp:
        (IDBLevelDBCoding::TEST):

2012-06-11  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Implement position:fixed in compositor thread
        https://bugs.webkit.org/show_bug.cgi?id=70103

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:

2012-06-11  Sam Weinig  <sam@webkit.org>

        Remove support for disconnected/excluded from search frames, they are not used by Safari anymore
        https://bugs.webkit.org/show_bug.cgi?id=88723

        Reviewed by Dan Bernstein.

        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::scopeStringMatches):

2012-06-11  Varun Jain  <varunjain@chromium.org>

        [chromium] WebInputEvent::isGestureEventType should return true for GestureTwoFingerTap
        https://bugs.webkit.org/show_bug.cgi?id=88789

        Reviewed by Adam Barth.

        * public/WebInputEvent.h:
        (WebKit::WebInputEvent::isGestureEventType):

2012-06-11  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Call shared timer functions directly
        https://bugs.webkit.org/show_bug.cgi?id=88781

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore):

2012-06-11  Amy Ousterhout  <aousterh@chromium.org>

        [Chromium] Removing long WebDeviceOrientation constructor
        https://bugs.webkit.org/show_bug.cgi?id=88779

        Reviewed by Adam Barth.

        Removing the WebDeviceOrientation constructor with nine parameters.
        Chromium has been changed to use the default constructor and setter
        functions instead (see https://chromiumcodereview.appspot.com/10542025/).

        * public/WebDeviceOrientation.h:

2012-06-11  David Dorwin  <ddorwin@chromium.org>

        [chromium] Provide access to the WebPlugin created by the helper plugin widget
        https://bugs.webkit.org/show_bug.cgi?id=88028

        Reviewed by Adam Barth.

        A WebPlugin is created when the document created by createHelperPlugin() is laid out.
        Expose it so the embedder can interact with the plugin instance.

        * public/WebHelperPlugin.h:
        (WebKit):
        (WebHelperPlugin):
        * public/WebMediaPlayerClient.h:
        (WebKit):
        * public/WebPlugin.h:
        (WebKit::WebPlugin::isPlaceholder):
        (WebPlugin):
        * src/WebHelperPluginImpl.cpp:
        (WebKit::WebHelperPluginImpl::WebHelperPluginImpl):
        (WebKit):
        (WebKit::WebHelperPluginImpl::getPlugin):
        (WebKit::WebHelperPluginImpl::initPage):
        (WebKit::WebHelperPluginImpl::close):
        * src/WebHelperPluginImpl.h:
        (WebKit):
        (WebHelperPluginImpl):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::createHelperPlugin):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):
        * src/WebPagePopupImpl.cpp:

2012-06-05  Dana Jansens  <danakj@chromium.org>

        [chromium] Free texture from CCIOSurfaceLayerImpl when it is destroyed
        https://bugs.webkit.org/show_bug.cgi?id=88371

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-11  Kent Tamura  <tkent@chromium.org>

        [Chromium] Should call frameDetached() in WebPagePopupImpl::close()
        https://bugs.webkit.org/show_bug.cgi?id=88754

        Reviewed by Adam Barth.

        * src/WebPagePopupImpl.cpp:
        (WebKit::WebPagePopupImpl::close): Calls FrameLoader::frameDetached().

2012-06-11  Min Qin  <qinmin@google.com>

        Adding a flag to show fullscreen media controls in chromium
        https://bugs.webkit.org/show_bug.cgi?id=88266

        Reviewed by Adam Barth.

        Adding a flag to the gyp file so that we can enable fullscreen media control
        
        * features.gypi:

2012-06-09  Eugene Klyuchnikov  <eustas.bug@gmail.com>

        Web Inspector: Add message loop instrumentation to public API and timeline agent
        https://bugs.webkit.org/show_bug.cgi?id=88639

        Reviewed by Vsevolod Vlasov.

        Message loop instrumentation will show when the render thread is busy.
        That way developer can discover if a render thread business causes low fps, or not.

        * public/WebDevToolsAgent.h:
        (WebDevToolsAgent):
        * public/WebDevToolsAgentClient.h:
        (WebDevToolsAgentClient):
        (WebKit::WebDevToolsAgentClient::startMessageLoopMonitoring):
        Request message loop notifications.
        (WebKit::WebDevToolsAgentClient::stopMessageLoopMonitoring):
        Cancel message loop notifications.
        * src/InspectorClientImpl.cpp:
        (WebKit::InspectorClientImpl::startMessageLoopMonitoring):
        Request message loop notifications.
        (WebKit):
        (WebKit::InspectorClientImpl::stopMessageLoopMonitoring):
        Cancel message loop notifications.
        * src/InspectorClientImpl.h:
        (InspectorClientImpl):
        * src/WebDevToolsAgentImpl.cpp:
        (WebKit::WebDevToolsAgentImpl::startMessageLoopMonitoring):
        Request message loop notifications.
        (WebKit):
        (WebKit::WebDevToolsAgentImpl::stopMessageLoopMonitoring):
        Cancel message loop notifications.
        (WebKit::WebDevToolsAgentImpl::instrumentWillProcessTask):
        Message loop notification.
        (WebKit::WebDevToolsAgentImpl::instrumentDidProcessTask):
        Ditto.
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2012-06-08  David Reveman  <reveman@chromium.org>

        [Chromium] Compositor doesn't support translucent root layers.
        https://bugs.webkit.org/show_bug.cgi?id=87821

        Reviewed by James Robinson.

        * src/NonCompositedContentHost.cpp:
        (WebKit::NonCompositedContentHost::setOpaque):
        (WebKit):
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::setHasTransparentBackground):
        (WebKit):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsTransparent):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/LayerRendererChromiumTest.cpp:
        (ClearCountingContext):
        (ClearCountingContext::ClearCountingContext):
        (ClearCountingContext::clear):
        (ClearCountingContext::clearCount):
        (TEST):

2012-06-08  Ian Vollick  <vollick@chromium.org>

        [chromium] Single thread proxy's animation timer should short circuit if the layer renderer has not been initialized
        https://bugs.webkit.org/show_bug.cgi?id=88668

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestWriteLayersRedraw::beginTest):
        (WTF::CCLayerTreeHostTestWriteLayersAfterVisible::commitCompleteOnCCThread):
        (WTF):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::CCLayerTreeHostTestLayerAddedWithAnimation):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::beginTest):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::didAddAnimation):
        (CCLayerTreeHostTestLayerAddedWithAnimation):
        * tests/CCSingleThreadProxyTest.cpp: Added.
        (FakeWebGraphicsContext3DMakeCurrentFails):
        (FakeWebGraphicsContext3DMakeCurrentFails::makeContextCurrent):
        (CCSingleThreadProxyTestInitializeLayerRendererFailsAfterAddAnimation):
        (CCSingleThreadProxyTestInitializeLayerRendererFailsAfterAddAnimation::CCSingleThreadProxyTestInitializeLayerRendererFailsAfterAddAnimation):
        (CCSingleThreadProxyTestInitializeLayerRendererFailsAfterAddAnimation::beginTest):
        (CCSingleThreadProxyTestInitializeLayerRendererFailsAfterAddAnimation::animateLayers):
        (CCSingleThreadProxyTestInitializeLayerRendererFailsAfterAddAnimation::didRecreateContext):
        (CCSingleThreadProxyTestInitializeLayerRendererFailsAfterAddAnimation::afterTest):
        (TEST_F):
        (CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer):
        (CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer::CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer):
        (CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer::beginTest):
        (CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer::animateLayers):
        (CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer::didRecreateContext):
        (CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer::didAddAnimation):
        (CCSingleThreadProxyTestDidAddAnimationBeforeInitializingLayerRenderer::afterTest):
        * tests/CCThreadedTest.cpp: Added.
        (WebKitTests):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::create):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::createTexture):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::deleteTexture):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::bindTexture):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::numTextures):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::texture):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::resetTextures):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::numUsedTextures):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::usedTexture):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::resetUsedTextures):
        (WebKitTests::CompositorFakeWebGraphicsContext3DWithTextureTracking::CompositorFakeWebGraphicsContext3DWithTextureTracking):
        (WebKitTests::TestHooks::createContext):
        (WebKitTests::MockLayerTreeHostImpl::create):
        (WebKitTests::MockLayerTreeHostImpl::beginCommit):
        (WebKitTests::MockLayerTreeHostImpl::commitComplete):
        (WebKitTests::MockLayerTreeHostImpl::prepareToDraw):
        (WebKitTests::MockLayerTreeHostImpl::drawLayers):
        (WebKitTests::MockLayerTreeHostImpl::animateLayers):
        (WebKitTests::MockLayerTreeHostImpl::lowFrequencyAnimationInterval):
        (WebKitTests::MockLayerTreeHostImpl::MockLayerTreeHostImpl):
        (MockLayerTreeHost):
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (MockLayerTreeHostClient):
        (WebKitTests::MockLayerTreeHostClient::create):
        (WebKitTests::MockLayerTreeHostClient::MockLayerTreeHostClient):
        (TimeoutTask):
        (WebKitTests::TimeoutTask::TimeoutTask):
        (WebKitTests::TimeoutTask::clearTest):
        (WebKitTests::TimeoutTask::~TimeoutTask):
        (WebKitTests::TimeoutTask::run):
        (BeginTask):
        (WebKitTests::BeginTask::BeginTask):
        (WebKitTests::BeginTask::~BeginTask):
        (WebKitTests::BeginTask::run):
        (EndTestTask):
        (WebKitTests::EndTestTask::EndTestTask):
        (WebKitTests::EndTestTask::~EndTestTask):
        (WebKitTests::EndTestTask::clearTest):
        (WebKitTests::EndTestTask::run):
        (WebKitTests::CCThreadedTest::CCThreadedTest):
        (WebKitTests::CCThreadedTest::endTest):
        (WebKitTests::CCThreadedTest::endTestAfterDelay):
        (WebKitTests::CCThreadedTest::postSetNeedsAnimateToMainThread):
        (WebKitTests::CCThreadedTest::postAddAnimationToMainThread):
        (WebKitTests::CCThreadedTest::postAddInstantAnimationToMainThread):
        (WebKitTests::CCThreadedTest::postSetNeedsCommitToMainThread):
        (WebKitTests::CCThreadedTest::postAcquireLayerTextures):
        (WebKitTests::CCThreadedTest::postSetNeedsRedrawToMainThread):
        (WebKitTests::CCThreadedTest::postSetNeedsAnimateAndCommitToMainThread):
        (WebKitTests::CCThreadedTest::postSetVisibleToMainThread):
        (WebKitTests::CCThreadedTest::postDidAddAnimationToMainThread):
        (WebKitTests::CCThreadedTest::doBeginTest):
        (WebKitTests::CCThreadedTest::timeout):
        (WebKitTests::CCThreadedTest::scheduleComposite):
        (WebKitTests::CCThreadedTest::onEndTest):
        (WebKitTests::CCThreadedTest::dispatchSetNeedsAnimate):
        (WebKitTests::CCThreadedTest::dispatchAddInstantAnimation):
        (WebKitTests::CCThreadedTest::dispatchAddAnimation):
        (WebKitTests::CCThreadedTest::dispatchSetNeedsAnimateAndCommit):
        (WebKitTests::CCThreadedTest::dispatchSetNeedsCommit):
        (WebKitTests::CCThreadedTest::dispatchAcquireLayerTextures):
        (WebKitTests::CCThreadedTest::dispatchSetNeedsRedraw):
        (WebKitTests::CCThreadedTest::dispatchSetVisible):
        (WebKitTests::CCThreadedTest::dispatchSetInvisible):
        (WebKitTests::CCThreadedTest::dispatchComposite):
        (WebKitTests::CCThreadedTest::dispatchDidAddAnimation):
        (WebKitTests::CCThreadedTest::runTest):
        * tests/CCThreadedTest.h: Added.
        (WebCore):
        (WebKit):
        (WebKitTests):
        (TestHooks):
        (WebKitTests::TestHooks::beginCommitOnCCThread):
        (WebKitTests::TestHooks::commitCompleteOnCCThread):
        (WebKitTests::TestHooks::prepareToDrawOnCCThread):
        (WebKitTests::TestHooks::drawLayersOnCCThread):
        (WebKitTests::TestHooks::animateLayers):
        (WebKitTests::TestHooks::willAnimateLayers):
        (WebKitTests::TestHooks::applyScrollAndScale):
        (WebKitTests::TestHooks::updateAnimations):
        (WebKitTests::TestHooks::layout):
        (WebKitTests::TestHooks::didRecreateContext):
        (WebKitTests::TestHooks::didAddAnimation):
        (WebKitTests::TestHooks::didCommit):
        (WebKitTests::TestHooks::didCommitAndDrawFrame):
        (WebKitTests::TestHooks::scheduleComposite):
        (WebKitTests::TestHooks::notifyAnimationStarted):
        (WebKitTests::TestHooks::notifyAnimationFinished):
        (CCThreadedTest):
        (WebKitTests::CCThreadedTest::clearTimeout):
        (WebKitTests::CCThreadedTest::clearEndTestTask):
        (WebKitTests::CCThreadedTest::layerTreeHost):
        (CCThreadedTestThreadOnly):
        (WebKitTests::CCThreadedTestThreadOnly::runTestThreaded):
        (MockLayerTreeHostImpl):
        (CompositorFakeWebGraphicsContext3DWithTextureTracking):

2012-06-08  David Grogan  <dgrogan@chromium.org>

        IndexedDB: rename some instances of open to registerFrontendCallbacks
        https://bugs.webkit.org/show_bug.cgi?id=88611

        Reviewed by Tony Chang.

        * src/IDBDatabaseBackendProxy.cpp:
        (WebKit::IDBDatabaseBackendProxy::registerFrontendCallbacks):
        * src/IDBDatabaseBackendProxy.h:
        (IDBDatabaseBackendProxy):
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::open):
        * src/WebIDBDatabaseImpl.h:
        (WebIDBDatabaseImpl):

2012-06-08  Dana Jansens  <danakj@chromium.org>

        [chromium] Skip willDraw() and didDraw() on fully occluded layers
        https://bugs.webkit.org/show_bug.cgi?id=88435

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-08  James Robinson  <jamesr@chromium.org>

        [chromium] Clean up some unnecessary LayerChromium.h includes
        https://bugs.webkit.org/show_bug.cgi?id=88599

        Reviewed by Adam Barth.

        Removes unused include, update comment.

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::platformLayer):
        (WebKit::WebMediaPlayerClientImpl::paint):

2012-06-08  Jochen Eisinger  <jochen@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-08  Ian Vollick  <vollick@chromium.org>

        [chromium] Accelerated animations should use WebTransformOperations
        https://bugs.webkit.org/show_bug.cgi?id=87686

        Reviewed by James Robinson.

        CCTransformKeyframe new owns a WebTransformOperations rather than a
        TransformOperations. LayerChromium's API has been changed so that
        LayerChromium::addAnimation should take only a CCActiveAnimation.
        GraphicsLayerChromium is new responsible for translating to
        WebTransformOperations and creating CCActiveAnimations. Tests that use
        the public API (that is, they call addAnimation with KeyframeValueList
        and Animation arguments) have been moved to GraphicsLayerChromiumTest.

        * tests/CCAnimationTestCommon.cpp:
        (WebCore::addOpacityTransition):
        (WebCore::addAnimatedTransform):
        (WebKitTests::FakeTransformTransition::getValue):
        * tests/CCAnimationTestCommon.h:
        * tests/CCKeyframedAnimationCurveTest.cpp:
        * tests/CCLayerAnimationControllerTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::beginTest):
        * tests/GraphicsLayerChromiumTest.cpp:
        (MockLayerTreeHostClient):
        (WebKitTests):
        (MockLayerTreeHost):
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (GraphicsLayerChromiumTest):
        (WebKitTests::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        (WebKitTests::GraphicsLayerChromiumTest::~GraphicsLayerChromiumTest):
        (WebKitTests::GraphicsLayerChromiumTest::expectTranslateX):
        (WebKitTests::TEST_F):
        * tests/LayerChromiumTest.cpp:

2012-06-08  Robert Kroeger  <rjkroege@chromium.org>

        More than 8 fingers get ignored by touch
        https://bugs.webkit.org/show_bug.cgi?id=88359

        Reviewed by James Robinson.

        * public/WebInputEvent.h: Increase of TouchPoints per TouchEvent from 8 to 12.

2012-06-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-08  Taiju Tsuiki  <tzik@chromium.org>

        Add FileSystem item to storage tree.
        https://bugs.webkit.org/show_bug.cgi?id=72691

        Reviewed by Vsevolod Vlasov.

        * src/js/DevTools.js:

2012-06-08  Peter Beverloo  <peter@chromium.org>

        [Chromium] Re-enable SHARED_WORKERS for Android until a build fix has been resolved.
        https://bugs.webkit.org/show_bug.cgi?id=88637

        Unreviewed build fix.

        Linking content_shell on the Chromium side fails due to an unresolved
        call to WebSharedWorker::create(). Since this blocks WebKit rolls,
        temporarily re-enable the feature until this has been solved.

        * features.gypi:

2012-06-07  Nico Weber  <thakis@chromium.org>

        [chromium/mac] Improve deviceDPI, rect, and availableRect computation
        https://bugs.webkit.org/show_bug.cgi?id=88596

        Reviewed by Adam Barth.

        Set deviceDPI to 160 for normal displays and 320 for HiDPI displays.
        (Why 160? That's what chromium's render_view.cc assumes as default
        single-resolution resolution at the moment. The only other place
        where this number gets used is fixed layout mode, which is currently
        not enabled.)

        Also fix rect and availableRect computations: They get returned in
        user space already.

        Needed for http://crbug.com/31960.

        * src/mac/WebScreenInfoFactory.mm:
        (WebKit::toUserSpace):
        (WebKit::deviceScaleFactor):
        (WebKit):
        (WebKit::WebScreenInfoFactory::screenInfo):

2012-06-07  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move didStartWorkerRunLoop to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=88562

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore):

2012-06-05  James Robinson  <jamesr@chromium.org>

        [chromium] Move deferral-related logic out of Canvas2DLayerChromium
        https://bugs.webkit.org/show_bug.cgi?id=86050

        Reviewed by Stephen White.

        * WebKit.gypi:
        * tests/Canvas2DLayerBridgeTest.cpp: Renamed from tests/Canvas2DLayerChromiumTest
        (Canvas2DLayerBridgeTest):
        (Canvas2DLayerBridgeTest::fullLifecycleTest):

2012-06-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119744.
        http://trac.webkit.org/changeset/119744
        https://bugs.webkit.org/show_bug.cgi?id=88584

        Fails assertions in debug builds (Requested by jamesr_ on
        #webkit).

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-07  Adam Barth  <abarth@webkit.org>

        Settings::defaultDeviceScaleFactor is redundant with Page::deviceScaleFactor
        https://bugs.webkit.org/show_bug.cgi?id=88375

        Reviewed by James Robinson.

        * public/WebSettings.h:
        (WebKit::WebSettings::setDefaultDeviceScaleFactor):
        (WebSettings):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebSettingsImpl.cpp:
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):

2012-06-07  Peter Beverloo  <peter@chromium.org>

        [Chromium] features.gypi should have the correct definitions for Android
        https://bugs.webkit.org/show_bug.cgi?id=88533

        Reviewed by Adam Barth.

        Make all features which are enabled on Android but disabled on other platforms,
        or are disabled on Android while enabled on other platforms, conditional. This
        also means that the selection of code compiled for Android will slightly change.

        This change also removes the enable_viewport variable as the value of this is
        no longer respected by WebKit - it's enabled by default for all of Chromium.
        Furthermore, ENABLE_OVERFLOW_SCROLLING is now listed in features.gypi again.

        * features.gypi:

2012-06-07  Dana Jansens  <danakj@chromium.org>

        [chromium] Free texture from CCIOSurfaceLayerImpl when it is destroyed
        https://bugs.webkit.org/show_bug.cgi?id=88371

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-07  Ami Fischman  <fischman@chromium.org>

        Plumb CORS attribute information from HTMLMediaElement to media players so it can be used
        https://bugs.webkit.org/show_bug.cgi?id=88349

        Reviewed by Adam Barth.

        * public/WebMediaPlayer.h:
        (WebMediaPlayer):
        * src/AssertMatchingEnums.cpp:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        (WebKit::WebMediaPlayerClientImpl::didPassCORSAccessCheck):
        (WebKit):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-06-07  Daniel Erat  <derat@chromium.org>

        Add setting to enable subpixel-positioned text on Linux.
        https://bugs.webkit.org/show_bug.cgi?id=88263

        Reviewed by Tony Chang.

        Add subpixel positioning field to WebFontRenderStyle and rename
        subpixel rendering field.  Make similar changes in
        WebFontRendering.

        Also add global WebFontInfo::setSubpixelPositioning() to turn
        subpixel positioning on or off (there's not currently a
        well-defined way to configure subpixel positioning via FontConfig).

        * public/linux/WebFontInfo.h:
        (WebFontInfo):
        * public/linux/WebFontRenderStyle.h:
        * public/linux/WebFontRendering.h:
        (WebFontRendering):
        * src/linux/WebFontInfo.cpp:
        (WebKit):
        (WebKit::WebFontInfo::setSubpixelPositioning):
        (WebKit::WebFontInfo::renderStyleForStrike):
        * src/linux/WebFontRenderStyle.cpp:
        (WebKit::WebFontRenderStyle::toFontRenderStyle):
        (WebKit::WebFontRenderStyle::setDefaults):
        * src/linux/WebFontRendering.cpp:
        (WebKit::WebFontRendering::setSubpixelGlyphs):
        (WebKit):
        (WebKit::WebFontRendering::setSubpixelRendering):
        (WebKit::WebFontRendering::setSubpixelPositioning):

2012-06-06  Dana Jansens  <danakj@chromium.org>

        [chromium] In each composited frame, didDraw() should only be called on layers for which willDraw() was called
        https://bugs.webkit.org/show_bug.cgi?id=88469

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119694.
        http://trac.webkit.org/changeset/119694
        https://bugs.webkit.org/show_bug.cgi?id=88529

        it broke PrerenderBrowserTest.PrerenderHTML5VideoNetwork
        (Requested by loislo on #webkit).

        * public/WebMediaPlayer.h:
        (WebMediaPlayer):
        * src/AssertMatchingEnums.cpp:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::loadInternal):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-06-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119689.
        http://trac.webkit.org/changeset/119689
        https://bugs.webkit.org/show_bug.cgi?id=88516

        it broke didDrawNotCalledOnScissoredLayer webkit_unit_test
        (Requested by loislo on #webkit).

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-07  Ami Fischman  <fischman@chromium.org>

        Plumb CORS attribute information from HTMLMediaElement to media players so it can be used
        https://bugs.webkit.org/show_bug.cgi?id=88349

        Reviewed by Adam Barth.

        * public/WebMediaPlayer.h:
        (WebMediaPlayer):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::loadInternal):

2012-06-07  Yoshifumi Inoue  <yosin@chromium.org>

        [Platform] Introduce conversion from/to Deciaml to/from double and helper functions
        https://bugs.webkit.org/show_bug.cgi?id=88480

        Reviewed by Kent Tamura.

        This patch added tests for Decimal::fromDouble, isInfinity, toDouble.

        * tests/DecimalTest.cpp:
        (TEST_F):

2012-06-07  Ami Fischman  <fischman@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-06  Dana Jansens  <danakj@chromium.org>

        [chromium] In each composited frame, didDraw() should only be called on layers for which willDraw() was called
        https://bugs.webkit.org/show_bug.cgi?id=88469

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-06  Kent Tamura  <tkent@chromium.org>

        Unreviewed, rolling out r60044.
        http://trac.webkit.org/changeset/60044

        It made a regression, crbug.com/114922.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::invalidateContentsForSlowScroll): Do not hide popups by scrolling.
        (WebKit::ChromeClientImpl::scroll): ditto.

2012-06-06  Noel Gordon  <noel.gordon@gmail.com>

        Unreviewed. Rolled DEPS.

        * DEPS: Roll to chromium 140955.

2012-06-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119683.
        http://trac.webkit.org/changeset/119683
        https://bugs.webkit.org/show_bug.cgi?id=88505

        it broke webkit-unit-test
        WebLayerTreeViewThreadedTest.InstrumentationCallbacks on mac
        (Requested by loislo on #webkit).

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::create):
        * tests/Canvas2DLayerChromiumTest.cpp:
        (Canvas2DLayerChromiumTest::fullLifecycleTest):

2012-06-06  Robert Kroeger  <rjkroege@chromium.org>

        [Chromium] Re-enable handling of smooth scrolling on Chromium Linux/Windows
        https://bugs.webkit.org/show_bug.cgi?id=87535 by adding support for precise
        scrolling deltas on all Chromium platforms.

        Reviewed by James Robinson.

        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformWheelEventBuilder::PlatformWheelEventBuilder): Create PlatformWheelEvents
        with m_hasPreciseScrollingDelta flag as required.
        * tests/ScrollAnimatorNoneTest.cpp: Added new unit test condiiton for precise scrolling.
        (TEST):

2012-06-06  Michal Mocny  <mmocny@google.com>

        [chromium] Stop dropping texture limits when the layer tree host becomes invisible, and initialize with 0 allocation.
        https://bugs.webkit.org/show_bug.cgi?id=87747

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::create):
        * tests/Canvas2DLayerChromiumTest.cpp:
        (Canvas2DLayerChromiumTest::fullLifecycleTest):

2012-06-06  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move createMessagePortChannel to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=85764

        Reviewed by Adam Barth.
        
        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/WebFrame.h:
        (WebFrame):
        * public/WebMessagePortChannel.h:
        * public/WebMessagePortChannelClient.h:
        * public/WebSharedWorkerClient.h:
        (WebSharedWorkerClient):
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::injectIDBKeyIntoSerializedValue):
        * src/PlatformMessagePortChannel.cpp:
        (WebCore::PlatformMessagePortChannel::PlatformMessagePortChannel):
        * src/PlatformMessagePortChannel.h:
        * src/SharedWorkerRepository.cpp:
        * src/WebSharedWorkerImpl.cpp:

2012-06-06  Amy Ousterhout  <aousterh@chromium.org>

        [Chromium] DeviceOrientation cleanup
        https://bugs.webkit.org/show_bug.cgi?id=88406

        Reviewed by Kent Tamura.

        Made default constructor public and added a set function for each property.
        This will allow us to remove the 8-parameter constructor.

        * public/WebDeviceOrientation.h:
        (WebKit::WebDeviceOrientation::WebDeviceOrientation):
        (WebKit::WebDeviceOrientation::setNull):
        (WebKit::WebDeviceOrientation::setAlpha):
        (WebKit::WebDeviceOrientation::setBeta):
        (WebKit::WebDeviceOrientation::setGamma):
        (WebKit::WebDeviceOrientation::setAbsolute):
        (WebDeviceOrientation):

2012-06-06  James Robinson  <jamesr@chromium.org>

        [chromium] Move implementation of WebCore::GraphicsContext3D and related from WebKit/chromium/src to WebCore/platform/chromium/support
        https://bugs.webkit.org/show_bug.cgi?id=86257

        Reviewed by Kenneth Russell.

        * WebKit.gyp:

2012-06-06  James Robinson  <jamesr@chromium.org>

        [chromium] Unreviewed build fix, add an apparently used include of OwnArrayPtr.h back to GraphicsContext3DPrivate.h
        https://bugs.webkit.org/show_bug.cgi?id=88468

        * src/GraphicsContext3DPrivate.h:

2012-06-06  James Robinson  <jamesr@chromium.org>

        [chromium] Clean up GraphicsContext3D implementation
        https://bugs.webkit.org/show_bug.cgi?id=88460

        Reviewed by Kenneth Russell.

        Chromium's implementation of the GraphicsContext3D implementation has been somewhat messy for historical
        reasons. The actual implementation of the majority of these functions is done by delegating to the Platform API
        WebGraphicsContext3D. A few bits of functionality - extension mapping, some compositor functionality, a readback
        utility - are implemented by code in WebKit. Previously, all GraphicsContext3D functions delegates to a clone of
        the interface in GraphicsContext3DPrivate which in turn delegated to WebGraphicsContext3D. This required
        duplicating the entire GraphicsContext3D interface and made updating the interface an epic pain in the rear.

        This patch provides the implementations of GraphicsContext3D functions in GraphicsContext3DChromium.cpp. Most of
        these functions delegate directly to WebGraphicsContext3D. The ones that do not delegate to
        GraphicsContext3DPrivate, which now has a dedicated header and cpp file. GraphicsContext3DPrivate.cpp implements
        all GraphicsContext3DPrivate functions. I've also reordered the implementation files so that the function order
        matches the associated header file and normalized the names of callback adapters.

        Refactor only, no change in functionality. Existing tests apply.

        * WebKit.gyp:
        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::ensureEnabled):
        (WebCore::Extensions3DChromium::getGraphicsResetStatusARB):
        (WebCore::Extensions3DChromium::blitFramebuffer):
        (WebCore::Extensions3DChromium::renderbufferStorageMultisample):
        (WebCore::Extensions3DChromium::postSubBufferCHROMIUM):
        (WebCore::Extensions3DChromium::mapBufferSubDataCHROMIUM):
        (WebCore::Extensions3DChromium::unmapBufferSubDataCHROMIUM):
        (WebCore::Extensions3DChromium::mapTexSubImage2DCHROMIUM):
        (WebCore::Extensions3DChromium::unmapTexSubImage2DCHROMIUM):
        (WebCore::Extensions3DChromium::setVisibilityCHROMIUM):
        (WebCore::Extensions3DChromium::discardFramebufferEXT):
        (WebCore::Extensions3DChromium::ensureFramebufferCHROMIUM):
        (WebCore::Extensions3DChromium::getTranslatedShaderSourceANGLE):
        (WebCore::Extensions3DChromium::rateLimitOffscreenContextCHROMIUM):
        (WebCore::Extensions3DChromium::texImageIOSurface2DCHROMIUM):
        (WebCore::Extensions3DChromium::texStorage2DEXT):
        (WebCore::Extensions3DChromium::createQueryEXT):
        (WebCore::Extensions3DChromium::deleteQueryEXT):
        (WebCore::Extensions3DChromium::isQueryEXT):
        (WebCore::Extensions3DChromium::beginQueryEXT):
        (WebCore::Extensions3DChromium::endQueryEXT):
        (WebCore::Extensions3DChromium::getQueryivEXT):
        (WebCore::Extensions3DChromium::getQueryObjectuivEXT):
        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3D::GraphicsContext3D):
        (WebCore::GraphicsContext3D::~GraphicsContext3D):
        (WebCore::GraphicsContext3D::setContextLostCallback):
        (WebCore::GraphicsContext3D::setErrorMessageCallback):
        (WebCore::GraphicsContext3D::create):
        (WebCore::GraphicsContext3D::platformGraphicsContext3D):
        (WebCore::GraphicsContext3D::platformTexture):
        (WebCore::GraphicsContext3D::grContext):
        (WebCore::GraphicsContext3D::platformLayer):
        (WebCore):
        (WebCore::GraphicsContext3D::isGLES2Compliant):
        (WebCore::GraphicsContext3D::isResourceSafe):
        (WebCore::GraphicsContext3D::bindAttribLocation):
        (WebCore::GraphicsContext3D::bufferData):
        (WebCore::GraphicsContext3D::getActiveAttrib):
        (WebCore::GraphicsContext3D::getActiveUniform):
        (WebCore::GraphicsContext3D::getAttribLocation):
        (WebCore::GraphicsContext3D::getContextAttributes):
        (WebCore::GraphicsContext3D::getProgramInfoLog):
        (WebCore::GraphicsContext3D::getShaderInfoLog):
        (WebCore::GraphicsContext3D::getShaderSource):
        (WebCore::GraphicsContext3D::getString):
        (WebCore::GraphicsContext3D::getUniformLocation):
        (WebCore::GraphicsContext3D::shaderSource):
        (WebCore::GraphicsContext3D::texImage2D):
        (WebCore::GraphicsContext3D::texSubImage2D):
        (WebCore::GraphicsContext3D::reshape):
        (WebCore::GraphicsContext3D::markContextChanged):
        (WebCore::GraphicsContext3D::layerComposited):
        (WebCore::GraphicsContext3D::markLayerComposited):
        (WebCore::GraphicsContext3D::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3D::paintRenderingResultsToImageData):
        (WebCore::GraphicsContext3D::paintCompositedResultsToCanvas):
        (WebCore::GraphicsContext3D::getExtensions):
        (WebCore::GraphicsContext3D::getInternalFramebufferSize):
        * src/GraphicsContext3DPrivate.cpp: Added.
        (WebCore):
        (WebCore::GraphicsContext3DPrivate::GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::~GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::createGraphicsContextFromWebContext):
        (WebCore::GraphicsContext3DPrivate::extractWebGraphicsContext3D):
        (GrMemoryAllocationChangedCallback):
        (WebCore::GrMemoryAllocationChangedCallback::GrMemoryAllocationChangedCallback):
        (WebCore::GrMemoryAllocationChangedCallback::onGpuMemoryAllocationChanged):
        (WebCore::GraphicsContext3DPrivate::grContext):
        (WebCore::GraphicsContext3DPrivate::markContextChanged):
        (WebCore::GraphicsContext3DPrivate::layerComposited):
        (WebCore::GraphicsContext3DPrivate::markLayerComposited):
        (WebCore::GraphicsContext3DPrivate::paintFramebufferToCanvas):
        (GraphicsContextLostCallbackAdapter):
        (WebCore::GraphicsContextLostCallbackAdapter::GraphicsContextLostCallbackAdapter):
        (WebCore::GraphicsContextLostCallbackAdapter::~GraphicsContextLostCallbackAdapter):
        (WebCore::GraphicsContextLostCallbackAdapter::onContextLost):
        (WebCore::GraphicsContext3DPrivate::setContextLostCallback):
        (GraphicsErrorMessageCallbackAdapter):
        (WebCore::GraphicsErrorMessageCallbackAdapter::GraphicsErrorMessageCallbackAdapter):
        (WebCore::GraphicsErrorMessageCallbackAdapter::~GraphicsErrorMessageCallbackAdapter):
        (WebCore::GraphicsErrorMessageCallbackAdapter::onErrorMessage):
        (WebCore::GraphicsContext3DPrivate::setErrorMessageCallback):
        (WebCore::GraphicsContext3DPrivate::getExtensions):
        (WebCore::GraphicsContext3DPrivate::initializeExtensions):
        (WebCore::GraphicsContext3DPrivate::supportsExtension):
        (WebCore::GraphicsContext3DPrivate::ensureExtensionEnabled):
        (WebCore::GraphicsContext3DPrivate::isExtensionEnabled):
        (WebCore::GraphicsContext3DPrivate::isResourceSafe):
        (GraphicsContext3DSwapBuffersCompleteCallbackAdapter):
        (WebCore::GraphicsContext3DSwapBuffersCompleteCallbackAdapter::GraphicsContext3DSwapBuffersCompleteCallbackAdapter):
        (WebCore::GraphicsContext3DSwapBuffersCompleteCallbackAdapter::~GraphicsContext3DSwapBuffersCompleteCallbackAdapter):
        (WebCore::GraphicsContext3DSwapBuffersCompleteCallbackAdapter::onSwapBuffersComplete):
        (WebCore::GraphicsContext3DPrivate::setSwapBuffersCompleteCallbackCHROMIUM):
        (GraphicsContext3DMemoryAllocationChangedCallbackAdapter):
        (WebCore::GraphicsContext3DMemoryAllocationChangedCallbackAdapter::GraphicsContext3DMemoryAllocationChangedCallbackAdapter):
        (WebCore::GraphicsContext3DMemoryAllocationChangedCallbackAdapter::~GraphicsContext3DMemoryAllocationChangedCallbackAdapter):
        (WebCore::GraphicsContext3DMemoryAllocationChangedCallbackAdapter::onMemoryAllocationChanged):
        (WebCore::GraphicsContext3DPrivate::setGpuMemoryAllocationChangedCallbackCHROMIUM):
        * src/GraphicsContext3DPrivate.h:
        (GraphicsContext3DPrivate):
        (WebCore::GraphicsContext3DPrivate::webContext):
        (WebCore::GraphicsContext3DPrivate::preserveDrawingBuffer):

2012-06-06  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Avoid limiting page-scale-factor when device-scale-factor is applied in the compositor.
        https://bugs.webkit.org/show_bug.cgi?id=88417

        Reviewed by James Robinson.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):

2012-06-06  Ami Fischman  <fischman@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-06  Nico Weber  <thakis@chromium.org>

        [chromium] Expose setPictographFontFamily through the chromium webkit api.
        https://bugs.webkit.org/show_bug.cgi?id=88393

        Reviewed by Adam Barth.

        This was added to WebCore in
        https://bugs.webkit.org/show_bug.cgi?id=65197

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setPictographFontFamily):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-06-06  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-06  Kinuko Yasuda  <kinuko@chromium.org>

        Roll Chromium DEPS from r140700 to r140711.

        * DEPS:

2012-06-06  Ami Fischman  <fischman@chromium.org>

        [chromium] Add a WebKit::WebMediaPlayer::CORSMode enum in preparation for 88349
        https://bugs.webkit.org/show_bug.cgi?id=88388

        Reviewed by Darin Fisher.

        * public/WebMediaPlayer.h:

2012-06-05  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from r140653 to r140700.

        * DEPS:

2012-06-05  Kentaro Hara  <haraken@chromium.org>

        Unreviewed, rolling out r119494.
        http://trac.webkit.org/changeset/119494
        https://bugs.webkit.org/show_bug.cgi?id=87911

        We found similar APIs are already implemented

        * public/WebWidget.h:
        * src/WebViewImpl.cpp:
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/WebViewTest.cpp:
        * tests/data/textarea.html: Removed.

2012-06-05  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from r140528 to r140653.

        * DEPS:

2012-06-05  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move createLocalStorageNamespace to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=85766

        Reviewed by James Robinson.
        
        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/WebStorageArea.h:
        * public/WebStorageNamespace.h:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKitPlatformSupport):

2012-06-05  Greg Billock  <gbillock@google.com>

        New constructor for WebIntent to be used for delivery
        https://bugs.webkit.org/show_bug.cgi?id=87143

        Reviewed by Darin Fisher.

        When delivering an intent to webkit, the caller needs to be able to
        provide the action, type, and data, and also extra data and ports.

        * public/WebIntent.h:
        (WebIntent):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::deliverIntent):
        * src/WebIntent.cpp:
        (WebKit::WebIntent::WebIntent):
        (WebKit):
        (WebKit::WebIntent::reset):
        (WebKit::WebIntent::messagePortChannelsRelease):

2012-06-05  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from r140492 to r140528.

        * DEPS:

2012-06-05  Seigo Nonaka  <nona@chromium.org>

        [chromium] There is no way to retrieve composition character rectangle in WebKit/chromium
        https://bugs.webkit.org/show_bug.cgi?id=87911

        Reviewed by Ryosuke Niwa.

        Add an API for retreieving each character bounds in composition text.
        This API is necessary for implementing IMR_QUERYCHARPOSITION message in Windows.
        The message is used by Japanese IME for showing their window at the correct position.

        * public/WebWidget.h:
        (WebWidget):
        (WebKit::WebWidget::compositionCharacterBounds):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::compositionCharacterBounds):
        (WebKit):
        * src/WebViewImpl.h:
        (WebViewImpl):

2012-06-05  Dongwoo Im  <dw.im@samsung.com>

        Add 'isProtocolHandlerRegistered' and 'unregisterProtocolHandler'.
        https://bugs.webkit.org/show_bug.cgi?id=73176

        Reviewed by Adam Barth.

        Two more APIs are added in Custom Scheme Handler specification.
        http://dev.w3.org/html5/spec/Overview.html#custom-handlers
        One is 'isProtocolHandlerRegistered' to query whether the specific URL
        is registered or not.
        The other is 'unregisterProtocolHandler' to remove the registered URL.

        * features.gypi: Add a macro 'ENABLE_CUSTOM_SCHEME_HANDLER'.

2012-06-05  Kent Tamura  <tkent@chromium.org>

        Move some function definitions in EmptyClients.h to EmptyClients.cpp
        https://bugs.webkit.org/show_bug.cgi?id=88285

        Reviewed by Ryosuke Niwa.

        * src/WebHelperPluginImpl.cpp: Remove unnecessary #includes, and add necessary #includes.
        * src/WebPagePopupImpl.cpp: ditto.

2012-06-05  Noel Gordon  <noel.gordon@gmail.com>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-05  Adam Barth  <abarth@webkit.org>

        EventHandler shouldn't dispatch fake mousemove events when scrolling on devices that don't have a mouse
        https://bugs.webkit.org/show_bug.cgi?id=88270

        Reviewed by James Robinson.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setDeviceSupportsMouse):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-06-04  Dana Jansens  <danakj@chromium.org>

        [chromium] Remove redundant setNeedsCommit when prepareToDraw fails
        https://bugs.webkit.org/show_bug.cgi?id=88246

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostImplTest.cpp:

2012-06-04  Dana Jansens  <danakj@chromium.org>

        [chromium] Allow CCLayerImpl to find its layer tree host, and use this for CCVideoLayerImpl instead of always-null pointer.
        https://bugs.webkit.org/show_bug.cgi?id=88252

        Reviewed by James Robinson.

        * tests/ScrollbarLayerChromiumTest.cpp:
        (WebCore::TEST):
        * tests/TreeSynchronizerTest.cpp:
        (WebKitTests::expectTreesAreIdentical):
        (WebKitTests::TEST):

2012-06-04  Ryosuke Niwa  <rniwa@webkit.org>

        yet another build fix attempt.

        * src/WebHelperPluginImpl.cpp:

2012-06-04  Ryosuke Niwa  <rniwa@webkit.org>

        Another Chromium Windows build fix attempt after r119411.

        * src/WebHelperPluginImpl.cpp:

2012-06-04  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] CCDamageTrackerTest.verifyDamageForPerspectiveClippedLayer needs to be cleaner
        https://bugs.webkit.org/show_bug.cgi?id=85245

        Reviewed by James Robinson.

        Updated CCDamageTrackerTest.verifyDamageForPerspectiveClippedLayer
        so that the test is clearer and cleaner. The original test was
        covering what it needed, but in a confusing and not-so-practical
        way. This patch adds comments and performs a tighter test so that
        the intent is a bit more clear.

        * tests/CCDamageTrackerTest.cpp:
        (WebKitTests::TEST_F):

2012-06-04  Ryosuke Niwa  <rniwa@webkit.org>

        Fix attempt after r119411.

        * src/WebHelperPluginImpl.cpp:

2012-06-04  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        [chromium] Fix software rendering for larger device-scale-factor
        https://bugs.webkit.org/show_bug.cgi?id=88136

        Reviewed by Darin Fisher.

        The fix is to apply the device-scale factor on the GraphicsContext.
        (and add a WebWidgetClient::deviceScaleFactor method to facilitate that).

        * public/WebWidgetClient.h:
        (WebWidgetClient):
        (WebKit::WebWidgetClient::deviceScaleFactor):
        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::paint):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::paint):

2012-06-04  Sadrul Habib Chowdhury  <sadrul@chromium.org>

        Combobox options and autofill options should not be scaled for device-scale factor.
        https://bugs.webkit.org/show_bug.cgi?id=87921

        Reviewed by Darin Fisher.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyAutofillSuggestions):

2012-06-04  Dana Jansens  <danakj@chromium.org>

        [chromium] Make LayerRendererChromium use RenderPasses instead of RenderSurfaces
        https://bugs.webkit.org/show_bug.cgi?id=88132

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/LayerRendererChromiumTest.cpp:
        (FakeCCRendererClient::FakeCCRendererClient):
        (FakeCCRendererClient::rootRenderPass):
        (FakeCCRendererClient):
        (TEST_F):

2012-06-04  David Dorwin  <ddorwin@chromium.org>

        Enable Chromium media player to instantiate a plugin
        https://bugs.webkit.org/show_bug.cgi?id=87399

        Reviewed by Kent Tamura.

        Adds WebHelperPlugin, an off-screen widget that contains an <object> tag.

        * WebKit.gyp:
        * public/WebHelperPlugin.h: Copied from Source/WebKit/chromium/public/WebPopupType.h.
        (WebKit):
        (WebHelperPlugin):
        (WebKit::WebHelperPlugin::~WebHelperPlugin):
        * public/WebMediaPlayerClient.h:
        (WebKit):
        * public/WebPopupType.h:
        * public/WebView.h:
        * public/WebViewClient.h:
        (WebKit):
        (WebViewClient):
        (WebKit::WebViewClient::initializeHelperPluginWebFrame):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::WebFrameImpl):
        (WebKit::WebFrameImpl::initializeAsMainFrame):
        * src/WebFrameImpl.h:
        (WebFrameImpl):
        * src/WebHelperPluginImpl.cpp: Added.
        (WebKit):
        (WebKit::addString):
        (WebKit::writeDocument):
        (HelperPluginChromeClient):
        (WebKit::HelperPluginChromeClient::HelperPluginChromeClient):
        (WebKit::WebHelperPluginImpl::WebHelperPluginImpl):
        (WebKit::WebHelperPluginImpl::~WebHelperPluginImpl):
        (WebKit::WebHelperPluginImpl::init):
        (WebKit::WebHelperPluginImpl::initializeFrame):
        (WebKit::WebHelperPluginImpl::initPage):
        (WebKit::WebHelperPluginImpl::setCompositorSurfaceReady):
        (WebKit::WebHelperPluginImpl::composite):
        (WebKit::WebHelperPluginImpl::layout):
        (WebKit::WebHelperPluginImpl::setFocus):
        (WebKit::WebHelperPluginImpl::close):
        (WebKit::WebHelperPluginImpl::closeHelperPlugin):
        (WebKit::WebHelperPlugin::create):
        * src/WebHelperPluginImpl.h: Copied from Source/WebKit/chromium/public/WebPopupType.h.
        (WebCore):
        (WebKit):
        (WebHelperPluginImpl):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::~WebMediaPlayerClientImpl):
        (WebKit::WebMediaPlayerClientImpl::createHelperPlugin):
        (WebKit):
        (WebKit::WebMediaPlayerClientImpl::closeHelperPlugin):
        * src/WebMediaPlayerClientImpl.h:
        (WebKit):
        (WebMediaPlayerClientImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::initializeMainFrame):
        (WebKit::WebViewImpl::initializeHelperPluginFrame):
        (WebKit):
        (WebKit::WebViewImpl::createHelperPlugin):
        * src/WebViewImpl.h:
        (WebKit):
        (WebViewImpl):

2012-06-04  Raymes Khoury  <raymes@chromium.org>

        Remove obsolete acceptMIMETypes member.
        https://bugs.webkit.org/show_bug.cgi?id=88241

        Reviewed by Darin Fisher.

        Obsoleted by https://bugs.webkit.org/show_bug.cgi?id=87271 and http://codereview.chromium.org/10414085/.

        * public/WebFileChooserParams.h:
        (WebFileChooserParams):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel):

2012-06-04  Zeev Lieber  <zlieber@chromium.org>

        [chromium] Cleanup scissor rect computation/use with damage
        https://bugs.webkit.org/show_bug.cgi?id=87167

        Reviewed by Adrienne Walker.

        Added unit tests to CCLayerTreeHostImpl using mock graphic context
        to verify end-to-end quad drawing.

        Added more test cases to CCLayerTreeHostCommon to verify clip and
        scissor rect computations.

        * tests/CCDamageTrackerTest.cpp:
        (WebKitTests::executeCalculateDrawTransformsAndVisibility):
        * tests/CCLayerIteratorTest.cpp:
        * tests/CCLayerTreeHostCommonTest.cpp:
        * tests/CCLayerTreeHostImplTest.cpp:
        * tests/CCOcclusionTrackerTest.cpp:
        (WebKitTests::CCOcclusionTrackerTest::calcDrawEtc):
        * tests/CCRenderSurfaceTest.cpp:

2012-06-03  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from r140222 to r140260.

        * DEPS:

2012-06-03  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from r140000 to r140222.

        * DEPS:

2012-06-03  Varun Jain  <varunjain@google.com>

        [chromium] Add new gesture type (two finger tap) that triggers context menu.
        https://bugs.webkit.org/show_bug.cgi?id=88173

        Reviewed by Adam Barth.

        * public/WebInputEvent.h:
        * src/PageWidgetDelegate.cpp:
        (WebKit::PageWidgetDelegate::handleInputEvent):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformGestureEventBuilder::PlatformGestureEventBuilder):
        * src/WebPopupMenuImpl.cpp:
        (WebKit::WebPopupMenuImpl::handleInputEvent):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleGestureEvent):

2012-06-03  Robert Kroeger  <rjkroege@chromium.org>

        [chromium] replace isScrollGestureEventType with isGestureEventType
        https://bugs.webkit.org/show_bug.cgi?id=88097

        This change replaces the unused and incorrect isScrollGestureEventType
        method with a correct and useful isGestureEventType method.

        Reviewed by Adam Barth.

        * public/WebInputEvent.h:
        (WebInputEvent):
        (WebKit::WebInputEvent::isGestureEventType):

2012-06-01  Alexandre Elias  <aelias@google.com>

        [chromium] Software compositor initialization and base classes
        https://bugs.webkit.org/show_bug.cgi?id=87920

        Reviewed by James Robinson.

        Add a new setting to force software compositing.  In this mode,
        no GraphicsContext3D should ever be created.

        * public/WebSettings.h:
        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::Settings::operator CCSettings):
        (WebKit::WebLayerTreeView::context):
        * src/WebLayerTreeViewImpl.cpp:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setForceSoftwareCompositing):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        (WebKit::WebSettingsImpl::forceSoftwareCompositing):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::createCompositorGraphicsContext3D):
        (WebKit::WebViewImpl::createContext3D):
        * tests/CCLayerTreeHostImplTest.cpp:
        (WebKitTests::CCLayerTreeHostImplTest::createContext):
        (WebKitTests::TEST_F):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestAtomicCommit::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestAtomicCommit::drawLayersOnCCThread):
        (WTF::CCLayerTreeHostTestAtomicCommitWithPartialUpdate::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestAtomicCommitWithPartialUpdate::drawLayersOnCCThread):
        * tests/CCTiledLayerTestCommon.cpp:
        (WebKitTests::FakeLayerTextureUpdater::Texture::updateRect):
        * tests/CCTiledLayerTestCommon.h:
        (Texture):
        (WebKitTests::FakeTextureCopier::copyTexture):
        (WebKitTests::FakeTextureUploader::uploadTexture):
        * tests/Canvas2DLayerChromiumTest.cpp:
        (Canvas2DLayerChromiumTest::fullLifecycleTest):
        * tests/FakeCCLayerTreeHostClient.h:
        * tests/LayerRendererChromiumTest.cpp:
        (FakeLayerRendererChromium::FakeLayerRendererChromium):
        (LayerRendererChromiumTest::LayerRendererChromiumTest):
        (LayerRendererChromiumTest):
        (TEST):
        * tests/TextureCopierTest.cpp:
        * tests/TiledLayerChromiumTest.cpp:
        (WTF::TEST):

2012-06-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119283, r119287, and r119291.
        http://trac.webkit.org/changeset/119283
        http://trac.webkit.org/changeset/119287
        http://trac.webkit.org/changeset/119291
        https://bugs.webkit.org/show_bug.cgi?id=88159

        Not only broke compilation in the initial commit but also
        broke LayerChromiumTest.basicCreateAndDestroy (Requested by
        rniwa on #webkit).

        * tests/CCAnimationTestCommon.cpp:
        (WebCore::addOpacityTransition):
        (WebCore::addAnimatedTransform):
        (WebKitTests::FakeTransformTransition::getValue):
        * tests/CCAnimationTestCommon.h:
        * tests/CCKeyframedAnimationCurveTest.cpp:
        * tests/CCLayerAnimationControllerTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::beginTest):
        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKitTests::MockGraphicsLayerClient::notifyAnimationStarted):
        (WebKitTests::MockGraphicsLayerClient::notifySyncRequired):
        (WebKitTests::MockGraphicsLayerClient::paintContents):
        (WebKitTests::MockGraphicsLayerClient::showDebugBorders):
        (WebKitTests::MockGraphicsLayerClient::showRepaintCounter):
        (WebKitTests::TEST):

2012-06-01  Ryosuke Niwa  <rniwa@webkit.org>

        Use fully qualified name for Fixed to avoid the collision with "typedef SInt32 Fixed" in MacTypes.h

        * tests/GraphicsLayerChromiumTest.cpp:
        (WebKitTests::TEST_F):

2012-06-01  James Robinson  <jamesr@chromium.org>

        [chromium] Unreviewed compile fix for r119283

        For the record, Dana Jensens <danakj@chromium.org> wrote this slightly faster than I did.

        * tests/CCAnimationTestCommon.h:

2012-06-01  Ian Vollick  <vollick@chromium.org>

        [chromium] Accelerated animations should use WebTransformOperations
        https://bugs.webkit.org/show_bug.cgi?id=87686

        Reviewed by James Robinson.

        CCTransformKeyframe new owns a WebTransformOperations rather than a
        TransformOperations. LayerChromium's API has been changed so that
        LayerChromium::addAnimation should take only a CCActiveAnimation.
        GraphicsLayerChromium is new responsible for translating to
        WebTransformOperations and creating CCActiveAnimations. Tests that use
        the public API (that is, they call addAnimation with KeyframeValueList
        and Animation arguments) have been moved to GraphicsLayerChromiumTest.

        * tests/CCAnimationTestCommon.cpp:
        (WebCore::addOpacityTransition):
        (WebCore::addAnimatedTransform):
        (WebKitTests::FakeTransformTransition::getValue):
        * tests/CCAnimationTestCommon.h:
        * tests/CCKeyframedAnimationCurveTest.cpp:
        (WebCore::TEST):
        * tests/CCLayerAnimationControllerTest.cpp:
        (WebKitTests::TEST):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::beginTest):
        * tests/GraphicsLayerChromiumTest.cpp:
        (MockLayerTreeHostClient):
        (WebKitTests):
        (MockLayerTreeHost):
        (WebKitTests::MockLayerTreeHost::create):
        (WebKitTests::MockLayerTreeHost::createLayerTreeHostImpl):
        (WebKitTests::MockLayerTreeHost::MockLayerTreeHost):
        (GraphicsLayerChromiumTest):
        (WebKitTests::GraphicsLayerChromiumTest::GraphicsLayerChromiumTest):
        (WebKitTests::GraphicsLayerChromiumTest::~GraphicsLayerChromiumTest):
        (WebKitTests::GraphicsLayerChromiumTest::expectTranslateX):
        (WebKitTests::TEST_F):

2012-06-01  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Call clipboard methods directly
        https://bugs.webkit.org/show_bug.cgi?id=88038

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/AssertMatchingEnums.cpp:
        * src/PlatformSupport.cpp:
        (WebCore::getCookieJar):

2012-06-01  Peter Beverloo  <peter@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-06-01  Yoshifumi Inoue  <yosin@chromium.org>

        [Platform][Decimal] UInt128::operator/= calls makeUInt128 with wrong argument order
        https://bugs.webkit.org/show_bug.cgi?id=88044

        Reviewed by Kent Tamura.

        * tests/DecimalTest.cpp:
        (TEST_F): Add a new test for multiplication.

2012-05-31  Hajime Morrita  <morrita@chromium.org>

        REGRESSION(r117572): editing/spelling/spellcheck-async-remove-frame.html crashes on Mac
        https://bugs.webkit.org/show_bug.cgi?id=86859

        Removed a port specific fix which was introduced at r117572.

        Reviewed by Ryosuke Niwa.

        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::frameWillDetachPage):
        (WebKit::EditorClientImpl::requestCheckingOfString):
        * src/EditorClientImpl.h:
        (WebCore):
        (EditorClientImpl):
        * src/WebTextCheckingCompletionImpl.cpp:
        (WebKit::WebTextCheckingCompletionImpl::didFinishCheckingText):
        (WebKit::WebTextCheckingCompletionImpl::didCancelCheckingText):
        * src/WebTextCheckingCompletionImpl.h:
        (WebKit::WebTextCheckingCompletionImpl::WebTextCheckingCompletionImpl):
        (WebTextCheckingCompletionImpl):

2012-05-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119146.
        http://trac.webkit.org/changeset/119146
        https://bugs.webkit.org/show_bug.cgi?id=88035

        android breakage fixed in http://crrev.com/139945 (Requested
        by fischman on #webkit).

        * public/WebMediaPlayer.h:
        (WebMediaPlayer):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::didLoadingProgress):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-05-31  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Migrate to WebTransformationMatrix
        https://bugs.webkit.org/show_bug.cgi?id=87788

        Reviewed by James Robinson.

        * src/WebLayer.cpp:
        (WebKit::WebLayer::setSublayerTransform):
        (WebKit::WebLayer::setTransform):
        * tests/CCAnimationTestCommon.cpp:
        (WebKitTests::FakeTransformTransition::getValue):
        * tests/CCAnimationTestCommon.h:
        * tests/CCDamageTrackerTest.cpp:
        (WebKitTests::executeCalculateDrawTransformsAndVisibility):
        (WebKitTests::TEST_F):
        * tests/CCKeyframedAnimationCurveTest.cpp:
        * tests/CCLayerAnimationControllerTest.cpp:
        * tests/CCLayerImplTest.cpp:
        (WebCore::TEST):
        * tests/CCLayerIteratorTest.cpp:
        * tests/CCLayerSorterTest.cpp:
        * tests/CCLayerTreeHostCommonTest.cpp:
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::CCLayerTreeHostTestDeviceScaleFactorScalesViewportAndLayers::commitCompleteOnCCThread):
        (WTF::setLayerPropertiesForTesting):
        (WTF::CCLayerTreeHostTestAtomicCommitWithPartialUpdate::beginTest):
        (WTF::setTestLayerPropertiesForTesting):
        (WTF::CCLayerTreeHostTestLayerOcclusion::beginTest):
        (WTF::CCLayerTreeHostTestLayerOcclusionWithFilters::beginTest):
        (WTF::CCLayerTreeHostTestManySurfaces::beginTest):
        * tests/CCLayerTreeTestCommon.h:
        (WebKitTests):
        * tests/CCMathUtilTest.cpp:
        * tests/CCOcclusionTrackerTest.cpp:
        (WebKitTests::CCOcclusionTrackerTest::createRoot):
        (WebKitTests::CCOcclusionTrackerTest::createLayer):
        (WebKitTests::CCOcclusionTrackerTest::createSurface):
        (WebKitTests::CCOcclusionTrackerTest::createDrawingLayer):
        (WebKitTests::CCOcclusionTrackerTest::createReplicaLayer):
        (WebKitTests::CCOcclusionTrackerTest::createDrawingSurface):
        (CCOcclusionTrackerTest):
        (WebKitTests::CCOcclusionTrackerTest::setBaseProperties):
        (WebKitTests::CCOcclusionTrackerTest::setProperties):
        (WebKitTests::CCOcclusionTrackerTestRotatedChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestTranslatedChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestChildInRotatedChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestVisitTargetTwoTimes::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceRotatedOffAxis::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceWithTwoOpaqueChildren::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestOverlappingSurfaceSiblings::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestOverlappingSurfaceSiblingsWithTwoTransforms::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestFilters::runMyTest):
        (WebKitTests::CCOcclusionTrackerTest3dTransform::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestPerspectiveTransform::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestPerspectiveTransformBehindCamera::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestLayerBehindCameraDoesNotOcclude::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestLargePixelsOccludeInsideClipRect::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceOcclusionTranslatesToParent::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestDontOccludePixelsNeededForBackgroundFilter::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestTwoBackgroundFiltersReduceOcclusionTwice::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestDontReduceOcclusionBelowBackgroundFilter::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestDontReduceOcclusionIfBackgroundFilterIsOccluded::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestReduceOcclusionWhenBackgroundFilterIsPartiallyOccluded::runMyTest):
        * tests/CCQuadCullerTest.cpp:
        * tests/CCRenderSurfaceTest.cpp:
        * tests/FloatQuadTest.cpp:
        * tests/LayerChromiumTest.cpp:
        * tests/LinkHighlightTest.cpp:
        * tests/TiledLayerChromiumTest.cpp:
        * tests/WebTransformationMatrixTest.cpp:
        (WebKit::TEST):
        (WebKit):

2012-05-31  Ian Vollick  <vollick@chromium.org>

        [chromium] Single thread proxy should not tick animations unless the layer renderer has been initialized
        https://bugs.webkit.org/show_bug.cgi?id=87873

        Reviewed by James Robinson.

        When the layer renderer fails to initialize, be sure to stop the animation timer.

        * tests/CCLayerTreeHostTest.cpp:
        (CompositorFakeWebGraphicsContext3DWithTextureTracking):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::create):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::createTexture):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::deleteTexture):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::bindTexture):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::numTextures):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::texture):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::resetTextures):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::numUsedTextures):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::usedTexture):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::resetUsedTextures):
        (WTF::CompositorFakeWebGraphicsContext3DWithTextureTracking::CompositorFakeWebGraphicsContext3DWithTextureTracking):
        (WTF):
        (WTF::TestHooks::didRecreateContext):
        (TestHooks):
        (WTF::TestHooks::createContext):
        (CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::clearEndTestTask):
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (EndTestTask):
        (WTF::CCLayerTreeHostTest::EndTestTask::EndTestTask):
        (WTF::CCLayerTreeHostTest::EndTestTask::~EndTestTask):
        (WTF::CCLayerTreeHostTest::EndTestTask::clearTest):
        (WTF::CCLayerTreeHostTest::EndTestTask::run):
        (WTF::CCLayerTreeHostTest::runTest):
        (WTF::CCLayerTreeHostTest::endTestAfterDelay):
        (FakeWebGraphicsContext3DMakeCurrentFails):
        (WTF::FakeWebGraphicsContext3DMakeCurrentFails::makeContextCurrent):
        (CCLayerTreeHostTestInitializeLayerRendererFailsAfterAddAnimation):
        (WTF::CCLayerTreeHostTestInitializeLayerRendererFailsAfterAddAnimation::CCLayerTreeHostTestInitializeLayerRendererFailsAfterAddAnimation):
        (WTF::CCLayerTreeHostTestInitializeLayerRendererFailsAfterAddAnimation::beginTest):
        (WTF::CCLayerTreeHostTestInitializeLayerRendererFailsAfterAddAnimation::animateLayers):
        (WTF::CCLayerTreeHostTestInitializeLayerRendererFailsAfterAddAnimation::didRecreateContext):
        (WTF::CCLayerTreeHostTestInitializeLayerRendererFailsAfterAddAnimation::afterTest):
        (WTF::TEST_F):

2012-05-15  Brett Wilson  <brettw@chromium.org>

        Hook up GTK IsKeyPad flag for keyboard events, and preserve this flag
        on all platforms when converting back to a WebKeyboardEvent.

        https://bugs.webkit.org/show_bug.cgi?id=86514

        Reviewed by Dimitri Glazkov.

        * src/WebInputEventConversion.cpp:
        (WebKit::WebKeyboardEventBuilder::WebKeyboardEventBuilder):
        * src/gtk/WebInputEventFactory.cpp:
        (WebKit::WebInputEventFactory::keyboardEvent):
        * tests/WebInputEventFactoryTestGtk.cpp:

2012-05-31  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Implement IDBTransaction.error and IDBRequest.error
        https://bugs.webkit.org/show_bug.cgi?id=87865

        Reviewed by Tony Chang.

        IDBDatabaseError now honors IDB-specific DOMException codes,
        so make sure that's how they are passed to/from chromium.

        * src/WebIDBDatabaseError.cpp:
        (WebKit::WebIDBDatabaseError::assign):

2012-05-31  James Robinson  <jamesr@chromium.org>

        [chromium] Assertion failures during compositor startup in lost context situations
        https://bugs.webkit.org/show_bug.cgi?id=87912

        Reviewed by Adrienne Walker.

        Adds a unit test verifying that even if we lose our context during or before initialization we get through the
        rest of the path without failing ASSERT()s.

        * tests/LayerRendererChromiumTest.cpp:
        (LoseContextOnFirstGetContext):
        (LoseContextOnFirstGetContext::LoseContextOnFirstGetContext):
        (TEST):

2012-05-31  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r119125.
        http://trac.webkit.org/changeset/119125
        https://bugs.webkit.org/show_bug.cgi?id=88007

        Will break android build if rolled (Requested by rafaelw_ on
        #webkit).

        * public/WebMediaPlayer.h:
        (WebMediaPlayer):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::bytesLoaded):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-05-31  Dana Jansens  <danakj@chromium.org>

        [chromium] Move drawing code for RenderSurfaces into LayerRendererChromium
        https://bugs.webkit.org/show_bug.cgi?id=87877

        Reviewed by James Robinson.

        * tests/CCRenderSurfaceTest.cpp:
        (WebCore::TEST):

2012-05-31  Ami Fischman  <fischman@chromium.org>

        Replace WebMediaPlayer::bytesLoaded() with an explicit didLoadingProgress()
        https://bugs.webkit.org/show_bug.cgi?id=86113

        Reviewed by Eric Carlson.

        * public/WebMediaPlayer.h:
        (WebMediaPlayer):
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::didLoadingProgress):
        * src/WebMediaPlayerClientImpl.h:
        (WebMediaPlayerClientImpl):

2012-05-31  Ian Vollick  <vollick@chromium.org>

        [chromium] create WebTransformOperation interface for chromium platform
        https://bugs.webkit.org/show_bug.cgi?id=87510

        Reviewed by James Robinson.

        * WebKit.gypi:
        * tests/WebTransformOperationsTest.cpp: Added.
        (TEST):
        (checkProgress):

2012-05-31  Alexander Pavlov  <apavlov@chromium.org>

        Web Inspector: [Chromium] Cannot bring Inspector to front when paused on breakpoint
        https://bugs.webkit.org/show_bug.cgi?id=87871

        Reviewed by Yury Semikhatsky.

        When input events handling is suppressed (due to the JS being paused on a breakpoint), we should report
        these events as NOT handled by the WebKit, so that the browser can handle them appropriately
        (on MacOS, switching between the application windows is done through the default key event handler, so if you run
        event.preventDefault() for all keydown events in a handler, the Chromium window switch will not occur on Cmd+`).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2012-05-31  Peter Beverloo  <peter@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-05-30  Peter Beverloo  <peter@chromium.org>

        [Chromium] Automatically install 64-bit linker for Android
        https://bugs.webkit.org/show_bug.cgi?id=79780

        Reviewed by Adam Barth.

        Change the Android-specific dependencies to inherit their revision from
        Chromium's DEPS file, like many other dependencies do, solving the
        versioning problem that we're running in to right now. These are listed
        in Chromium's main DEPS file starting Chromium r139529.

        * DEPS:

2012-05-31  Yoshifumi Inoue  <yosin@chromium.org>

        Build fix for Chromium Linux (Tests) after r119073.

        * tests/DecimalTest.cpp:
        (TEST_F):

2012-05-31  Yoshifumi Inoue  <yosin@chromium.org>

        [Platform] Introduce Decimal class for Number/Range input type.
        https://bugs.webkit.org/show_bug.cgi?id=87360

        Reviewed by Kent Tamura.

        This patch added unit test for Decimal class.

        * WebKit.gypi:
        * tests/DecimalTest.cpp: Added.
        (WebCore):
        (WebCore::operator<<): Output Decimal for unit test debugging
        (DecimalStepRange):
        (DecimalStepRange::DecimalStepRange):
        (DecimalStepRange::clampValue):
        (DecimalTest):
        (DecimalTest::encode):
        (DecimalTest::fromString):
        (DecimalTest::stepDown):
        (DecimalTest::stepUp):
        (TEST_F):

2012-05-30  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: add MemoryUsageSupport::processMemorySizesInBytes
        https://bugs.webkit.org/show_bug.cgi?id=87830

        Reviewed by James Robinson.

        * public/platform/WebKitPlatformSupport.h: pulled getProcessMemorySize up
        to the Source/Platform/chromium/public/Platform.h
        * src/PlatformSupport.cpp:

2012-05-31  Kent Tamura  <tkent@chromium.org>

        Unreviewed, rolling out r119062 and r119064.
        http://trac.webkit.org/changeset/119062
        http://trac.webkit.org/changeset/119064
        https://bugs.webkit.org/show_bug.cgi?id=87360

        Broke build on Lion, SnowLoepard, Chromium Windows, and
        Chromium Linux 32

        * WebKit.gypi:
        * tests/DecimalTest.cpp: Removed.

2012-05-30  Yoshifumi Inoue  <yosin@chromium.org>

        [Platform] Introduce Decimal class for Number/Range input type.
        https://bugs.webkit.org/show_bug.cgi?id=87360

        Reviewed by Kent Tamura.

        This patch added unit test for Decimal class.

        * WebKit.gypi:
        * tests/DecimalTest.cpp: Added.
        (WebCore):
        (WebCore::operator<<): Output Decimal for unit test debugging
        (DecimalStepRange):
        (DecimalStepRange::DecimalStepRange):
        (DecimalStepRange::clampValue):
        (DecimalTest):
        (DecimalTest::encode):
        (DecimalTest::fromString):
        (DecimalTest::stepDown):
        (DecimalTest::stepUp):
        (TEST_F):

2012-05-30  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Fix min/max bounds error in CCMathUtil.cpp
        https://bugs.webkit.org/show_bug.cgi?id=87915

        Reviewed by James Robinson.

        * tests/CCMathUtilTest.cpp:
        (WebCore::TEST):
        (WebCore):

2012-05-30  Ami Fischman  <fischman@chromium.org>

        Roll chromium DEPS from r139300 to r139542.  Unreviewed.
        https://bugs.webkit.org/show_bug.cgi?id=87868

        * DEPS:

2012-05-30  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Call fileUtilities methods directly
        https://bugs.webkit.org/show_bug.cgi?id=87852

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore):

2012-05-30  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118986.
        http://trac.webkit.org/changeset/118986
        https://bugs.webkit.org/show_bug.cgi?id=87914

        Caused several IndexedDB browser_test failures on Chromium
        canary builders (Requested by rafaelw_ on #webkit).

        * src/WebIDBDatabaseError.cpp:
        (WebKit::WebIDBDatabaseError::assign):

2012-05-30  Dominic Mazzoni  <dmazzoni@google.com>

        AX: Chromium WebAccessibilityObject should check if an AccessibilityObject is detached
        https://bugs.webkit.org/show_bug.cgi?id=87778

        Reviewed by Adam Barth.

        Pretty simple - all places that previously just checked for null
        now also check if the wrapped AccessibilityObject is detached.

        * public/WebAccessibilityObject.h:
        (WebAccessibilityObject):
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::isDetached):
        (WebKit):
        (WebKit::WebAccessibilityObject::axID):
        (WebKit::WebAccessibilityObject::accessibilityDescription):
        (WebKit::WebAccessibilityObject::actionVerb):
        (WebKit::WebAccessibilityObject::canSetFocusAttribute):
        (WebKit::WebAccessibilityObject::canSetValueAttribute):
        (WebKit::WebAccessibilityObject::isValid):
        (WebKit::WebAccessibilityObject::childCount):
        (WebKit::WebAccessibilityObject::childAt):
        (WebKit::WebAccessibilityObject::firstChild):
        (WebKit::WebAccessibilityObject::focusedChild):
        (WebKit::WebAccessibilityObject::lastChild):
        (WebKit::WebAccessibilityObject::nextSibling):
        (WebKit::WebAccessibilityObject::parentObject):
        (WebKit::WebAccessibilityObject::previousSibling):
        (WebKit::WebAccessibilityObject::canSetSelectedAttribute):
        (WebKit::WebAccessibilityObject::isAnchor):
        (WebKit::WebAccessibilityObject::isAriaReadOnly):
        (WebKit::WebAccessibilityObject::isButtonStateMixed):
        (WebKit::WebAccessibilityObject::isChecked):
        (WebKit::WebAccessibilityObject::isCollapsed):
        (WebKit::WebAccessibilityObject::isControl):
        (WebKit::WebAccessibilityObject::isEnabled):
        (WebKit::WebAccessibilityObject::isFocused):
        (WebKit::WebAccessibilityObject::isHovered):
        (WebKit::WebAccessibilityObject::isIndeterminate):
        (WebKit::WebAccessibilityObject::isLinked):
        (WebKit::WebAccessibilityObject::isLoaded):
        (WebKit::WebAccessibilityObject::isMultiSelectable):
        (WebKit::WebAccessibilityObject::isOffScreen):
        (WebKit::WebAccessibilityObject::isPasswordField):
        (WebKit::WebAccessibilityObject::isPressed):
        (WebKit::WebAccessibilityObject::isReadOnly):
        (WebKit::WebAccessibilityObject::isRequired):
        (WebKit::WebAccessibilityObject::isSelected):
        (WebKit::WebAccessibilityObject::isSelectedOptionActive):
        (WebKit::WebAccessibilityObject::isVertical):
        (WebKit::WebAccessibilityObject::isVisible):
        (WebKit::WebAccessibilityObject::isVisited):
        (WebKit::WebAccessibilityObject::accessKey):
        (WebKit::WebAccessibilityObject::ariaHasPopup):
        (WebKit::WebAccessibilityObject::ariaLiveRegionAtomic):
        (WebKit::WebAccessibilityObject::ariaLiveRegionBusy):
        (WebKit::WebAccessibilityObject::ariaLiveRegionRelevant):
        (WebKit::WebAccessibilityObject::ariaLiveRegionStatus):
        (WebKit::WebAccessibilityObject::boundingBoxRect):
        (WebKit::WebAccessibilityObject::estimatedLoadingProgress):
        (WebKit::WebAccessibilityObject::helpText):
        (WebKit::WebAccessibilityObject::headingLevel):
        (WebKit::WebAccessibilityObject::hierarchicalLevel):
        (WebKit::WebAccessibilityObject::hitTest):
        (WebKit::WebAccessibilityObject::keyboardShortcut):
        (WebKit::WebAccessibilityObject::performDefaultAction):
        (WebKit::WebAccessibilityObject::roleValue):
        (WebKit::WebAccessibilityObject::selectionEnd):
        (WebKit::WebAccessibilityObject::selectionStart):
        (WebKit::WebAccessibilityObject::setFocused):
        (WebKit::WebAccessibilityObject::stringValue):
        (WebKit::WebAccessibilityObject::title):
        (WebKit::WebAccessibilityObject::titleUIElement):
        (WebKit::WebAccessibilityObject::url):
        (WebKit::WebAccessibilityObject::valueDescription):
        (WebKit::WebAccessibilityObject::valueForRange):
        (WebKit::WebAccessibilityObject::maxValueForRange):
        (WebKit::WebAccessibilityObject::minValueForRange):
        (WebKit::WebAccessibilityObject::node):
        (WebKit::WebAccessibilityObject::document):
        (WebKit::WebAccessibilityObject::hasComputedStyle):
        (WebKit::WebAccessibilityObject::computedStyleDisplay):
        (WebKit::WebAccessibilityObject::accessibilityIsIgnored):
        (WebKit::WebAccessibilityObject::lineBreaks):
        (WebKit::WebAccessibilityObject::columnCount):
        (WebKit::WebAccessibilityObject::rowCount):

2012-05-30  Shawn Singh  <shawnsingh@chromium.org>

        Simplify TransformationMatrix rotation code to improve precision
        https://bugs.webkit.org/show_bug.cgi?id=86666

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):
        * tests/WebTransformationMatrixTest.cpp:
        (WebKit::TEST):
        (WebKit):

2012-05-30  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Implement IDBTransaction.error and IDBRequest.error
        https://bugs.webkit.org/show_bug.cgi?id=87865

        Reviewed by Tony Chang.

        IDBDatabaseError now honors IDB-specific DOMException codes,
        so make sure that's how they are passed to/from chromium.

        * src/WebIDBDatabaseError.cpp:
        (WebKit::WebIDBDatabaseError::assign):

2012-05-30  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Merge shared code in CCOcclusionTrackerTest
        https://bugs.webkit.org/show_bug.cgi?id=87798

        Reviewed by Adrienne Walker.

        This patch simple uses a different existing macro function so that
        the same thing doesn't exist in multiple places, and so that the
        naming is more consistent with gtest's conventions.

        * tests/CCOcclusionTrackerTest.cpp:
        (WebKitTests::CCOcclusionTrackerTestIdentityTransforms::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestRotatedChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestTranslatedChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestChildInRotatedChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestVisitTargetTwoTimes::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceRotatedOffAxis::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceWithTwoOpaqueChildren::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestOverlappingSurfaceSiblings::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestOverlappingSurfaceSiblingsWithTwoTransforms::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestFilters::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestReplicaDoesOcclude::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestReplicaWithClipping::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestReplicaWithMask::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestLayerScissorRectOutsideChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestScreenScissorRectOutsideChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestLayerScissorRectPartlyOverChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestScreenScissorRectPartlyOverChild::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestOpaqueContentsRegionNonEmpty::runMyTest):
        (WebKitTests::CCOcclusionTrackerTest3dTransform::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestPerspectiveTransform::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestAnimationOpacity1OnMainThread::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestAnimationOpacity0OnMainThread::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestAnimationTranslateOnMainThread::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceOcclusionTranslatesToParent::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceOcclusionTranslatesWithClipping::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestReplicaOccluded::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceWithReplicaUnoccluded::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceAndReplicaOccludedDifferently::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceChildOfSurface::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestTopmostSurfaceIsClippedToScissor::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestSurfaceChildOfClippingSurface::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestDontOccludePixelsNeededForBackgroundFilter::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestTwoBackgroundFiltersReduceOcclusionTwice::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestDontOccludePixelsNeededForBackgroundFilterWithClip::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestDontReduceOcclusionBelowBackgroundFilter::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestDontReduceOcclusionIfBackgroundFilterIsOccluded::runMyTest):
        (WebKitTests::CCOcclusionTrackerTestMinimumTrackingSize::runMyTest):

2012-05-30  Tony Chang  <tony@chromium.org>

        [chromium] port webframe_unittest.cc to webkit_unit_tests
        https://bugs.webkit.org/show_bug.cgi?id=87796

        Reviewed by James Robinson.

        Move WebFrameTest.GetContentAsPlainText and WebFrameTest.GetFullHtmlOfPage to webkit_unit_tests.

        * tests/WebFrameTest.cpp:
        (WebKit::TEST_F):
        (WebKit): Add tests.

2012-05-30  Jochen Eisinger  <jochen@chromium.org>

        Match Firefox restrictions to window.blur and window.focus
        https://bugs.webkit.org/show_bug.cgi?id=86969

        Reviewed by Adam Barth.

        Allow window.focus() during the dispatch of the click event on
        notifications.

        * src/WebNotification.cpp:
        (WebKit::WebNotification::dispatchClickEvent):

2012-05-29  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move fileExists to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=87531

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * src/PlatformSupport.cpp:
        (WebCore):

2012-05-29  Alec Flett  <alecflett@chromium.org>

        IndexedDB: Align codes and names for IDB-specific and DOM-specific errors/exceptions
        https://bugs.webkit.org/show_bug.cgi?id=87276

        Reviewed by Tony Chang.

        * public/WebIDBDatabaseException.h:
        * src/AssertMatchingEnums.cpp:

2012-05-29  Rafael Weinstein  <rafaelw@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-05-29  Dana Jansens  <danakj@chromium.org>

        [chromium] Unoccluded area in surfaces should always be clipped to the rootScissorRect
        https://bugs.webkit.org/show_bug.cgi?id=87677

        Reviewed by Adrienne Walker.

        * tests/CCOcclusionTrackerTest.cpp:
        (CCOcclusionTrackerTestTopmostSurfaceIsClippedToScissor):
        (WebKitTests::CCOcclusionTrackerTestTopmostSurfaceIsClippedToScissor::runMyTest):
        (WebKitTests):

2012-05-29  David Barr  <davidbarr@chromium.org>

        Introduce ENABLE_CSS_IMAGE_RESOLUTION compile flag
        https://bugs.webkit.org/show_bug.cgi?id=87685

        Reviewed by Eric Seidel.

        Add a configuration option for CSS image-resolution support, disabling it by default.

        * features.gypi:

2012-05-29  Peter Beverloo  <peter@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-05-29  Hironori Bono  <hbono@chromium.org>

        Use WebSpellCheckClient::spellcheck to retrieve suggestions.
        https://bugs.webkit.org/show_bug.cgi?id=87690

        Reviewed by Hajime Morita.

        This change uses WebSpellCheckClient::spellcheck as a fallback method to
        retrieve suggestions when a marker does not have any suggestions. (It consumes
        lots of CPU power to get suggestions for misspelled word, i.e. Chromium cannot
        afford to attach suggestions to all spelling markers.)

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Retrieve suggestions if markers do not have any.

2012-05-28  Takashi Toyoshima  <toyoshim@chromium.org>

        [WebSocket] Receiving reserved close codes, 1005, 1006, and 1015 must appear as code=1006 and wasClean=false
        https://bugs.webkit.org/show_bug.cgi?id=87084

        Reviewed by Kent Tamura.

        Update close event codes corresponding to WebSocketChannel::CloseEventCode.

        * public/WebSocket.h: Update on newly defined close event codes

2012-05-28  MORITA Hajime  <morrita@google.com>

        Rename FrameLoaderClient::shadowDOMAllowed() to allowShadowDOM()
        https://bugs.webkit.org/show_bug.cgi?id=87101

        Reviewed by Kentaro Hara.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowShadowDOM):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-05-28  Rob Flack  <flackr@chromium.org>

        [chromium] Only increase size of Combo Box Options when displayed on touch screen
        https://bugs.webkit.org/show_bug.cgi?id=85921

        Reviewed by Adam Barth.

        Adds a flag to set whether the current device is a touch screen, independent of whether touch events are supported and use this for the combo box sizing.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::defaultDeviceScaleFactor):
        (WebKit):
        (WebKit::WebSettingsImpl::setDeviceSupportsTouch):
        (WebKit::WebSettingsImpl::deviceSupportsTouch):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyAutofillSuggestions):
        * tests/PopupMenuTest.cpp:
        (WebKit::SelectPopupMenuTest::SetUp):
        (WebKit::SelectPopupMenuTest::TearDown):
        (SelectPopupMenuTest):
        (WebKit::TEST_F):

2012-05-25  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        WebKitTestRunner needs to support layoutTestController.setJavaScriptProfilingEnabled
        https://bugs.webkit.org/show_bug.cgi?id=42328

        Reviewed by Eric Seidel.

        Removed private APIs that were only being used by DRT.

        * public/WebDevToolsAgent.h:
        (WebDevToolsAgent):
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2012-05-28  Peter Beverloo  <peter@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-05-28  Peter Beverloo  <peter@chromium.org>

        [Chromium] Build fix for the Android bot, set CXX_target at gyp generation-time
        https://bugs.webkit.org/show_bug.cgi?id=87649

        Unreviewed build fix.

        Chromium Android builds were broken because v8 tried to compile files
        for target with the "-m32" flag. This was caused by a v8 check falling
        back to using "which g++" to find the right compiler, whereas it should
        have used the $CXX_target environment variable. This isn't being set
        for Android builds.

        * gyp_webkit: Set the CXX_target environment variable. Annotate the fix
          with a FIXME comment too.

2012-05-28  Keishi Hattori  <keishi@webkit.org>

        Expose value localization function of HTMLInputElement
        https://bugs.webkit.org/show_bug.cgi?id=84356

        Reviewed by Kent Tamura.

        * public/WebInputElement.h:
        (WebInputElement):
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::localizeValue):
        (WebKit):

2012-05-28  MORITA Hajime <morrita@google.com>

        Unreviewed Mac Chromium build fix.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowStyleScoped):

2012-05-28  MORITA Hajime  <morrita@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=87609
        [Chromium] FrameLoaderClient::allowStyleScoped() should be implemented interms of WebPermissionClient

        Reviewed by Kent Tamura.

        Added allowStyleScoped() implementation which is essentially same as shadowDOMAllowed().

        * src/FrameLoaderClientImpl.cpp:
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-05-25  Ryosuke Niwa  <rniwa@webkit.org>

        Roll chromium DEPS from r139156 to r139184.

        * DEPS:

2012-05-25  Garrett Casto  <gcasto@chromium.org>

        Allow WebTextFieldDecoratorClient to see applied decorations.
        https://bugs.webkit.org/show_bug.cgi?id=86557

        Reviewed by Kent Tamura.

        * WebKit.gyp: Added new files.
        * public/WebInputElement.h:
        (WebKit::WebInputElement::decorationElementFor): Returns the
        WebElement attached to the WebInputElement by the given
        WebTextFieldDecoratorClient, if one exists.
        * src/TextFieldDecoratorImpl.cpp:
        (WebKit):
        * src/TextFieldDecoratorImpl.h:
        (TextFieldDecoratorImpl::decoratorClient): Get the
        WebTextFieldDecoratorClient owned by this object.

2012-05-25  Mihai Parparita  <mihaip@chromium.org>

        Allow synchronous XHRs to be disabled in documents
        https://bugs.webkit.org/show_bug.cgi?id=87540

        Reviewed by Eric Seidel.

        Synchronous XMLHttpRequests are a problematic API, since they result
        in blocked UI threads. Some clients may wish to always disable them;
        give them a setting to do so (see also r103629 for other cases where
        synchronous XHRs are disabled).

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setSyncXHRInDocumentsEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-25  Kinuko Yasuda  <kinuko@chromium.org>

        [chromium] Deprecate FileUtilities::getFileSize and getFileModifiedTime in favor of getFileMetadata
        https://bugs.webkit.org/show_bug.cgi?id=87492

        Reviewed by Adam Barth.

        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getFileMetadata):

2012-05-25  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from r139024 to r139156 in an attempt to fix Chromium Win builds.

        * DEPS:

2012-05-25  Mark Pilgrim  <pilgrim@chromium.org>

        [Chomium] Move sandboxSupport to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=87518

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKitPlatformSupport):
        * public/platform/android/WebSandboxSupport.h:
        * public/platform/linux/WebFontFamily.h:
        * public/platform/linux/WebSandboxSupport.h:
        * public/platform/mac/WebSandboxSupport.h:
        * public/platform/win/WebSandboxSupport.h:
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::ensureFontLoaded):
        (WebCore::PlatformSupport::loadFont):
        (WebCore::PlatformSupport::getFontFamilyForCharacters):
        (WebCore::PlatformSupport::getRenderStyleForStrike):

2012-05-25  Dana Jansens  <danakj@chromium.org>

        [chromium] WebLayerTreeViewImpl should not hide methods in CCLayerTreeHost with signatures that match the Client interface
        https://bugs.webkit.org/show_bug.cgi?id=87301

        Reviewed by James Robinson.

        Most methods in the CCLayerTreeHostClient interface have a matching
        method signature on CCLayerTreeHost that simply calls the client, if
        one exists at all. However, CCLayerTreeHost::updateAnimations() does
        important work in addition to calling the client.

        Currently WebLayerTreeViewImpl itself implements the interface for
        CCLayerTreeHostClient as well as CCLayerTreeHost, and simply forwards
        any call to a method in the client interface to its own client. This
        blocks WebViewImpl from calling CCLayerTreeHost::updateAnimations, since
        the method is also in the client interface.

        We change WebLayerTreeViewImpl to own a CCLayerTreeHost and a
        WebLayerTreeHostClientAdapter. This fixes the shadowing by making
        the two interfaces separate, and resolves lifetime issues by
        ensuring that the CCLayerTreeHost is destroyed before its client.

        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::setSurfaceReady):
        (WebKit::WebLayerTreeView::setRootLayer):
        (WebKit::WebLayerTreeView::compositorIdentifier):
        (WebKit::WebLayerTreeView::setViewportSize):
        (WebKit::WebLayerTreeView::viewportSize):
        (WebKit::WebLayerTreeView::setBackgroundColor):
        (WebKit::WebLayerTreeView::setVisible):
        (WebKit::WebLayerTreeView::setPageScaleFactorAndLimits):
        (WebKit::WebLayerTreeView::startPageScaleAnimation):
        (WebKit::WebLayerTreeView::setNeedsAnimate):
        (WebKit::WebLayerTreeView::setNeedsRedraw):
        (WebKit::WebLayerTreeView::commitRequested):
        (WebKit::WebLayerTreeView::composite):
        (WebKit::WebLayerTreeView::updateAnimations):
        (WebKit::WebLayerTreeView::compositeAndReadback):
        (WebKit::WebLayerTreeView::finishAllRendering):
        (WebKit::WebLayerTreeView::context):
        (WebKit::WebLayerTreeView::loseCompositorContext):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit):
        (WebLayerTreeViewClientAdapter):
        (WebKit::WebLayerTreeViewClientAdapter::WebLayerTreeViewClientAdapter):
        (WebKit::WebLayerTreeViewClientAdapter::~WebLayerTreeViewClientAdapter):
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::~WebLayerTreeViewImpl):
        * src/WebLayerTreeViewImpl.h:
        (WebCore):
        (WebKit):
        (WebKit::WebLayerTreeViewImpl::layerTreeHost):
        (WebLayerTreeViewImpl):

2012-05-25  Kinuko Yasuda  <kinuko@chromium.org>

        Unreviewed; rolling chromium deps.

        * DEPS:

2012-05-25  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] LayerChromium should recognise existing layer active animations when the layer is added.
        https://bugs.webkit.org/show_bug.cgi?id=87166

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::didAddAnimationWasCalled):
        (MockLayerTreeHost):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF):
        (CCLayerTreeHostTestLayerAddedWithAnimation):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::CCLayerTreeHostTestLayerAddedWithAnimation):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::beginTest):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::afterTest):

2012-05-17  Andrey Kosyakov  <caseq@chromium.org>

        [chromium] add instrumentation for compositing
        https://bugs.webkit.org/show_bug.cgi?id=83928

        Reviewed by James Robinson.

        - plumb willCommit() and didComposite() to inspector instrumentation via WebViewImpl.

        * WebKit.gypi: Added WebLayerTreeViewTest
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::didBeginFrame):
        (WebKit):
        (WebKit::WebLayerTreeViewImpl::willCommit):
        * src/WebLayerTreeViewImpl.h:
        (WebLayerTreeViewImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didBeginFrame):
        (WebKit):
        (WebKit::WebViewImpl::willCommit):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/CCLayerTreeHostTest.cpp:
        * tests/FakeCCLayerTreeHostClient.h:
        * tests/WebLayerTest.cpp:
        * tests/WebLayerTreeViewTest.cpp: Added.

2012-05-25  Peter Beverloo  <peter@chromium.org>

        [Chromium] Pull in Android tools from Chromium's repo through the DEPS file
        https://bugs.webkit.org/show_bug.cgi?id=87478

        Reviewed by Kent Tamura.

        Chromium's r122048 added the forwarder tool, which forwards a TCP port
        listening on the device to a port on the host. This now is a required
        dependency of DumpRenderTree, so pull it in.

        Since it's likely that more tools will be required, pull in the entire
        tools/android/ directory in case the Chromium port for Android is being
        checked out or updated.

        * DEPS: Added Android-specific dependency on tools/android/

2012-05-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118461.
        http://trac.webkit.org/changeset/118461
        https://bugs.webkit.org/show_bug.cgi?id=87468

        Breaks two chromium browser_tests. (Requested by vsevik on
        #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):

2012-05-24  Tim Horton  <timothy_horton@apple.com>

        Add feature defines for web-facing parts of CSS Regions and Exclusions
        https://bugs.webkit.org/show_bug.cgi?id=87442
        <rdar://problem/10887709>

        Reviewed by Dan Bernstein.

        * features.gypi:

2012-05-24  Kent Tamura  <tkent@chromium.org>

        PAGE_POPUP: window.setValueAndClosePopup should be moved to a
        per-context property of DOMWindow.
        https://bugs.webkit.org/show_bug.cgi?id=87086

        Reviewed by Adam Barth.

        * src/WebPagePopupImpl.cpp:
        (WebKit): Add PagePopupFrameLoaderClient, which allows window.pagePopupController.
        (WebKit::WebPagePopupImpl::initPage):
         - Use PagePopupFrameLoaderClient
         - Remove the call of ScriptController::installFunctionsForPagePopup().
         - Call DOMWindowPagePopup::install() to inform m_popupClient to a
           DOMWindowPagePopup object for the DOMWindow.

2012-05-21  Kinuko Yasuda  <kinuko@chromium.org>

        Cleanup: add a file system call which captures the file metadata at once.
        https://bugs.webkit.org/show_bug.cgi?id=86995

        Reviewed by David Levin.

        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getFileMetadata):
        (WebCore):

2012-05-24  Hironori Bono  <hbono@chromium.org>

        Enable grammar checking on Chromium when we paste text  (Take 2)
        https://bugs.webkit.org/show_bug.cgi?id=74393

        Reviewed by Ryosuke Niwa.

        This change enables grammar checking on Chromium and implements a mock grammar
        checker to fix a failing test.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Show suggestions when we right-click grammatically-misspelled words.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::isGrammarCheckingEnabled): Enable grammar checking when we enable asynchronous spellchecking.
        (WebKit::EditorClientImpl::checkGrammarOfString): set badGrammarLocation to -1 to avoid an assertion error.
        * src/WebTextCheckingResult.cpp:
        (WebKit::WebTextCheckingResult::operator TextCheckingResult): Fill GrammarDetails for grammatical errors.

2012-05-24  Alexandre Elias  <aelias@google.com>

        [chromium] Support mobile device rotation resizing
        https://bugs.webkit.org/show_bug.cgi?id=86819

        Reviewed by Adam Barth.

        Resizes on a mobile device are caused either by rotation or
        on-screen-keyboard bringup, and need different treatment to remain
        naturally laid out, scaled and scrolled without disorienting the user.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):

2012-05-24  Antoine Labour  <piman@chromium.org>

        [chromium] Add a setForceRenderSurface to WebLayer for test/bench purpose
        https://bugs.webkit.org/show_bug.cgi?id=87436

        Reviewed by James Robinson.

        * src/WebLayer.cpp:
        (WebKit::WebLayer::setForceRenderSurface):
        (WebKit):
        (WebKit::WebLayer::forceRenderSurface):
        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):
        * tests/LayerChromiumTest.cpp:

2012-05-24  Adam Barth  <abarth@webkit.org>

        Fix the chromium-android build.

        * features.gypi:

2012-05-24  John Mellor  <johnme@chromium.org>

        Font Boosting: Add compile flag and runtime setting
        https://bugs.webkit.org/show_bug.cgi?id=87394

        Reviewed by Adam Barth.

        Expose fontBoostingEnabled runtime setting via WebSettings.

        * features.gypi:
        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFontBoostingEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-24  Kinuko Yasuda  <kinuko@chromium.org>

        Cleanup: introduce toFile() to reduce static cast from Blob to File
        https://bugs.webkit.org/show_bug.cgi?id=87234

        Reviewed by Eric Seidel.

        * src/WebDragData.cpp:
        (WebKit::WebDragData::items):

2012-05-24  Lu Guanqun  <guanqun.lu@intel.com>

        use built-in data type DashArray
        https://bugs.webkit.org/show_bug.cgi?id=87344

        Reviewed by Eric Seidel.

        * tests/PlatformContextSkiaTest.cpp:
        (WebCore::TEST):

2012-05-24  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move queryLocalizedString to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=85762

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::getPluginList):
        * public/platform/WebLocalizedString.h:
        * src/LocalizedStrings.cpp:
        (WebCore::query):

2012-05-24  Dana Jansens  <danakj@chromium.org>

        [chromium] Only display frames created with memory allocations meant to be displayed
        https://bugs.webkit.org/show_bug.cgi?id=85108

        Reviewed by Adrienne Walker.

        Removing code to protect visible textures when a tab becomes invisible,
        as we want to reduce our memory limit for invisible tabs and these
        textures should not be saved.

        * src/NonCompositedContentHost.cpp:
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestHooks::didCommit):
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::scheduleComposite):
        (WTF::CCLayerTreeHostTest::dispatchComposite):
        (CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (CCLayerTreeHostTestTickAnimationWhileBackgrounded):
        (WTF::CCLayerTreeHostTestTickAnimationWhileBackgrounded::willAnimateLayers):
        (CCLayerTreeHostTestVisibilityAndAllocationControlDrawing):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::beginTest):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::didCommitAndDrawFrame):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::didCommit):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::afterTest):
        (WTF):

2012-05-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118352.
        http://trac.webkit.org/changeset/118352
        https://bugs.webkit.org/show_bug.cgi?id=87390

        Caused 6 editing/spelling tests crash/fail on chromium in
        debug. (Requested by vsevik on #webkit).

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::isGrammarCheckingEnabled):
        * src/WebTextCheckingResult.cpp:
        (WebKit::WebTextCheckingResult::operator TextCheckingResult):

2012-05-24  Ian Vollick  <vollick@chromium.org>

        [chromium] Forcibly sync running animations in the waiting state when synchronized start times are needed.
        https://bugs.webkit.org/show_bug.cgi?id=87153

        Reviewed by James Robinson.

        * tests/CCLayerAnimationControllerTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):

2012-05-23  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: add a command to InspectorMemoryAgent for getting process memory break down
        https://bugs.webkit.org/show_bug.cgi?id=87263

        Reviewed by Pavel Feldman.

        Added an API for retrieving render process private and shared memory in bytes.

        * public/platform/WebKitPlatformSupport.h:
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::getProcessMemorySize):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getProcessMemorySize):
        (WebCore):

2012-05-24  Hironori Bono  <hbono@chromium.org>

        Enable grammar checking on Chromium when we paste text.
        https://bugs.webkit.org/show_bug.cgi?id=74393

        Reviewed by Hajime Morita.

        This change enables grammar checking on Chromium and implements a mock grammar
        checker to fix a failing test.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Show suggestions when we right-click grammatically-misspelled words.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::isGrammarCheckingEnabled): Enable grammar checking when we enable asynchronous spellchecking.
        * src/WebTextCheckingResult.cpp:
        (WebKit::WebTextCheckingResult::operator TextCheckingResult): Fill GrammarDetails for grammatical errors.

2012-05-24  Vivek Galatage  <vivekgalatage@gmail.com>

        Web Inspector: localStorage items are not updated when the storage changes
        https://bugs.webkit.org/show_bug.cgi?id=83012

        Reviewed by Pavel Feldman.

        Instrumented the DOM Storage Events in order to update the frontend.

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::dispatchLocalStorageEvent):
        (WebCore::StorageAreaProxy::dispatchSessionStorageEvent):

2012-05-23  Ojan Vafai  <ojan@chromium.org>

        add back the ability to disable flexbox
        https://bugs.webkit.org/show_bug.cgi?id=87147

        Reviewed by Tony Chang.

        * features.gypi:

2012-05-23  Dana Jansens  <danakj@chromium.org>

        [chromium] Enable the CCLayerTreeHostTestCanDrawBlocksDrawing test in single-threaded mode
        https://bugs.webkit.org/show_bug.cgi?id=87308

        Reviewed by James Robinson.

        Chromium bug: http://crbug.com/127481

        Unit test: CCLayerTreeHostTestCanDrawBlocksDrawing.runSingleThread

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestHooks::didCommit):
        (WTF):
        (WTF::CCLayerTreeHostTestCanDrawBlocksDrawing::didCommit):

2012-05-23  James Robinson  <jamesr@chromium.org>

        Add a Setting to make position:fixed form a new stacking context
        https://bugs.webkit.org/show_bug.cgi?id=87186

        Reviewed by Adam Barth.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFixedPositionCreatesStackingContext):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-23  James Robinson  <jamesr@chromium.org>

        [chromium] Turn ENABLE(OVERFLOW_SCROLLING) off for Chromium port
        https://bugs.webkit.org/show_bug.cgi?id=87177

        Reviewed by Eric Seidel.

        Removes ENABLE(OVERFLOW_SCROLLING) from the set of enables set by Chromium. This guards a new non-standard
        CSS property, -webkit-overflow-scrolling, that was introduced by iOS5 intended for mobile browsers. This
        property is very partially implemented in Chromium but the way it's implemented does cause new stacking contexts
        to be created that otherwise would not be, breaking "desktop" pages.

        This turns the feature off until we can figure out how to deal with the compatibility issues.

        * features.gypi:

2012-05-23  Jay Civelli  <jcivelli@chromium.org>

        [chromium] Provides a way to cancel an external popup menu before it is shown.
        https://bugs.webkit.org/show_bug.cgi?id=83474

        Reviewed by Kent Tamura.

        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::show):

2012-05-23  Michael Nordman  <michaeln@google.com>

        [chromium] DomStorage events handling needs TLC (3)
        https://bugs.webkit.org/show_bug.cgi?id=87031
        https://code.google.com/p/chromium/issues/detail?id=128482
        Only queue storage events for Documents which have allocated
        a WebCore::Storage instance since pages that have attached onstorage
        event handlers must have a non-null Storage instance.

        Reviewed by Adam Barth.

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::dispatchLocalStorageEvent):
        (WebCore::StorageAreaProxy::dispatchSessionStorageEvent):
        (WebCore::StorageAreaProxy::isEventSource):

2012-05-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118218.
        http://trac.webkit.org/changeset/118218
        https://bugs.webkit.org/show_bug.cgi?id=87299

        breaks webkit win builder (Requested by pilgrim_google__ on
        #webkit).

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::queryLocalizedString):
        * public/platform/WebLocalizedString.h:
        (WebKit):
        * src/LocalizedStrings.cpp:
        (WebCore::query):

2012-05-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move themeEngine to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=87268

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::sandboxSupport):
        * public/platform/android/WebThemeEngine.h:
        * public/platform/linux/WebThemeEngine.h:
        * public/platform/mac/WebThemeEngine.h:
        * public/platform/win/WebThemeEngine.h:
        * src/AssertMatchingEnums.cpp:
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::paintButton):
        (WebCore::PlatformSupport::paintMenuList):
        (WebCore::PlatformSupport::paintScrollbarArrow):
        (WebCore::PlatformSupport::paintScrollbarThumb):
        (WebCore::PlatformSupport::paintScrollbarTrack):
        (WebCore::PlatformSupport::paintSpinButton):
        (WebCore::PlatformSupport::paintTextField):
        (WebCore::PlatformSupport::paintTrackbar):
        (WebCore::PlatformSupport::paintProgressBar):
        (WebCore::PlatformSupport::getThemePartSize):
        (WebCore::PlatformSupport::paintThemePart):

2012-05-23  Raymes Khoury  <raymes@chromium.org>

        Change acceptMIMETypes member to acceptTypes now that file extensions are legal accept types
        https://bugs.webkit.org/show_bug.cgi?id=87271

        Reviewed by Darin Fisher.

        * public/WebFileChooserParams.h:
        (WebFileChooserParams):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel):

2012-05-23  Dana Jansens  <danakj@chromium.org>

        [chromium] Layers on main thread should get a RenderSurface for animating transform only if masksToBounds is true also
        https://bugs.webkit.org/show_bug.cgi?id=87184

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):

2012-05-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move queryLocalizedString to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=85762

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::getPluginList):
        * public/platform/WebLocalizedString.h:
        * src/LocalizedStrings.cpp:
        (WebCore::query):

2012-05-23  Antti Koivisto  <antti@apple.com>

        Build fix.

        Not reviewed.

        * src/WebDocument.cpp:
        (WebKit::WebDocument::insertUserStyleSheet):

2012-05-22  Alexandre Elias  <aelias@google.com>

        [chromium] Apply viewport tag initial-scale only once
        https://bugs.webkit.org/show_bug.cgi?id=82949

        Reviewed by Adam Barth.

        First, check that isPageScaleFactorSet return false before setting
        initial-scale. We need to call dispatchViewportPropertiesDidChange()
        when the viewport width changes, since that's an input to the viewport
        tag calculation. When this happens, we shouldn't pop back to initial
        scale.

        Second, check that isNewNavigation is true when deciding to clear
        isPageScaleFactorIsSet in didCommitLoad. We only want to clear it on
        the very first commit, otherwise we'll pop back to initial scale if
        the user zooms in before the load is complete.

        New test WebFrameTest::FixedLayoutInitializeAtMinimumPageScale.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didCommitLoad):

2012-05-21  Shawn Singh  <shawnsingh@chromium.org>

        Improve W3C conformance of backface-visibility
        https://bugs.webkit.org/show_bug.cgi?id=84195

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):

2012-05-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118095.
        http://trac.webkit.org/changeset/118095
        https://bugs.webkit.org/show_bug.cgi?id=87201

        "Causing crashes on Mac in
        WebCore::StyleResolver::adjustRenderStyle (Requested by
        sundiamonde on #webkit).

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-22  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Run DumpRenderTree as an apk (C++ and gyp part)
        https://bugs.webkit.org/show_bug.cgi?id=86922

        Reviewed by Kent Tamura.

        * All.gyp: Added DumpRenderTree_apk into dependencies for Android.

2012-05-22  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Call canAccelerate2dCanvas directly
        https://bugs.webkit.org/show_bug.cgi?id=86893

        Reviewed by James Robinson.

        Part of a refactoring series. See tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:
        (WebKitPlatformSupport):
        * src/PlatformSupport.cpp:
        (WebCore):

2012-05-22  Dana Jansens  <danakj@chromium.org>

        [chromium] Don't drop children of a RenderSurface from the renderSurfaceLayerList when then position of the surface in its clipRect is not known
        https://bugs.webkit.org/show_bug.cgi?id=87181

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):

2012-05-22  MORITA Hajime  <morrita@google.com>

        [Chromium][API] Introduce WebPermissionClient::allowWebComponents()
        https://bugs.webkit.org/show_bug.cgi?id=87097

        Reviewed by Kent Tamura.

        - Added WebPermissionClient::allowWebComponents(), and
        - Implemented FrameLoaderClientImpl::shadowDOMAllowed() using it.

        * public/WebPermissionClient.h:
        (WebPermissionClient):
        (WebKit::WebPermissionClient::allowWebComponents):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::shadowDOMAllowed):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-05-22  James Robinson  <jamesr@chromium.org>

        Add a Setting to make position:fixed form a new stacking context
        https://bugs.webkit.org/show_bug.cgi?id=87186

        Reviewed by Adam Barth.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFixedPositionCreatesStackingContext):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-22  Dana Jansens  <danakj@chromium.org>

        [chromium] Don't force the visibleLayerRect to be empty for animating layers whose front face is not visible
        https://bugs.webkit.org/show_bug.cgi?id=86886

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):

2012-05-22  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move cookieJar to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=86755

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebCookie.h:
        * public/platform/WebCookieJar.h:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::themeEngine):
        * src/PlatformSupport.cpp:
        (WebCore::getCookieJar):

2012-05-22  Jochen Eisinger  <jochen@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-05-22  Kausalya Madhusudhanan  <kmadhusu@chromium.org>

        [Chromium] Use overloaded printBegin() webkit API to support auto fit to page functionality.
        https://bugs.webkit.org/show_bug.cgi?id=86684

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        (WebFrame):
        * public/WebPlugin.h:
        (WebPlugin):
        * public/WebPrintParams.h:
        (WebKit::WebPrintParams::WebPrintParams):
        (WebPrintParams):
        * src/WebFrameImpl.cpp:
        (WebKit):
        * src/WebFrameImpl.h:
        (WebFrameImpl):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::printBegin):

2012-05-22  Adam Barth  <abarth@webkit.org>

        [Chromium] Expose setMediaPlaybackRequiresUserGesture via WebSettings
        https://bugs.webkit.org/show_bug.cgi?id=87164

        Reviewed by Eric Seidel.

        This is used by the Chromium Android port.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setMediaPlaybackRequiresUserGesture):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-21  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Add unit testing for WebTransformationMatrix::blend()
        https://bugs.webkit.org/show_bug.cgi?id=87066

        Reviewed by Adrienne Walker.

        8 more unit tests added:
        WebTransformationMatrixTest.verifyBlendForTranslation
        WebTransformationMatrixTest.verifyBlendForScale
        WebTransformationMatrixTest.verifyBlendForSkewX
        WebTransformationMatrixTest.verifyBlendForSkewY
        WebTransformationMatrixTest.verifyBlendForRotationAboutX
        WebTransformationMatrixTest.verifyBlendForRotationAboutY
        WebTransformationMatrixTest.verifyBlendForRotationAboutZ
        WebTransformationMatrixTest.verifyBlendForCompositeTransform

        * tests/WebTransformationMatrixTest.cpp:
        (WebKit::TEST):
        (WebKit):
        (WebKit::printTransform):

== Rolled over to ChangeLog-2012-05-22 ==
