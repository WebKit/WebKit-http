2012-05-25  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        WebKitTestRunner needs to support layoutTestController.setJavaScriptProfilingEnabled
        https://bugs.webkit.org/show_bug.cgi?id=42328

        Reviewed by Eric Seidel.

        Removed private APIs that were only being used by DRT.

        * public/WebDevToolsAgent.h:
        (WebDevToolsAgent):
        * src/WebDevToolsAgentImpl.cpp:
        * src/WebDevToolsAgentImpl.h:
        (WebDevToolsAgentImpl):

2012-05-28  Peter Beverloo  <peter@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-05-28  Peter Beverloo  <peter@chromium.org>

        [Chromium] Build fix for the Android bot, set CXX_target at gyp generation-time
        https://bugs.webkit.org/show_bug.cgi?id=87649

        Unreviewed build fix.

        Chromium Android builds were broken because v8 tried to compile files
        for target with the "-m32" flag. This was caused by a v8 check falling
        back to using "which g++" to find the right compiler, whereas it should
        have used the $CXX_target environment variable. This isn't being set
        for Android builds.

        * gyp_webkit: Set the CXX_target environment variable. Annotate the fix
          with a FIXME comment too.

2012-05-28  Keishi Hattori  <keishi@webkit.org>

        Expose value localization function of HTMLInputElement
        https://bugs.webkit.org/show_bug.cgi?id=84356

        Reviewed by Kent Tamura.

        * public/WebInputElement.h:
        (WebInputElement):
        * src/WebInputElement.cpp:
        (WebKit::WebInputElement::localizeValue):
        (WebKit):

2012-05-28  MORITA Hajime <morrita@google.com>

        Unreviewed Mac Chromium build fix.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::allowStyleScoped):

2012-05-28  MORITA Hajime  <morrita@google.com>

        https://bugs.webkit.org/show_bug.cgi?id=87609
        [Chromium] FrameLoaderClient::allowStyleScoped() should be implemented interms of WebPermissionClient

        Reviewed by Kent Tamura.

        Added allowStyleScoped() implementation which is essentially same as shadowDOMAllowed().

        * src/FrameLoaderClientImpl.cpp:
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-05-25  Ryosuke Niwa  <rniwa@webkit.org>

        Roll chromium DEPS from r139156 to r139184.

        * DEPS:

2012-05-25  Garrett Casto  <gcasto@chromium.org>

        Allow WebTextFieldDecoratorClient to see applied decorations.
        https://bugs.webkit.org/show_bug.cgi?id=86557

        Reviewed by Kent Tamura.

        * WebKit.gyp: Added new files.
        * public/WebInputElement.h:
        (WebKit::WebInputElement::decorationElementFor): Returns the
        WebElement attached to the WebInputElement by the given
        WebTextFieldDecoratorClient, if one exists.
        * src/TextFieldDecoratorImpl.cpp:
        (WebKit):
        * src/TextFieldDecoratorImpl.h:
        (TextFieldDecoratorImpl::decoratorClient): Get the
        WebTextFieldDecoratorClient owned by this object.

2012-05-25  Mihai Parparita  <mihaip@chromium.org>

        Allow synchronous XHRs to be disabled in documents
        https://bugs.webkit.org/show_bug.cgi?id=87540

        Reviewed by Eric Seidel.

        Synchronous XMLHttpRequests are a problematic API, since they result
        in blocked UI threads. Some clients may wish to always disable them;
        give them a setting to do so (see also r103629 for other cases where
        synchronous XHRs are disabled).

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setSyncXHRInDocumentsEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-25  Kinuko Yasuda  <kinuko@chromium.org>

        [chromium] Deprecate FileUtilities::getFileSize and getFileModifiedTime in favor of getFileMetadata
        https://bugs.webkit.org/show_bug.cgi?id=87492

        Reviewed by Adam Barth.

        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getFileMetadata):

2012-05-25  Ryosuke Niwa  <rniwa@webkit.org>

        Roll Chromium DEPS from r139024 to r139156 in an attempt to fix Chromium Win builds.

        * DEPS:

2012-05-25  Mark Pilgrim  <pilgrim@chromium.org>

        [Chomium] Move sandboxSupport to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=87518

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKitPlatformSupport):
        * public/platform/android/WebSandboxSupport.h:
        * public/platform/linux/WebFontFamily.h:
        * public/platform/linux/WebSandboxSupport.h:
        * public/platform/mac/WebSandboxSupport.h:
        * public/platform/win/WebSandboxSupport.h:
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::ensureFontLoaded):
        (WebCore::PlatformSupport::loadFont):
        (WebCore::PlatformSupport::getFontFamilyForCharacters):
        (WebCore::PlatformSupport::getRenderStyleForStrike):

2012-05-25  Dana Jansens  <danakj@chromium.org>

        [chromium] WebLayerTreeViewImpl should not hide methods in CCLayerTreeHost with signatures that match the Client interface
        https://bugs.webkit.org/show_bug.cgi?id=87301

        Reviewed by James Robinson.

        Most methods in the CCLayerTreeHostClient interface have a matching
        method signature on CCLayerTreeHost that simply calls the client, if
        one exists at all. However, CCLayerTreeHost::updateAnimations() does
        important work in addition to calling the client.

        Currently WebLayerTreeViewImpl itself implements the interface for
        CCLayerTreeHostClient as well as CCLayerTreeHost, and simply forwards
        any call to a method in the client interface to its own client. This
        blocks WebViewImpl from calling CCLayerTreeHost::updateAnimations, since
        the method is also in the client interface.

        We change WebLayerTreeViewImpl to own a CCLayerTreeHost and a
        WebLayerTreeHostClientAdapter. This fixes the shadowing by making
        the two interfaces separate, and resolves lifetime issues by
        ensuring that the CCLayerTreeHost is destroyed before its client.

        * src/WebLayerTreeView.cpp:
        (WebKit::WebLayerTreeView::setSurfaceReady):
        (WebKit::WebLayerTreeView::setRootLayer):
        (WebKit::WebLayerTreeView::compositorIdentifier):
        (WebKit::WebLayerTreeView::setViewportSize):
        (WebKit::WebLayerTreeView::viewportSize):
        (WebKit::WebLayerTreeView::setBackgroundColor):
        (WebKit::WebLayerTreeView::setVisible):
        (WebKit::WebLayerTreeView::setPageScaleFactorAndLimits):
        (WebKit::WebLayerTreeView::startPageScaleAnimation):
        (WebKit::WebLayerTreeView::setNeedsAnimate):
        (WebKit::WebLayerTreeView::setNeedsRedraw):
        (WebKit::WebLayerTreeView::commitRequested):
        (WebKit::WebLayerTreeView::composite):
        (WebKit::WebLayerTreeView::updateAnimations):
        (WebKit::WebLayerTreeView::compositeAndReadback):
        (WebKit::WebLayerTreeView::finishAllRendering):
        (WebKit::WebLayerTreeView::context):
        (WebKit::WebLayerTreeView::loseCompositorContext):
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit):
        (WebLayerTreeViewClientAdapter):
        (WebKit::WebLayerTreeViewClientAdapter::WebLayerTreeViewClientAdapter):
        (WebKit::WebLayerTreeViewClientAdapter::~WebLayerTreeViewClientAdapter):
        (WebKit::WebLayerTreeViewImpl::create):
        (WebKit::WebLayerTreeViewImpl::WebLayerTreeViewImpl):
        (WebKit::WebLayerTreeViewImpl::~WebLayerTreeViewImpl):
        * src/WebLayerTreeViewImpl.h:
        (WebCore):
        (WebKit):
        (WebKit::WebLayerTreeViewImpl::layerTreeHost):
        (WebLayerTreeViewImpl):

2012-05-25  Kinuko Yasuda  <kinuko@chromium.org>

        Unreviewed; rolling chromium deps.

        * DEPS:

2012-05-25  W. James MacLean  <wjmaclean@chromium.org>

        [chromium] LayerChromium should recognise existing layer active animations when the layer is added.
        https://bugs.webkit.org/show_bug.cgi?id=87166

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::MockLayerTreeHost::didAddAnimationWasCalled):
        (MockLayerTreeHost):
        (WTF::MockLayerTreeHost::MockLayerTreeHost):
        (WTF):
        (CCLayerTreeHostTestLayerAddedWithAnimation):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::CCLayerTreeHostTestLayerAddedWithAnimation):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::beginTest):
        (WTF::CCLayerTreeHostTestLayerAddedWithAnimation::afterTest):

2012-05-17  Andrey Kosyakov  <caseq@chromium.org>

        [chromium] add instrumentation for compositing
        https://bugs.webkit.org/show_bug.cgi?id=83928

        Reviewed by James Robinson.

        - plumb willCommit() and didComposite() to inspector instrumentation via WebViewImpl.

        * WebKit.gypi: Added WebLayerTreeViewTest
        * src/WebLayerTreeViewImpl.cpp:
        (WebKit::WebLayerTreeViewImpl::didBeginFrame):
        (WebKit):
        (WebKit::WebLayerTreeViewImpl::willCommit):
        * src/WebLayerTreeViewImpl.h:
        (WebLayerTreeViewImpl):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didBeginFrame):
        (WebKit):
        (WebKit::WebViewImpl::willCommit):
        * src/WebViewImpl.h:
        (WebViewImpl):
        * tests/CCLayerTreeHostTest.cpp:
        * tests/FakeCCLayerTreeHostClient.h:
        * tests/WebLayerTest.cpp:
        * tests/WebLayerTreeViewTest.cpp: Added.

2012-05-25  Peter Beverloo  <peter@chromium.org>

        [Chromium] Pull in Android tools from Chromium's repo through the DEPS file
        https://bugs.webkit.org/show_bug.cgi?id=87478

        Reviewed by Kent Tamura.

        Chromium's r122048 added the forwarder tool, which forwards a TCP port
        listening on the device to a port on the host. This now is a required
        dependency of DumpRenderTree, so pull it in.

        Since it's likely that more tools will be required, pull in the entire
        tools/android/ directory in case the Chromium port for Android is being
        checked out or updated.

        * DEPS: Added Android-specific dependency on tools/android/

2012-05-25  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118461.
        http://trac.webkit.org/changeset/118461
        https://bugs.webkit.org/show_bug.cgi?id=87468

        Breaks two chromium browser_tests. (Requested by vsevik on
        #webkit).

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):

2012-05-24  Tim Horton  <timothy_horton@apple.com>

        Add feature defines for web-facing parts of CSS Regions and Exclusions
        https://bugs.webkit.org/show_bug.cgi?id=87442
        <rdar://problem/10887709>

        Reviewed by Dan Bernstein.

        * features.gypi:

2012-05-24  Kent Tamura  <tkent@chromium.org>

        PAGE_POPUP: window.setValueAndClosePopup should be moved to a
        per-context property of DOMWindow.
        https://bugs.webkit.org/show_bug.cgi?id=87086

        Reviewed by Adam Barth.

        * src/WebPagePopupImpl.cpp:
        (WebKit): Add PagePopupFrameLoaderClient, which allows window.pagePopupController.
        (WebKit::WebPagePopupImpl::initPage):
         - Use PagePopupFrameLoaderClient
         - Remove the call of ScriptController::installFunctionsForPagePopup().
         - Call DOMWindowPagePopup::install() to inform m_popupClient to a
           DOMWindowPagePopup object for the DOMWindow.

2012-05-21  Kinuko Yasuda  <kinuko@chromium.org>

        Cleanup: add a file system call which captures the file metadata at once.
        https://bugs.webkit.org/show_bug.cgi?id=86995

        Reviewed by David Levin.

        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getFileMetadata):
        (WebCore):

2012-05-24  Hironori Bono  <hbono@chromium.org>

        Enable grammar checking on Chromium when we paste text  (Take 2)
        https://bugs.webkit.org/show_bug.cgi?id=74393

        Reviewed by Ryosuke Niwa.

        This change enables grammar checking on Chromium and implements a mock grammar
        checker to fix a failing test.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Show suggestions when we right-click grammatically-misspelled words.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::isGrammarCheckingEnabled): Enable grammar checking when we enable asynchronous spellchecking.
        (WebKit::EditorClientImpl::checkGrammarOfString): set badGrammarLocation to -1 to avoid an assertion error.
        * src/WebTextCheckingResult.cpp:
        (WebKit::WebTextCheckingResult::operator TextCheckingResult): Fill GrammarDetails for grammatical errors.

2012-05-24  Alexandre Elias  <aelias@google.com>

        [chromium] Support mobile device rotation resizing
        https://bugs.webkit.org/show_bug.cgi?id=86819

        Reviewed by Adam Barth.

        Resizes on a mobile device are caused either by rotation or
        on-screen-keyboard bringup, and need different treatment to remain
        naturally laid out, scaled and scrolled without disorienting the user.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):

2012-05-24  Antoine Labour  <piman@chromium.org>

        [chromium] Add a setForceRenderSurface to WebLayer for test/bench purpose
        https://bugs.webkit.org/show_bug.cgi?id=87436

        Reviewed by James Robinson.

        * src/WebLayer.cpp:
        (WebKit::WebLayer::setForceRenderSurface):
        (WebKit):
        (WebKit::WebLayer::forceRenderSurface):
        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):
        * tests/LayerChromiumTest.cpp:

2012-05-24  Adam Barth  <abarth@webkit.org>

        Fix the chromium-android build.

        * features.gypi:

2012-05-24  John Mellor  <johnme@chromium.org>

        Font Boosting: Add compile flag and runtime setting
        https://bugs.webkit.org/show_bug.cgi?id=87394

        Reviewed by Adam Barth.

        Expose fontBoostingEnabled runtime setting via WebSettings.

        * features.gypi:
        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFontBoostingEnabled):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-24  Kinuko Yasuda  <kinuko@chromium.org>

        Cleanup: introduce toFile() to reduce static cast from Blob to File
        https://bugs.webkit.org/show_bug.cgi?id=87234

        Reviewed by Eric Seidel.

        * src/WebDragData.cpp:
        (WebKit::WebDragData::items):

2012-05-24  Lu Guanqun  <guanqun.lu@intel.com>

        use built-in data type DashArray
        https://bugs.webkit.org/show_bug.cgi?id=87344

        Reviewed by Eric Seidel.

        * tests/PlatformContextSkiaTest.cpp:
        (WebCore::TEST):

2012-05-24  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move queryLocalizedString to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=85762

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::getPluginList):
        * public/platform/WebLocalizedString.h:
        * src/LocalizedStrings.cpp:
        (WebCore::query):

2012-05-24  Dana Jansens  <danakj@chromium.org>

        [chromium] Only display frames created with memory allocations meant to be displayed
        https://bugs.webkit.org/show_bug.cgi?id=85108

        Reviewed by Adrienne Walker.

        Removing code to protect visible textures when a tab becomes invisible,
        as we want to reduce our memory limit for invisible tabs and these
        textures should not be saved.

        * src/NonCompositedContentHost.cpp:
        * src/NonCompositedContentHost.h:
        (NonCompositedContentHost):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setVisibilityState):
        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestHooks::didCommit):
        (WTF::CCLayerTreeHostTest::CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::scheduleComposite):
        (WTF::CCLayerTreeHostTest::dispatchComposite):
        (CCLayerTreeHostTest):
        (WTF::CCLayerTreeHostTest::doBeginTest):
        (CCLayerTreeHostTestTickAnimationWhileBackgrounded):
        (WTF::CCLayerTreeHostTestTickAnimationWhileBackgrounded::willAnimateLayers):
        (CCLayerTreeHostTestVisibilityAndAllocationControlDrawing):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::beginTest):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::didCommitAndDrawFrame):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::didCommit):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::commitCompleteOnCCThread):
        (WTF::CCLayerTreeHostTestVisibilityAndAllocationControlDrawing::afterTest):
        (WTF):

2012-05-24  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118352.
        http://trac.webkit.org/changeset/118352
        https://bugs.webkit.org/show_bug.cgi?id=87390

        Caused 6 editing/spelling tests crash/fail on chromium in
        debug. (Requested by vsevik on #webkit).

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::isGrammarCheckingEnabled):
        * src/WebTextCheckingResult.cpp:
        (WebKit::WebTextCheckingResult::operator TextCheckingResult):

2012-05-24  Ian Vollick  <vollick@chromium.org>

        [chromium] Forcibly sync running animations in the waiting state when synchronized start times are needed.
        https://bugs.webkit.org/show_bug.cgi?id=87153

        Reviewed by James Robinson.

        * tests/CCLayerAnimationControllerTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):

2012-05-23  Yury Semikhatsky  <yurys@chromium.org>

        Web Inspector: add a command to InspectorMemoryAgent for getting process memory break down
        https://bugs.webkit.org/show_bug.cgi?id=87263

        Reviewed by Pavel Feldman.

        Added an API for retrieving render process private and shared memory in bytes.

        * public/platform/WebKitPlatformSupport.h:
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::getProcessMemorySize):
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::getProcessMemorySize):
        (WebCore):

2012-05-24  Hironori Bono  <hbono@chromium.org>

        Enable grammar checking on Chromium when we paste text.
        https://bugs.webkit.org/show_bug.cgi?id=74393

        Reviewed by Hajime Morita.

        This change enables grammar checking on Chromium and implements a mock grammar
        checker to fix a failing test.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Show suggestions when we right-click grammatically-misspelled words.
        * src/EditorClientImpl.cpp:
        (WebKit::EditorClientImpl::isGrammarCheckingEnabled): Enable grammar checking when we enable asynchronous spellchecking.
        * src/WebTextCheckingResult.cpp:
        (WebKit::WebTextCheckingResult::operator TextCheckingResult): Fill GrammarDetails for grammatical errors.

2012-05-24  Vivek Galatage  <vivekgalatage@gmail.com>

        Web Inspector: localStorage items are not updated when the storage changes
        https://bugs.webkit.org/show_bug.cgi?id=83012

        Reviewed by Pavel Feldman.

        Instrumented the DOM Storage Events in order to update the frontend.

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::dispatchLocalStorageEvent):
        (WebCore::StorageAreaProxy::dispatchSessionStorageEvent):

2012-05-23  Ojan Vafai  <ojan@chromium.org>

        add back the ability to disable flexbox
        https://bugs.webkit.org/show_bug.cgi?id=87147

        Reviewed by Tony Chang.

        * features.gypi:

2012-05-23  Dana Jansens  <danakj@chromium.org>

        [chromium] Enable the CCLayerTreeHostTestCanDrawBlocksDrawing test in single-threaded mode
        https://bugs.webkit.org/show_bug.cgi?id=87308

        Reviewed by James Robinson.

        Chromium bug: http://crbug.com/127481

        Unit test: CCLayerTreeHostTestCanDrawBlocksDrawing.runSingleThread

        * tests/CCLayerTreeHostTest.cpp:
        (WTF::TestHooks::didCommit):
        (WTF):
        (WTF::CCLayerTreeHostTestCanDrawBlocksDrawing::didCommit):

2012-05-23  James Robinson  <jamesr@chromium.org>

        Add a Setting to make position:fixed form a new stacking context
        https://bugs.webkit.org/show_bug.cgi?id=87186

        Reviewed by Adam Barth.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFixedPositionCreatesStackingContext):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-23  James Robinson  <jamesr@chromium.org>

        [chromium] Turn ENABLE(OVERFLOW_SCROLLING) off for Chromium port
        https://bugs.webkit.org/show_bug.cgi?id=87177

        Reviewed by Eric Seidel.

        Removes ENABLE(OVERFLOW_SCROLLING) from the set of enables set by Chromium. This guards a new non-standard
        CSS property, -webkit-overflow-scrolling, that was introduced by iOS5 intended for mobile browsers. This
        property is very partially implemented in Chromium but the way it's implemented does cause new stacking contexts
        to be created that otherwise would not be, breaking "desktop" pages.

        This turns the feature off until we can figure out how to deal with the compatibility issues.

        * features.gypi:

2012-05-23  Jay Civelli  <jcivelli@chromium.org>

        [chromium] Provides a way to cancel an external popup menu before it is shown.
        https://bugs.webkit.org/show_bug.cgi?id=83474

        Reviewed by Kent Tamura.

        * src/ExternalPopupMenu.cpp:
        (WebKit::ExternalPopupMenu::show):

2012-05-23  Michael Nordman  <michaeln@google.com>

        [chromium] DomStorage events handling needs TLC (3)
        https://bugs.webkit.org/show_bug.cgi?id=87031
        https://code.google.com/p/chromium/issues/detail?id=128482
        Only queue storage events for Documents which have allocated
        a WebCore::Storage instance since pages that have attached onstorage
        event handlers must have a non-null Storage instance.

        Reviewed by Adam Barth.

        * src/StorageAreaProxy.cpp:
        (WebCore::StorageAreaProxy::dispatchLocalStorageEvent):
        (WebCore::StorageAreaProxy::dispatchSessionStorageEvent):
        (WebCore::StorageAreaProxy::isEventSource):

2012-05-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118218.
        http://trac.webkit.org/changeset/118218
        https://bugs.webkit.org/show_bug.cgi?id=87299

        breaks webkit win builder (Requested by pilgrim_google__ on
        #webkit).

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKitPlatformSupport):
        (WebKit::WebKitPlatformSupport::queryLocalizedString):
        * public/platform/WebLocalizedString.h:
        (WebKit):
        * src/LocalizedStrings.cpp:
        (WebCore::query):

2012-05-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move themeEngine to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=87268

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::sandboxSupport):
        * public/platform/android/WebThemeEngine.h:
        * public/platform/linux/WebThemeEngine.h:
        * public/platform/mac/WebThemeEngine.h:
        * public/platform/win/WebThemeEngine.h:
        * src/AssertMatchingEnums.cpp:
        * src/PlatformSupport.cpp:
        (WebCore::PlatformSupport::paintButton):
        (WebCore::PlatformSupport::paintMenuList):
        (WebCore::PlatformSupport::paintScrollbarArrow):
        (WebCore::PlatformSupport::paintScrollbarThumb):
        (WebCore::PlatformSupport::paintScrollbarTrack):
        (WebCore::PlatformSupport::paintSpinButton):
        (WebCore::PlatformSupport::paintTextField):
        (WebCore::PlatformSupport::paintTrackbar):
        (WebCore::PlatformSupport::paintProgressBar):
        (WebCore::PlatformSupport::getThemePartSize):
        (WebCore::PlatformSupport::paintThemePart):

2012-05-23  Raymes Khoury  <raymes@chromium.org>

        Change acceptMIMETypes member to acceptTypes now that file extensions are legal accept types
        https://bugs.webkit.org/show_bug.cgi?id=87271

        Reviewed by Darin Fisher.

        * public/WebFileChooserParams.h:
        (WebFileChooserParams):
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::runOpenPanel):

2012-05-23  Dana Jansens  <danakj@chromium.org>

        [chromium] Layers on main thread should get a RenderSurface for animating transform only if masksToBounds is true also
        https://bugs.webkit.org/show_bug.cgi?id=87184

        Reviewed by James Robinson.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):

2012-05-23  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move queryLocalizedString to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=85762

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit::WebKitPlatformSupport::getPluginList):
        * public/platform/WebLocalizedString.h:
        * src/LocalizedStrings.cpp:
        (WebCore::query):

2012-05-23  Antti Koivisto  <antti@apple.com>

        Build fix.

        Not reviewed.

        * src/WebDocument.cpp:
        (WebKit::WebDocument::insertUserStyleSheet):

2012-05-22  Alexandre Elias  <aelias@google.com>

        [chromium] Apply viewport tag initial-scale only once
        https://bugs.webkit.org/show_bug.cgi?id=82949

        Reviewed by Adam Barth.

        First, check that isPageScaleFactorSet return false before setting
        initial-scale. We need to call dispatchViewportPropertiesDidChange()
        when the viewport width changes, since that's an input to the viewport
        tag calculation. When this happens, we shouldn't pop back to initial
        scale.

        Second, check that isNewNavigation is true when deciding to clear
        isPageScaleFactorIsSet in didCommitLoad. We only want to clear it on
        the very first commit, otherwise we'll pop back to initial scale if
        the user zooms in before the load is complete.

        New test WebFrameTest::FixedLayoutInitializeAtMinimumPageScale.

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::dispatchViewportPropertiesDidChange):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::didCommitLoad):

2012-05-21  Shawn Singh  <shawnsingh@chromium.org>

        Improve W3C conformance of backface-visibility
        https://bugs.webkit.org/show_bug.cgi?id=84195

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):

2012-05-22  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r118095.
        http://trac.webkit.org/changeset/118095
        https://bugs.webkit.org/show_bug.cgi?id=87201

        "Causing crashes on Mac in
        WebCore::StyleResolver::adjustRenderStyle (Requested by
        sundiamonde on #webkit).

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-22  Xianzhu Wang  <wangxianzhu@chromium.org>

        [Chromium-Android] Run DumpRenderTree as an apk (C++ and gyp part)
        https://bugs.webkit.org/show_bug.cgi?id=86922

        Reviewed by Kent Tamura.

        * All.gyp: Added DumpRenderTree_apk into dependencies for Android.

2012-05-22  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Call canAccelerate2dCanvas directly
        https://bugs.webkit.org/show_bug.cgi?id=86893

        Reviewed by James Robinson.

        Part of a refactoring series. See tracking bug 82948.

        * public/platform/WebKitPlatformSupport.h:
        (WebKitPlatformSupport):
        * src/PlatformSupport.cpp:
        (WebCore):

2012-05-22  Dana Jansens  <danakj@chromium.org>

        [chromium] Don't drop children of a RenderSurface from the renderSurfaceLayerList when then position of the surface in its clipRect is not known
        https://bugs.webkit.org/show_bug.cgi?id=87181

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):
        (WebKitTests):

2012-05-22  MORITA Hajime  <morrita@google.com>

        [Chromium][API] Introduce WebPermissionClient::allowWebComponents()
        https://bugs.webkit.org/show_bug.cgi?id=87097

        Reviewed by Kent Tamura.

        - Added WebPermissionClient::allowWebComponents(), and
        - Implemented FrameLoaderClientImpl::shadowDOMAllowed() using it.

        * public/WebPermissionClient.h:
        (WebPermissionClient):
        (WebKit::WebPermissionClient::allowWebComponents):
        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::shadowDOMAllowed):
        (WebKit):
        * src/FrameLoaderClientImpl.h:
        (FrameLoaderClientImpl):

2012-05-22  James Robinson  <jamesr@chromium.org>

        Add a Setting to make position:fixed form a new stacking context
        https://bugs.webkit.org/show_bug.cgi?id=87186

        Reviewed by Adam Barth.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFixedPositionCreatesStackingContext):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-22  Dana Jansens  <danakj@chromium.org>

        [chromium] Don't force the visibleLayerRect to be empty for animating layers whose front face is not visible
        https://bugs.webkit.org/show_bug.cgi?id=86886

        Reviewed by Adrienne Walker.

        * tests/CCLayerTreeHostCommonTest.cpp:
        (WebKitTests::TEST):

2012-05-22  Mark Pilgrim  <pilgrim@chromium.org>

        [Chromium] Move cookieJar to Platform.h
        https://bugs.webkit.org/show_bug.cgi?id=86755

        Reviewed by Adam Barth.

        Part of a refactoring series. See tracking bug 82948.

        * WebKit.gyp:
        * public/platform/WebCookie.h:
        * public/platform/WebCookieJar.h:
        * public/platform/WebKitPlatformSupport.h:
        (WebKit):
        (WebKit::WebKitPlatformSupport::themeEngine):
        * src/PlatformSupport.cpp:
        (WebCore::getCookieJar):

2012-05-22  Jochen Eisinger  <jochen@chromium.org>

        Unreviewed.  Rolled DEPS.

        * DEPS:

2012-05-22  Kausalya Madhusudhanan  <kmadhusu@chromium.org>

        [Chromium] Use overloaded printBegin() webkit API to support auto fit to page functionality.
        https://bugs.webkit.org/show_bug.cgi?id=86684

        Reviewed by Darin Fisher.

        * public/WebFrame.h:
        (WebFrame):
        * public/WebPlugin.h:
        (WebPlugin):
        * public/WebPrintParams.h:
        (WebKit::WebPrintParams::WebPrintParams):
        (WebPrintParams):
        * src/WebFrameImpl.cpp:
        (WebKit):
        * src/WebFrameImpl.h:
        (WebFrameImpl):
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::printBegin):

2012-05-22  Adam Barth  <abarth@webkit.org>

        [Chromium] Expose setMediaPlaybackRequiresUserGesture via WebSettings
        https://bugs.webkit.org/show_bug.cgi?id=87164

        Reviewed by Eric Seidel.

        This is used by the Chromium Android port.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setMediaPlaybackRequiresUserGesture):
        (WebKit):
        * src/WebSettingsImpl.h:
        (WebSettingsImpl):

2012-05-21  Shawn Singh  <shawnsingh@chromium.org>

        [chromium] Add unit testing for WebTransformationMatrix::blend()
        https://bugs.webkit.org/show_bug.cgi?id=87066

        Reviewed by Adrienne Walker.

        8 more unit tests added:
        WebTransformationMatrixTest.verifyBlendForTranslation
        WebTransformationMatrixTest.verifyBlendForScale
        WebTransformationMatrixTest.verifyBlendForSkewX
        WebTransformationMatrixTest.verifyBlendForSkewY
        WebTransformationMatrixTest.verifyBlendForRotationAboutX
        WebTransformationMatrixTest.verifyBlendForRotationAboutY
        WebTransformationMatrixTest.verifyBlendForRotationAboutZ
        WebTransformationMatrixTest.verifyBlendForCompositeTransform

        * tests/WebTransformationMatrixTest.cpp:
        (WebKit::TEST):
        (WebKit):
        (WebKit::printTransform):

== Rolled over to ChangeLog-2012-05-22 ==
