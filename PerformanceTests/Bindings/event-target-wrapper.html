<!DOCTYPE html>
<body>
<pre id="log"></pre>
<script src="../Parser/resources/runner.js"></script>
<a href="#">Click here to start</a>
<script>
var link = document.getElementsByTagName('a')[0];
var evt = null;
var kIteratonsPerTest = 1000000;

link.addEventListener('click', function(event) {
    link.textContent = '';
    window.evt = event;
    event.preventDefault();

    start(20, function() {
        var e = window.evt;
        for (var x = 0; x < kIteratonsPerTest; x++) {
            e.target;
        }
    }, 10, function() {
        if (window.layoutTestController)
            layoutTestController.notifyDone();
    });

    return false;
}, false);

if (window.layoutTestController) {
    layoutTestController.waitUntilDone();
    layoutTestController.dumpAsText();
}

if (window.eventSender) {
    eventSender.mouseMoveTo(link.offsetLeft + 5, link.offsetTop + 5);
    eventSender.mouseDown();
    eventSender.mouseUp();
}
</script>
</body>
