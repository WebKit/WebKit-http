<!doctype html>
<html>
    <head>
        <title>Testing that the custom filter is applied correctly.</title>
        <script>
            if (window.testRunner) {
                window.testRunner.overridePreference("WebKitCSSCustomFilterEnabled", "1");
                window.testRunner.overridePreference("WebKitWebGLEnabled", "1");
                window.testRunner.dumpAsText(true);
                window.testRunner.waitUntilDone();
            }
            
            function runTest()
            {
                // We need to run the tests after the downloading succeeded.
                if (window.testRunner)
                    window.testRunner.notifyDone();
            }
        </script>
    </head>
    <body onload="runTest()">
        <img style="-webkit-filter: custom(url('../resources/vertex-offset.vs') mix(url('../resources/color-offset.fs') normal source-atop))" src="../resources/reference.png">
        <img style="-webkit-filter: custom(url('../resources/vertex-offset.vs'), 6 11)" src="../resources/reference.png">
        <img style="-webkit-filter: custom(url('../resources/vertex-explode-detached.vs'), 3 3 detached)" src="../resources/reference.png">
        <img style="-webkit-filter: custom(url('../resources/vertex-explode-detached.vs') mix(url('../resources/color-offset.fs') normal source-atop), 3 3 detached)" src="../resources/reference.png">
        <img style="-webkit-filter: custom(url('../resources/pass-tex-coord.vs') mix(url('../resources/color-offset.fs') normal source-atop))" src="../resources/reference.png">
        <!--
            Testing that simple custom filters work in software mode. You should see 5 blocks of colored bars with different effects applied, from left to right: 
            offset to the right with washed out colors, just offset to the right with normal colors, 4 smaller blocks attached to the corners, 4 smaller blocks 
            attached to the corners with washed out colors, normal block with washed out colors.
            Note: WebGL needs to be enabled for this test to succeed.
        -->
    </body>
</html>
