<!DOCTYPE html>
<html>
<style>
body {
    margin: 0;
}
.flexbox {
    width: 600px;
    display: -webkit-flexbox;
    background-color: grey;
}
.flexbox div {
    height: 20px;
    border: 0;
}

.rtl {
    direction: rtl;
}

.bt {
    -webkit-writing-mode: horizontal-bt;
}

.vertical-rl, .vertical-lr {
    height: 600px;
}

:-webkit-any(.vertical-rl, .vertical-lr) div {
    width: 20px;
}

.vertical-rl {
    -webkit-writing-mode: vertical-rl;
}

.vertical-lr {
    -webkit-writing-mode: vertical-lr;
}

.flexbox > :nth-child(1) {
    background-color: blue;
}
.flexbox > :nth-child(2) {
    background-color: green;
}
.flexbox > :nth-child(3) {
    background-color: red;
}
</style>
<script>
if (window.layoutTestController)
    layoutTestController.dumpAsText();
</script>
<script src="resources/flexbox.js"></script>
<body onload="checkFlexBoxen()">

<div class="flexbox rtl">
  <div data-expected-width="50" data-offset-x="500" style="width: -webkit-flex(1 0 0); margin: 0 auto;"></div>
  <div data-expected-width="300" data-offset-x="150" style="width: -webkit-flex(2 0 0); padding: 0 100px;"></div>
  <div data-expected-width="50" data-offset-x="100" style="width: -webkit-flex(1 0 0); margin-left: 100px;"></div>
</div>

<div class="flexbox rtl">
  <div data-expected-width="50" data-offset-x="500" style="width: -webkit-flex(1 0 0); margin: 0 auto;"></div>
  <div data-expected-width="300" data-offset-x="150" style="width: -webkit-flex(2 0 0); padding: 0 100px;"></div>
  <div data-expected-width="50" data-offset-x="0" style="width: -webkit-flex(1 0 0); -webkit-margin-start: 100px;"></div>
</div>

<div class="flexbox rtl" style="-webkit-margin-start: 20px;-webkit-margin-end: 50px;">
  <div data-expected-width="50" data-offset-x="550" style="width: -webkit-flex(1 0 0); margin: 0 auto;"></div>
  <div data-expected-width="300" data-offset-x="200" style="width: -webkit-flex(2 0 0); padding: 0 100px;"></div>
  <div data-expected-width="50" data-offset-x="50" style="width: -webkit-flex(1 0 0); -webkit-margin-start: 100px;"></div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="150" data-offset-y="0" style="height: -webkit-flex(1 0 0);"></div>
  <div data-expected-height="300" data-offset-y="150" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="150" data-offset-y="450" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="150" data-offset-y="0" data-offset-x="50" style="height: -webkit-flex(1 0 0); margin: 0 100px 0 50px;"></div>
  <div data-expected-height="300" data-offset-y="150" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="150" data-offset-y="450" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="150" data-offset-y="0" style="height: -webkit-flex(1 0 0);"></div>
  <div data-expected-height="300" data-offset-y="150" class="bt" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="150" data-offset-y="450" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="450" data-offset-y="0" style="height: -webkit-flex(1 0 0);-webkit-padding-start:200px;-webkit-padding-end:200px;-webkit-padding-before:100px;-webkit-padding-after:100px;"></div>
  <div data-expected-height="100" data-offset-y="450" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="50" data-offset-y="550" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="300" data-offset-y="0" class="bt" style="height: -webkit-flex(1 0 0);-webkit-padding-start:200px;-webkit-padding-end:200px;-webkit-padding-before:100px;-webkit-padding-after:100px;"></div>
  <div data-expected-height="200" data-offset-y="300" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="100" data-offset-y="500" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>


<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="100" data-offset-y="100" style="height: -webkit-flex(1 0 0); margin: auto 0;"></div>
  <div data-expected-height="200" data-offset-y="300" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="100" data-offset-y="500" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="50" data-offset-y="50" style="height: -webkit-flex(1 0 0);margin: auto 0;"></div>
  <div data-expected-height="400" data-offset-y="150" style="height: -webkit-flex(2 0 auto);"><div style="width:200px;height:300px;background-color:orange;"></div></div>
  <div data-expected-height="50" data-offset-y="550" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="50" data-offset-y="50" style="height: -webkit-flex(1 0 0);margin: auto 0;"></div>
  <div data-expected-height="400" data-offset-y="150" class="bt" style="height: -webkit-flex(2 0 auto);"><div style="width:200px;height:300px;background-color:orange;"></div></div>
  <div data-expected-height="50" data-offset-y="550" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="100" data-offset-y="100" style="height: -webkit-flex(1 0 0);-webkit-margin-start:auto;-webkit-margin-end:auto;-webkit-margin-before:0;-webkit-margin-after:0;;"></div>
  <div data-expected-height="200" data-offset-y="300" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="100" data-offset-y="500" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr">
  <div data-expected-height="150" data-offset-y="0" class="bt" style="height: -webkit-flex(1 0 0);-webkit-margin-start:auto;-webkit-margin-end:auto;-webkit-margin-before:0;-webkit-margin-after:0;;"></div>
  <div data-expected-height="300" data-offset-y="150" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="150" data-offset-y="450" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-lr rtl">
  <div data-expected-height="50" data-offset-y="500" style="height: -webkit-flex(1 0 0); margin: auto 0;"></div>
  <div data-expected-height="300" data-offset-y="150" class="bt" style="height: -webkit-flex(2 0 0); padding: 100px 0;"></div>
  <div data-expected-height="50" data-offset-y="0" style="height: -webkit-flex(1 0 0); -webkit-margin-start: 100px;"></div>
</div>
</div>

<div class="flexbox vertical-lr">
  <div data-expected-height="350" style="height: -webkit-flex(1 1 400px); min-height: 350px;"></div>
  <div data-expected-height="250" style="height: -webkit-flex(1 1 400px);"></div>
</div>

<div style="position:relative">
<div class="flexbox vertical-rl">
  <div data-expected-height="150" data-offset-y="0" data-offset-x="580" style="height: -webkit-flex(1 0 0);"></div>
  <div data-expected-height="300" data-offset-y="150" data-offset-x="580" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="150" data-offset-y="450" data-offset-x="580" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox vertical-rl">
  <div data-expected-height="150" data-offset-y="0" data-offset-x="480" style="height: -webkit-flex(1 0 0); margin: 0 100px 0 50px;"></div>
  <div data-expected-height="300" data-offset-y="150" data-offset-x="580" style="height: -webkit-flex(2 0 0);"></div>
  <div data-expected-height="150" data-offset-y="450" data-offset-x="580" style="height: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox bt" style="height:200px">
  <div data-expected-width="150" data-offset-y="180" data-offset-x="0" style="width: -webkit-flex(1 0 0);"></div>
  <div data-expected-width="300" data-offset-y="180" data-offset-x="150" style="width: -webkit-flex(2 0 0);"></div>
  <div data-expected-width="150" data-offset-y="180" data-offset-x="450" style="width: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position:relative">
<div class="flexbox bt" style="height:200px">
  <div data-expected-width="150" data-offset-y="130" data-offset-x="0" style="width: -webkit-flex(1 0 0); margin: 100px 0 50px 0;"></div>
  <div data-expected-width="300" data-offset-y="180" data-offset-x="150" style="width: -webkit-flex(2 0 0);"></div>
  <div data-expected-width="150" data-offset-y="180" data-offset-x="450" style="width: -webkit-flex(1 0 0);"></div>
</div>
</div>

<div style="position: relative;">
    <div data-expected-width="600" style="direction: rtl; display: -webkit-flexbox; margin-left: 10px; margin-right:20px;" class="flexbox">
      <div data-expected-width="50" data-offset-x="510" style="width: -webkit-flex(1 0 0); margin: 0 auto;"></div>
      <div data-expected-width="300" data-offset-x="160" style="width: -webkit-flex(2 0 0); padding: 0 100px;"></div>
      <div data-expected-width="50" data-offset-x="10" style="width: -webkit-flex(1 0 0);margin-right: 100px;"></div>
    </div>
</div>

<div style="position: relative;">
    <div data-expected-width="700" style="direction: rtl; display: -webkit-flexbox; padding-left: 10px; padding-right: 20px; border-style: solid; border-left: 30px solid; border-right: 40px solid;" class="flexbox ">
      <div data-expected-width="50" data-offset-x="540" style="width: -webkit-flex(1 0 0); margin: 0 auto;"></div>
      <div data-expected-width="300" data-offset-x="190" style="width: -webkit-flex(2 0 0); padding: 0 100px;"></div>
      <div data-expected-width="50" data-offset-x="40" style="width: -webkit-flex(1 0 0);margin-right: 100px;"></div>
    </div>
</div>

</body>
</html>