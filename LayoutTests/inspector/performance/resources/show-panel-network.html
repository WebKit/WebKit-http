<html>
<head>
<script src="../../../http/tests/inspector/inspector-test.js"></script>
<script src="performance-test.js"></script>
<script>

function makeXHRRequests(count)
{
    for (var i = 0; i < count; ++i) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", document.url, true);
        xhr.send();
    }
}


function test()
{
    WebInspector.showPanel("network");
    InspectorTest.evaluateInPage("makeXHRRequests(30)", step1);

    function step1()
    {
        function perfTest1(timer)
        {
            WebInspector.showPanel("audits");
            var timerCookie = timer.start("show-network-panel");
            WebInspector.showPanel("network");
            timer.finish(timerCookie);
            timer.done();
        }

        InspectorTest.runPerformanceTest(perfTest1, 5000);
    }
}

if (!window.layoutTestController) {
    setTimeout(function() {
        makeXHRRequests(700);
    }, 3000);
}

</script>
</head>

<body onload="runTest()">
</body>
</html>
