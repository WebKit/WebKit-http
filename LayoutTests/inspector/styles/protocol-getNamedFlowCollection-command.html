<html>
<head>
<script src="../../http/tests/inspector/inspector-test.js"></script>
<script>

function createDynamicElements()
{
    var frameDoc = window.frames[0].document;

    var el = frameDoc.createElement("article");
    el.innerText = "flow4";
    el.style.webkitFlowInto = "flow4";
    frameDoc.body.appendChild(el);

    el = frameDoc.createElement("div");
    el.style.webkitFlowFrom = "flow4";
    frameDoc.body.appendChild(el);
}

function test()
{
    WebInspector.showPanel("elements");
    InspectorTest.evaluateInPage("createDynamicElements()", testStep);

    function testStep()
    {
        function namedFlowCallback(namedFlows)
        {
            InspectorTest.addResult("=== CSS Named Flows ===");

            if (!namedFlows)
            {
                InspectorTest.addResult("[!] Failed to get Named Flows");
                InspectorTest.completeTest();
                return;
            }

            namedFlows.sort();

            for (var i = 0; i < namedFlows.length; ++i)
                InspectorTest.addResult(namedFlows[i]);

            InspectorTest.completeTest();
        }

        function documentCallback(document)
        {
            WebInspector.cssModel.getNamedFlowCollectionAsync(document.id, namedFlowCallback);
        }

        WebInspector.domAgent.requestDocument(documentCallback);
    }
}
</script>
</head>

<body onload="runTest()">
<p>
Tests that the "getNamedFlowCollection" command returns the CSS Named Flows in the page.
<a href="https://bugs.webkit.org/show_bug.cgi?id=91607">Bug 91607</a>
</p>

<article style="-webkit-flow-into: flow1">flow1</article>
<div style="-webkit-flow-from: flow1"></div>

<article style="-webkit-flow-into: flow2">flow2</article>
<div style="-webkit-flow-from: flow2"></div>

<article style="-webkit-flow-into: flow3">flow3</article>
<div style="-webkit-flow-from: flow3"></div>

<iframe></iframe>

</body>
</html>
