<!DOCTYPE html>
<html>
<body>
Webkit Bug 81265: Crash due to layer tree information not updated when moving run-in children.<br />
Test passes if it does not crash.
<style>
#test0 {
    -webkit-perspective: 1;
}
#test1:nth-last-child(3n) {
    -webkit-box-reflect: right;
    display: run-in;
}
#test2 {
    display: inline-table;
}
#test2:first-child {
    -webkit-box-reflect: below;
}
</style>
<script>
if (window.testRunner)
    testRunner.dumpAsText();

onload = function() 
{
    test0 = document.createElement('div');
    test0.setAttribute('id','test0');
    document.body.appendChild(test0);
    test1 = document.createElement('b');
    test1.setAttribute('id','test1');
    document.body.appendChild(test1);
    test2 = document.createElement('div');
    test2.setAttribute('id','test2');
    test1.appendChild(test2);
    test3 = document.createElement('div');
    document.body.appendChild(test3);
    document.body.insertBefore(document.createElement('div'), test3);
    document.designMode = 'on';
    document.execCommand('selectall');
    document.execCommand('removeFormat');
}
</script>
</body>
</html>

