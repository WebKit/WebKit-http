<!DOCTYPE html>
<html>
<head>
<script>
if (window.testRunner) {
    testRunner.dumpAsText();
    testRunner.dumpFrameLoadCallbacks();
    testRunner.waitUntilDone();
}

if (window.internals)
    window.internals.settings.setAllowNavigationToInvalidURL(false);
</script>
</head>
<body>
<p>Tests that we do not redirect to an invalid URL initiated by JavaScript when setting allowNavigationToInvalidURL is false. This test PASSED if you do not see an entry in the dumped frame load callbacks of the form: &quot;willPerformClientRedirectToURL: x-dummy://A=a&amp;B=b&quot;.</p>
<p>Note, this test must be run in DumpRenderTree.</p>
<iframe id="frame" src="resources/redirect-to-invalid-url-using-javascript.html"></iframe>
<script>
function done()
{
    if (window.testRunner)
        testRunner.notifyDone();
}

window.setTimeout(done, 0);
</script>
</body>
</html>
