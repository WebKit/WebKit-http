<!doctype html>
<html>
    <head>
        <title>Test for https://bugs.webkit.org/show_bug.cgi?id=102957</title>
        <style>
        .content {
            -webkit-flow-into: flow;
            font-size: 50px;
            color: green;
            font-family: Ahem;
        }

        .first-letter-div:first-letter {
            color: red;
        }

        .region {
            -webkit-flow-from: flow;
            height: 50px;
        }
        </style>
        <script>
            function removeFirstLetter() {
                document.body.offsetTop; // force layout
                document.getElementById("target").style.display = "none";
            }
        </script>
    </head>
    <body onload="removeFirstLetter()">
        <p>Test case for <a href="https://bugs.webkit.org/show_bug.cgi?id=102957">102957</a>.</p>
        <p>Testing that the removal of the first-letter pseudo render object will not crash the flow thread logic.</p>
        <p>You should see a green rectangle. There should be no red or yellow.</p>
        <div class="content">
            <div id="target" class="first-letter-div">aaaa</div>
            aaaa
        </div>
        <div class="region"></div>
    </body>
</html>