<!DOCTYPE html>
<template id="template"><span><template></template></span></template>
<template id="template2"><span></span></template>
<template id="template3"><svg></svg></template>
<script src="../../js/resources/js-test-pre.js"></script>
<script>

description('Test HTMLTemplateElement content ownerDocument');

if (!window.HTMLTemplateElement)
    testFailed('This test requires ENABLE(TEMPLATE_ELEMENT)');

var template = document.getElementById('template');
shouldBe('template.ownerDocument', 'document');

var templateContentOwnerDocument = template.content.ownerDocument;
shouldBeTrue('templateContentOwnerDocument instanceof HTMLDocument');
shouldNotBe('document', 'templateContentOwnerDocument');
shouldBe('template.content.firstChild.ownerDocument', 'templateContentOwnerDocument');

var innerTemplate = template.content.firstChild.firstChild;
shouldBe('innerTemplate.ownerDocument', 'templateContentOwnerDocument');
shouldBe('innerTemplate.content.ownerDocument', 'templateContentOwnerDocument');
shouldBeTrue('innerTemplate.ownerDocument instanceof HTMLDocument');

var template2 = document.getElementById('template2');
shouldBe('template2.ownerDocument', 'document');
shouldBe('template2.content.ownerDocument', 'templateContentOwnerDocument');

var df = document.createDocumentFragment();
var span = df.appendChild(document.createElement('span'));
shouldBe('df.ownerDocument', 'document');
shouldBe('span.ownerDocument', 'document');

template.content = df;
shouldBe('df.ownerDocument', 'templateContentOwnerDocument');
shouldBe('span.ownerDocument', 'templateContentOwnerDocument');

shouldThrow('template.content = document.createElement("span");');
shouldThrow('template.content = document.createTextNode("text");');
if (window.WebKitShadowRoot) {
    var div = document.createElement('div');
    shouldThrow('template.content = new WebKitShadowRoot(div)');
}

var template3 = document.getElementById('template2');
shouldBe('template3.ownerDocument', 'document');
shouldBe('template3.content.ownerDocument', 'templateContentOwnerDocument');
shouldBe('template3.content.firstChild.ownerDocument', 'templateContentOwnerDocument');

</script>
<script src="../../js/resources/js-test-post.js"></script>
