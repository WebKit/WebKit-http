<script>
window.addEventListener("message", handleMessage, false);

function handleMessage(event)
{
    var url = event.data.params[0];
    var request = new XMLHttpRequest();
    request.open("GET", url, true);
    request.onreadystatechange = function()
    {
        if (request.readyState !== 4)
            return;
        if (request.status === 200)
            event.source.postMessage({ id: event.data.id, result: request.responseText }, event.origin);
        else
            event.source.postMessage({ id: event.data.id, error: request.statusText }, event.origin);
    }
    request.send();
}
</script>
